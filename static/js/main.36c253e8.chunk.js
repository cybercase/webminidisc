(this.webpackJsonpwebmd=this.webpackJsonpwebmd||[]).push([[0],{162:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAaElEQVR4Ac3BQQrCQAAEsIz///MobGG7bZUiHkz8laKoe+olplrFtRriJVa1ilUNsYlrNcVQQ+zEe3UWB/FZTXEh3quzOIhrNcVQQ+zEWU2xqiE2D6ua4iwOHqa6J6hNTDXFl+q++oUnXWYXCDnmtMUAAAAASUVORK5CYII="},288:function(e,t,a){e.exports=a.p+"static/media/record-complete-notification-icon.f6ae1070.png"},292:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAAEEfUpiAAAACXBIWXMAAAsSAAALEgHS3X78AAAQR0lEQVRYCQE8EMPvAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAP8AAAAAAP8AAAIAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA//8AAAAB/wAAAgAAAAAAAAAAAQD/AP8AAAAAAAAAAAAAAP8AAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAAAAEAAAAAAAAAAP8AAP8AAAAAAQAAAP8AAAAB/wAAAAAAAAEAAAAAAAAAAAAA//8AAAAAAAABAAAA/wD//wEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAQIAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAA/wAAAAAA/wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAQD/AAAAAAD/AAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAP8AAAABAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAQAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAA/wAAAAEAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAABAP//AAAAAAAAAAAAAAEBAAABAAAAAAAAAAAAAAAAAAAA/wAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAP8AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAABAAAAAAAAAP8AAAABAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQL/AAD/AAAAAQAAAP8AAAAAAAAA/wAAAP8AAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAAA/wAAAP8AAAAAAAAAAAAAAgEAAAH/AAD/AAAAAQAAAAAAAAABAAAAAf8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAA/wEAAAH/AAD/AAAAAP8AAP//AAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA/wAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAgAA//8AAAABAAAA/wAAAAAAAAD/AAAA/wAAAAAAAAAAAAD/AAAA/wAAAP8AAAAAAP//AAD//wAAAAAAAAAAAAACAAABAQAA//8AAAABAAAAAAAAAAEAAAABAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAD/AAABAQAA//8AAAAAAAD//wAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAD/AAAAAQAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAAAAAAAAAD/AAAAAQAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAEAAAAA/wAA/wEAAAEAAAAAAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAQAAAP8AAAAAAAAAAAAAAAEAAAD/AAAAAAAAAACAAAAAAAAAAH8AAAAAAAAAAQAAAAAAAAAA/wAAAAAAAACBAAAAAAAAAIAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAD/AAD/AQAAAQAAAAAAAAAAAAAAAAAAAP8AAAABAAAAAAAAAP8AAAABAAAAAAAAAAAAAAD/AAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAQIAAAAAAAAA/wAAAAABAAABAAAAAP8AAP//AAD/AAAAAAAAAAH/AAD/AAAAAP8AAAD/AAD//wAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAD/AAAAAQEAAAEAAAAAAAAAAP8AAP8BAAABAAAAAAAAAAABAAABAAAAAAAAAAAAAAAAAAAAAAAAAACBAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAACAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAQAAAAAAAD//wAAAQEAAAABAAAAAAAAAP8AAAAAAAAAAQEAAAEAAAD/AAAAAQEAAAAAAAD/AAAAAAAAAAEAAAAAAAAAAAEAAAAAAIAAAAAAAAAAfwAAAAAAAAABAAAAAAD//wAAAAAAAIGBAAAAAAAAgAEAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAP//AAABAQAAAAAAAAAAAAAAAAAAAP8AAAABAAAAAAAAAP8AAAABAAAAAAAAAAAAAAD/AAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAD//wAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAAAAAAAAQIAAAAAAAAA/wAAAAAAAAEBAAAAAAAA//8AAP//AAAAAAAAAAEAAP//AAAAAAAA/wAAAP//AAD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAD/AAAAAQAAAQEAAAAAAAAAAAAA//8AAAEBAAAAAAAAAAAAAAEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIEAAAAAAAAAgAAAAAAAAAAAAAAAAAABAQAAAAAAAICAAAAAAAAAf38AAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAQAAAP8AAAAAAAAAAAAAAAEAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAO4NtYBuc2+1AAAAAElFTkSuQmCC"},301:function(e,t,a){e.exports=a.p+"static/media/chrome-icon.f3b6c54c.svg"},306:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAiUlEQVR4Ae3BSQ7CUAxEwde+/50bFkgQyGD/DBZSqrjtZMDsIMaZKTFAjDHzRJGoM+tEgagxOSJJ5JkakSByzBixQWwz+4gVYp05hlgglpljiRlinjmH+CJ+mXOJD2LKXEO8iDdzLfEUNBN5pk5sCJoFzYJmQbOgWdAsaBY0C5oFzUSNyRO3f/AAz+gRJE12Ia8AAAAASUVORK5CYII="},307:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAiElEQVR4Ae3BSQ7CQBAEwcz+/58LDkhsxp4xSwtBBD9P5oRxMkDGhXmyoWhWNCuaFc2KZkWzolnRrGhWNJOz8FlyVDSTa+Ez5ETuhfeSC7IsvIfckMfCa8kCWRdeQx6QbeE5skLGhH1kg4wLc2SAzAljZJDMC+tkguwTlskk2S9ckwYBwt83OwASZhEklsYbbQAAAABJRU5ErkJggg=="},311:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAzUlEQVR4AY3BgXHCMBAAwXuHQugEdfanzkRlH3nGgMfjEO8GF6nFjhpMCxeoxZSZrFprTMW0cFFm0nsnU8YYvNy4QGWVKRGgvC38R4uptUYEqKi8BN9okQm9g3IQTMFftMiECHaCg4UzWmRCBCib4MTCkRaZEAEKmXwT7GmRCb2D8laFvfOiBptgo1ZrjTYGKFPwUROriGAKNjd2Wmtsgh2V1fP55OjGpBYfwYneOypnCij+V0Bx8AMIBF+opXK/3xljCHQ2Cxc9Hg/O/AKFdlY5+3GtSAAAAABJRU5ErkJggg=="},312:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAfUlEQVR4Aa3BUQ6CMBRFwXOb7vulKz/CR4Ni1RCc4a6wJr+FTeedbFQ+ScLUeOWGKxoH2SRhSgZTMljpPFG5qrOQDKZkMCUDLZ41FrTYaaHFTgstzho3dU6SwZQMpmSgxVnjRIudFlrstNBipXFTY0GLSYtvGjeFg1wT/uEBKpc1Cx/u8CoAAAAASUVORK5CYII="},313:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAt0lEQVR4Ab3Bi1HbYBAGwD2RQlwKVMbnzu6v7IIkZ4CEhzOZya5/Vf7OBHEoLx7cb4JnFJrgurnPJAhXPCNOm+/NjFfhijhtvjYzDo+P7Zc4lBebz82Mw1qtu+0Su3JTPjYzDmu17kYkduWN8qeZcVirdTcisSu/Ke/NjMNarbsRiV35QHk1Mw5rte5GJHblE5vTuFmrdTcisStfeHBKwtMTl8sFkdiVb/zwRkISN+UO5TTeK//LT0efTfwPZVIpAAAAAElFTkSuQmCC"},314:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA3klEQVR4Ae3BwU3EUBBEweeV8+Jn1u3MeiL7eARIPoCFVsLLwVXcbrfb7fZqCwe2Jxeyvax8sj3HGFwlCbv5YGd7jjG4ShK+rLanJK6ybRtHK5+qildY+YUkPGuMwZmVg7cxaJXQktBs8yzbtDEG33nwYisHlXAkiWabZ0miVRXfWTlRVbQ5J8+qKs6s/EJV8VcenEhCS0JLQktCS0JLQktCS0JLQkvCTx6ckESTRJNEk0STRJNEk0STRJNEk8RPFttTElXFFZLQbLNbVnbbtnEl2+wWdgsfJtdauP0X7xi2ahnkEPOyAAAAAElFTkSuQmCC"},315:function(e,t){e.exports="data:image/png;base64,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"},318:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACcklEQVR4Ae3BgW1bRxBF0bs0C1lXss+VWJ3ssBO6kzedWJVM/kIk8kVQMmUlCAL4HP74rzUeFBHFHRHReF9xX2Nz5B0RUVzMGVxlmquIKC4iovFBR+6IiOIi5mSZBPdIYqd40Xit8VpxceRGRFTM4EXxEbZZJBXQeEBjJyIqZvBacVU0lkyzSOKzjlxEREnCaTTEo6qKq9YaVcVea42qYq+1RlXRWqNxEREVc+JMFg3xt2IpGkumWSTxWQc2EVExJ4vGYHGaR1QVVUVVsVQVVcVeVVFV7FUVS2MTESWJRWOwOJNFQ7woisaSaRZJfFaLiJLELY2BM1k0xBKnYC8iqCquWmtUFY9qrdEioiRxj8bAmSy2iQj+aUfe4Uw0BnE6ERFsGq9VRBARXNnmliQ2jTsO/IIzeZRtPurAxjaLbRbbLLZ5hG1s8zsObCRhG0nYRhK2kYRt/k1HNraRhG0kYRtJ2GbOSWYSEUREsRMRSOIzjmwkYRtJ2EYStplzkpmMMVgigr2YE2fyGV9sn3rvIQnbSMI2c04ykzEGmcnSe6f3zvfvT7QWnHvn3DtPz8+8RRKbxhsOXNhGEraZc5KZjDHITPbGEIuGcCaLxuB3HdhERGNjmzknmckYg8zkVqa5R2NwSxKbxjsO7Mw5yUzGGGQm94whrjSEM7nSGHzUgYuIaKfTiTEGmclbMs17NAaLJDaNX/jCju1Tay1677xlDLEEcALO/YzzG+feuTp//cqm8YAv3LB96r3Hz58/6b1z6/n5id7PLCdePD0/0X/8wN++wenEpvGgxjsiothI4moMcdXYNPYaH9R4TPG2xh//Z38BPq9JPdh7I1oAAAAASUVORK5CYII="},343:function(e,t,a){e.exports=a(585)},365:function(e,t){},367:function(e,t){},398:function(e,t){},399:function(e,t){},405:function(e,t){},533:function(e,t){},535:function(e,t){},568:function(e,t,a){},569:function(e,t,a){},584:function(e,t,a){e.exports=function(){return new Worker(a.p+"5aba599f50c4d8f249d1.worker.js")}},585:function(e,t,a){"use strict";a.r(t);var A=a(0),n=a.n(A),l=a(18),i=a.n(l),r=a(21);const o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{console.log("state change",a.state),"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})},e.update()}).catch(e=>{console.error("Error during service worker registration:",e)})}var s=a(27),d=a(15),m=a(286),u=a(119),p=a.n(u),g=a(50);function h(e){return new Promise(t=>{setTimeout(t,e)})}async function f(e,t){let a=1,A=setInterval(()=>{a++,t(Math.min(100,1e3*a/e*100))},1e3);await h(e),window.clearInterval(A)}function b(e){return Object(r.e)(e,r.c)}function E(e){return`/webminidisc/${e}`}function v(e,t){localStorage.setItem(e,JSON.stringify(t))}function w(e,t){let a=localStorage.getItem(e);if(null===a)return t;try{return JSON.parse(a)}catch(A){return t}}function k(e,t){const a=e=>Math.ceil(e/7);let A=e.groups.filter(e=>null!==e.title),n=e.fullWidthTitle+"0;//",l=e.title+"0;//";if(t||void 0===t)for(let s of A){let e=`${s.tracks[0].index+1}${s.tracks.length-1!==0&&`-${s.tracks[s.tracks.length-1].index+1}`}//`;n+=s.fullWidthTitle+e,l+=s.title+e}let i=0;i+=a(2*n.length),i+=a(y(l));for(let s of Object(d.getTracks)(e)){var r,o,c;i+=a(2*(null!==(r=null===(o=s.fullWidthTitle)||void 0===o?void 0:o.length)&&void 0!==r?r:0)),i+=a(y(null!==(c=s.title)&&void 0!==c?c:""))}return 7*Math.max(255-i,0)}function C(e){return e.normalize("NFD").replace(/[^\x00-\x7F]/g,"")}function y(e){const t={"\u30ac":1,"\u30ae":1,"\u30b0":1,"\u30b2":1,"\u30b4":1,"\u30b6":1,"\u30b8":1,"\u30ba":1,"\u30bc":1,"\u30be":1,"\u30c0":1,"\u30c2":1,"\u30c5":1,"\u30c7":1,"\u30c9":1,"\u30d0":1,"\u30d1":1,"\u30d3":1,"\u30d4":1,"\u30d6":1,"\u30d7":1,"\u30d9":1,"\u30da":1,"\u30dc":1,"\u30dd":1,"\u30ee":1,"\u30f0":1,"\u30f1":1,"\u30f5":1,"\u30f6":1,"\u30f4":1,"\u30fd":1,"\u30fe":1,"\u304c":1,"\u304e":1,"\u3050":1,"\u3052":1,"\u3054":1,"\u3056":1,"\u3058":1,"\u305a":1,"\u305c":1,"\u305e":1,"\u3060":1,"\u3062":1,"\u3065":1,"\u3067":1,"\u3069":1,"\u3070":1,"\u3071":1,"\u3073":1,"\u3074":1,"\u3076":1,"\u3077":1,"\u3079":1,"\u307a":1,"\u307c":1,"\u307d":1,"\u308e":1,"\u3090":1,"\u3091":1,"\u3095":1,"\u3096":1,"\u3094":1,"\u309d":1,"\u309e":1};return e.length+e.split("").map(e=>{var a;return null!==(a=t[e])&&void 0!==a?a:0}).reduce((e,t)=>e+t,0)}function x(e){let t;!function(e){e[e.normal=0]="normal",e[e.dakuten=1]="dakuten",e[e.handakuten=2]="handakuten"}(t||(t={}));const a="\u306f\u3072\u3075\u3078\u307b\u30cf\u30d2\u30d5\u30d8\u30db".split(""),A="\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8".split("").concat(a);let n=[],l=t.normal;for(const c of O(e,!0).split("").reverse())switch(l){case t.dakuten:if(A.includes(c)){n.push(String.fromCharCode(c.charCodeAt(0)+1)),l=t.normal;break}case t.handakuten:if(a.includes(c)){n.push(String.fromCharCode(c.charCodeAt(0)+2)),l=t.normal;break}case t.normal:switch(c){case"\u309b":case"\u3099":case"\uff9e":l=t.dakuten;break;case"\u309c":case"\u309a":case"\uff9f":l=t.handakuten;break;default:l=t.normal,n.push(c)}}e=n.reverse().join("");const i={"\uff0d":"-","\uff70":"-","\u30a1":"\uff67","\u30a2":"\uff71","\u30a3":"\uff68","\u30a4":"\uff72","\u30a5":"\uff69","\u30a6":"\uff73","\u30a7":"\uff6a","\u30a8":"\uff74","\u30a9":"\uff6b","\u30aa":"\uff75","\u30ab":"\uff76","\u30ac":"\uff76\uff9e","\u30ad":"\uff77","\u30ae":"\uff77\uff9e","\u30af":"\uff78","\u30b0":"\uff78\uff9e","\u30b1":"\uff79","\u30b2":"\uff79\uff9e","\u30b3":"\uff7a","\u30b4":"\uff7a\uff9e","\u30b5":"\uff7b","\u30b6":"\uff7b\uff9e","\u30b7":"\uff7c","\u30b8":"\uff7c\uff9e","\u30b9":"\uff7d","\u30ba":"\uff7d\uff9e","\u30bb":"\uff7e","\u30bc":"\uff7e\uff9e","\u30bd":"\uff7f","\u30be":"\uff7f\uff9e","\u30bf":"\uff80","\u30c0":"\uff80\uff9e","\u30c1":"\uff81","\u30c2":"\uff81\uff9e","\u30c3":"\uff6f","\u30c4":"\uff82","\u30c5":"\uff82\uff9e","\u30c6":"\uff83","\u30c7":"\uff83\uff9e","\u30c8":"\uff84","\u30c9":"\uff84\uff9e","\u30ca":"\uff85","\u30cb":"\uff86","\u30cc":"\uff87","\u30cd":"\uff88","\u30ce":"\uff89","\u30cf":"\uff8a","\u30d0":"\uff8a\uff9e","\u30d1":"\uff8a\uff9f","\u30d2":"\uff8b","\u30d3":"\uff8b\uff9e","\u30d4":"\uff8b\uff9f","\u30d5":"\uff8c","\u30d6":"\uff8c\uff9e","\u30d7":"\uff8c\uff9f","\u30d8":"\uff8d","\u30d9":"\uff8d\uff9e","\u30da":"\uff8d\uff9f","\u30db":"\uff8e","\u30dc":"\uff8e\uff9e","\u30dd":"\uff8e\uff9f","\u30de":"\uff8f","\u30df":"\uff90","\u30e0":"\uff91","\u30e1":"\uff92","\u30e2":"\uff93","\u30e3":"\uff6c","\u30e4":"\uff94","\u30e5":"\uff6d","\u30e6":"\uff95","\u30e7":"\uff6e","\u30e8":"\uff96","\u30e9":"\uff97","\u30ea":"\uff98","\u30eb":"\uff99","\u30ec":"\uff9a","\u30ed":"\uff9b","\u30ef":"\uff9c","\u30f2":"\uff66","\u30f3":"\uff9d","\u30fc":"-","\u30ee":"\u30ee","\u30f0":"\u30f0","\u30f1":"\u30f1","\u30f5":"\u30f5","\u30f6":"\u30f6","\u30f4":"\uff73\uff9e","\u30fd":"\u30fd","\u30fe":"\u30fe","\u30fb":"\uff65","\u300c":"\uff62","\u300d":"\uff63","\u3002":"\uff61","\u3001":"\uff64","\uff01":"!","\uff02":'"',"\uff03":"#","\uff04":"$","\uff05":"%","\uff06":"&","\uff07":"'","\uff08":"(","\uff09":")","\uff0a":"*","\uff0b":"+","\uff0c":",","\uff0e":".","\uff0f":"/","\uff1a":":","\uff1b":";","\uff1c":"<","\uff1d":"=","\uff1e":">","\uff1f":"?","\uff20":"@","\uff21":"A","\uff22":"B","\uff23":"C","\uff24":"D","\uff25":"E","\uff26":"F","\uff27":"G","\uff28":"H","\uff29":"I","\uff2a":"J","\uff2b":"K","\uff2c":"L","\uff2d":"M","\uff2e":"N","\uff2f":"O","\uff30":"P","\uff31":"Q","\uff32":"R","\uff33":"S","\uff34":"T","\uff35":"U","\uff36":"V","\uff37":"W","\uff38":"X","\uff39":"Y","\uff3a":"Z","\uff3b":"[","\uff3c":"\\","\uff3d":"]","\uff3e":"^","\uff3f":"_","\uff40":"`","\uff41":"a","\uff42":"b","\uff43":"c","\uff44":"d","\uff45":"e","\uff46":"f","\uff47":"g","\uff48":"h","\uff49":"i","\uff4a":"j","\uff4b":"k","\uff4c":"l","\uff4d":"m","\uff4e":"n","\uff4f":"o","\uff50":"p","\uff51":"q","\uff52":"r","\uff53":"s","\uff54":"t","\uff55":"u","\uff56":"v","\uff57":"w","\uff58":"x","\uff59":"y","\uff5a":"z","\uff5b":"{","\uff5c":"|","\uff5d":"}","\uff5e":"~","\u3000":" ","\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\u3041":"\uff67","\u3042":"\uff71","\u3043":"\uff68","\u3044":"\uff72","\u3045":"\uff69","\u3046":"\uff73","\u3047":"\uff6a","\u3048":"\uff74","\u3049":"\uff6b","\u304a":"\uff75","\u304b":"\uff76","\u304c":"\uff76\uff9e","\u304d":"\uff77","\u304e":"\uff77\uff9e","\u304f":"\uff78","\u3050":"\uff78\uff9e","\u3051":"\uff79","\u3052":"\uff79\uff9e","\u3053":"\uff7a","\u3054":"\uff7a\uff9e","\u3055":"\uff7b","\u3056":"\uff7b\uff9e","\u3057":"\uff7c","\u3058":"\uff7c\uff9e","\u3059":"\uff7d","\u305a":"\uff7d\uff9e","\u305b":"\uff7e","\u305c":"\uff7e\uff9e","\u305d":"\uff7f","\u305e":"\uff7f\uff9e","\u305f":"\uff80","\u3060":"\uff80\uff9e","\u3061":"\uff81","\u3062":"\uff81\uff9e","\u3063":"\uff6f","\u3064":"\uff82","\u3065":"\uff82\uff9e","\u3066":"\uff83","\u3067":"\uff83\uff9e","\u3068":"\uff84","\u3069":"\uff84\uff9e","\u306a":"\uff85","\u306b":"\uff86","\u306c":"\uff87","\u306d":"\uff88","\u306e":"\uff89","\u306f":"\uff8a","\u3070":"\uff8a\uff9e","\u3071":"\uff8a\uff9f","\u3072":"\uff8b","\u3073":"\uff8b\uff9e","\u3074":"\uff8b\uff9f","\u3075":"\uff8c","\u3076":"\uff8c\uff9e","\u3077":"\uff8c\uff9f","\u3078":"\uff8d","\u3079":"\uff8d\uff9e","\u307a":"\uff8d\uff9f","\u307b":"\uff8e","\u307c":"\uff8e\uff9e","\u307d":"\uff8e\uff9f","\u307e":"\uff8f","\u307f":"\uff90","\u3080":"\uff91","\u3081":"\uff92","\u3082":"\uff93","\u3083":"\uff6c","\u3084":"\uff94","\u3085":"\uff6d","\u3086":"\uff95","\u3087":"\uff6e","\u3088":"\uff96","\u3089":"\uff97","\u308a":"\uff98","\u308b":"\uff99","\u308c":"\uff9a","\u308d":"\uff9b","\u308f":"\uff9c","\u3092":"\uff66","\u3093":"\uff9d","\u308e":"\u30ee","\u3090":"\u30f0","\u3091":"\u30f1","\u3095":"\u30f5","\u3096":"\u30f6","\u3094":"\uff73\uff9e","\u309d":"\u30fd","\u309e":"\u30fe"},r=Object.values(i),o=e.split("").map(e=>i[e]?i[e]:e.charCodeAt(0)<127||r.includes(e)?e:" ").join("");return p.a.encode(o,"SJIS").length!==y(e)?C(e):o}function O(e,t=!1){const a={"!":"\uff01",'"':"\uff02","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","'":"\uff07","(":"\uff08",")":"\uff09","*":"\uff0a","+":"\uff0b",",":"\uff0c","-":"\uff0d",".":"\uff0e","/":"\uff0f",":":"\uff1a",";":"\uff1b","<":"\uff1c","=":"\uff1d",">":"\uff1e","?":"\uff1f","@":"\uff20",A:"\uff21",B:"\uff22",C:"\uff23",D:"\uff24",E:"\uff25",F:"\uff26",G:"\uff27",H:"\uff28",I:"\uff29",J:"\uff2a",K:"\uff2b",L:"\uff2c",M:"\uff2d",N:"\uff2e",O:"\uff2f",P:"\uff30",Q:"\uff31",R:"\uff32",S:"\uff33",T:"\uff34",U:"\uff35",V:"\uff36",W:"\uff37",X:"\uff38",Y:"\uff39",Z:"\uff3a","[":"\uff3b","\\":"\uff3c","]":"\uff3d","^":"\uff3e",_:"\uff3f","`":"\uff40",a:"\uff41",b:"\uff42",c:"\uff43",d:"\uff44",e:"\uff45",f:"\uff46",g:"\uff47",h:"\uff48",i:"\uff49",j:"\uff4a",k:"\uff4b",l:"\uff4c",m:"\uff4d",n:"\uff4e",o:"\uff4f",p:"\uff50",q:"\uff51",r:"\uff52",s:"\uff53",t:"\uff54",u:"\uff55",v:"\uff56",w:"\uff57",x:"\uff58",y:"\uff59",z:"\uff5a","{":"\uff5b","|":"\uff5c","}":"\uff5d","~":"\uff5e"," ":"\u3000",0:"\uff10",1:"\uff11",2:"\uff12",3:"\uff13",4:"\uff14",5:"\uff15",6:"\uff16",7:"\uff17",8:"\uff18",9:"\uff19","\uff67":"\u30a1","\uff71":"\u30a2","\uff68":"\u30a3","\uff72":"\u30a4","\uff69":"\u30a5","\uff73":"\u30a6","\uff6a":"\u30a7","\uff74":"\u30a8","\uff6b":"\u30a9","\uff75":"\u30aa","\uff76":"\u30ab","\uff76\uff9e":"\u30ac","\uff77":"\u30ad","\uff77\uff9e":"\u30ae","\uff78":"\u30af","\uff78\uff9e":"\u30b0","\uff79":"\u30b1","\uff79\uff9e":"\u30b2","\uff7a":"\u30b3","\uff7a\uff9e":"\u30b4","\uff7b":"\u30b5","\uff7b\uff9e":"\u30b6","\uff7c":"\u30b7","\uff7c\uff9e":"\u30b8","\uff7d":"\u30b9","\uff7d\uff9e":"\u30ba","\uff7e":"\u30bb","\uff7e\uff9e":"\u30bc","\uff7f":"\u30bd","\uff7f\uff9e":"\u30be","\uff80":"\u30bf","\uff80\uff9e":"\u30c0","\uff81":"\u30c1","\uff81\uff9e":"\u30c2","\uff6f":"\u30c3","\uff82":"\u30c4","\uff82\uff9e":"\u30c5","\uff83":"\u30c6","\uff83\uff9e":"\u30c7","\uff84":"\u30c8","\uff84\uff9e":"\u30c9","\uff85":"\u30ca","\uff86":"\u30cb","\uff87":"\u30cc","\uff88":"\u30cd","\uff89":"\u30ce","\uff8a":"\u30cf","\uff8a\uff9e":"\u30d0","\uff8a\uff9f":"\u30d1","\uff8b":"\u30d2","\uff8b\uff9e":"\u30d3","\uff8b\uff9f":"\u30d4","\uff8c":"\u30d5","\uff8c\uff9e":"\u30d6","\uff8c\uff9f":"\u30d7","\uff8d":"\u30d8","\uff8d\uff9e":"\u30d9","\uff8d\uff9f":"\u30da","\uff8e":"\u30db","\uff8e\uff9e":"\u30dc","\uff8e\uff9f":"\u30dd","\uff8f":"\u30de","\uff90":"\u30df","\uff91":"\u30e0","\uff92":"\u30e1","\uff93":"\u30e2","\uff6c":"\u30e3","\uff94":"\u30e4","\uff6d":"\u30e5","\uff95":"\u30e6","\uff6e":"\u30e7","\uff96":"\u30e8","\uff97":"\u30e9","\uff98":"\u30ea","\uff99":"\u30eb","\uff9a":"\u30ec","\uff9b":"\u30ed","\uff9c":"\u30ef","\uff66":"\u30f2","\uff9d":"\u30f3","\uff70":"\u30fc","\u30ee":"\u30ee","\u30f0":"\u30f0","\u30f1":"\u30f1","\u30f5":"\u30f5","\u30f6":"\u30f6","\uff73\uff9e":"\u30f4","\u30fd":"\u30fd","\u30fe":"\u30fe","\uff65":"\u30fb","\uff62":"\u300c","\uff63":"\u300d","\uff61":"\u3002","\uff64":"\u3001"},A=e.split("").map(e=>{var t;return null!==(t=a[e])&&void 0!==t?t:e}).join("");if(t)return A;const n=p.a.encode(A,"SJIS");return p.a.decode(n,"SJIS")!==A?C(e):n.length!==2*e.length?C(e):A}const D={[d.Encoding.sp]:"SP",[d.Encoding.lp2]:"LP2",[d.Encoding.lp4]:"LP4"};function S(e){let t=[];if(null!==e)for(let l of e.groups)for(let e of l.tracks){var a,A,n;t.push({index:e.index,title:null!==(a=e.title)&&void 0!==a?a:"Unknown Title",fullWidthTitle:null!==(A=e.fullWidthTitle)&&void 0!==A?A:"",group:null!==(n=l.title)&&void 0!==n?n:null,encoding:D[e.encoding],duration:Object(d.formatTimeFromFrames)(e.duration,!1),durationInSecs:e.duration/512})}return t.sort((e,t)=>e.index-t.index),t}function T(e){var t,a;if(!e)return[];let A=[],n=[...null!==(t=null===(a=e.groups.find(e=>null===e.title))||void 0===a?void 0:a.tracks)&&void 0!==t?t:[]],l=0;for(let i of e.groups){if(null===i.title)continue;let e=i.tracks[0].index-l;A.push({index:-1,title:null,fullWidthTitle:null,tracks:0===e?[]:n.splice(0,e)}),l=i.tracks[i.tracks.length-1].index+1,A.push(i)}return A.push({index:-1,title:null,fullWidthTitle:null,tracks:n}),A}function j(e,t,a){let A=t>a?1:-1,n=-1===a;n&&(A=-1,a=e.trackCount);let l=Math.min(t,a),i=Math.max(t,a),r=e.groups.map(e=>e.tracks).reduce((e,t)=>e.concat(t),[]).sort((e,t)=>e.index-t.index).filter(e=>!n||e.index!==t),o=e.groups.filter(e=>null!==e.title).map(e=>({name:e.title,fullWidthName:e.fullWidthTitle,start:e.tracks[0].index,end:e.tracks[0].index+e.tracks.length-1})),c=!1;for(let u of o)u.start>l&&u.start<=i&&(u.start+=A,c=!0),u.end>=l&&u.end<i&&(u.end+=A,c=!0);if(!c)return e;let s={...e};s.groups=o.map(e=>({title:e.name,fullWidthTitle:e.fullWidthName,index:e.start,tracks:r.slice(e.start,e.end+1)})).filter(e=>e.tracks.length>0);let d=s.groups.map(e=>e.tracks).reduce((e,t)=>e.concat(t),[]),m=r.filter(e=>!d.includes(e));if(n)for(let u=0;u<r.length;u++)r[u].index=u;return m.length&&s.groups.unshift({title:null,fullWidthTitle:null,index:0,tracks:m}),s}function I(e){let t=k({...e,title:"",fullWidthTitle:""},!1);const a=e.fullWidthTitle||e.groups.filter(e=>!!e.fullWidthTitle).length>0||e.groups.map(e=>e.tracks).reduce((e,t)=>e.concat(t),[]).filter(e=>!!e.fullWidthTitle).length>0,A=e=>7*Math.ceil(e/7);let n="",l="";e.title&&(n=`0;${e.title}//`),a&&(l=`\uff10\uff1b${e.fullWidthTitle}\uff0f\uff0f`);for(let o of e.groups){var i;if(null===o.title||0===o.tracks.length)continue;let e=`${o.tracks[0].index+1}`;1!==o.tracks.length&&(e+=`-${o.tracks[0].index+o.tracks.length}`);let r=n+`${e};${o.title}//`,c=l+Object(g.halfWidthToFullWidthRange)(e)+`\uff1b${null!==(i=o.fullWidthTitle)&&void 0!==i?i:""}\uff0f\uff0f`,s=A(y(r));if(a&&(s+=A(2*c.length)),t-s<0)break;n=r,l=c}let r=A(y(n));return a&&(r+=A(2*l.length)),t-r<0?null:{newRawTitle:n,newRawFullWidthTitle:a?l:""}}function B(e){if(0===e.length)return!0;let t=e[0];for(let a of e){if(a!==t)return!1;++t}return!0}function N(e,t,a){const A=a.value;return a.value=async function(...e){const t=this.mutex,a=await t.acquire();try{return await A.apply(this,e)}finally{a()}},a}function R(e){return e.breakpoints.up(600+2*e.spacing(2))}function P(e){return e.breakpoints.down(600+2*e.spacing(2))}function M(e){return e.breakpoints.up(700+2*e.spacing(2))+" and (min-height: 750px)"}var F,Q=a(321);const W=a(466);let z=(F=class{constructor({debug:e=!1}){if(this.netmdInterface=void 0,this.logger=void 0,this.cachedContentList=void 0,this.mutex=new Q.a,this.statusMonitorTimer=void 0,e){const e=(...e)=>{e&&e[0]&&e[0].method&&console.log(...e)};this.logger={debug:e,info:e,warn:e,error:e,child:()=>this.logger}}}async writeRawTitles(e){null!==e&&(await this.netmdInterface.cacheTOC(),await this.netmdInterface.setDiscTitle(x(e.newRawTitle)),await this.netmdInterface.setDiscTitle(O(e.newRawFullWidthTitle),!0),await this.netmdInterface.syncTOC(),this.dropCachedContentList())}async listContentUsingCache(){return this.cachedContentList?console.log("There's a cached TOC available."):(console.log("There's no cached version of the TOC, caching"),this.cachedContentList=await Object(d.listContent)(this.netmdInterface)),JSON.parse(JSON.stringify(this.cachedContentList))}dropCachedContentList(){console.log("Cached TOC Dropped"),this.cachedContentList=void 0}async pair(){this.dropCachedContentList();let e=await Object(d.openNewDevice)(navigator.usb,this.logger);return null!==e&&(this.netmdInterface=e,!0)}async connect(){this.dropCachedContentList();let e=await Object(d.openPairedDevice)(navigator.usb,this.logger);return null!==e&&(this.netmdInterface=e,!0)}async listContent(){return this.dropCachedContentList(),await this.listContentUsingCache()}async getDeviceStatus(){return await Object(d.getDeviceStatus)(this.netmdInterface)}async getDeviceName(){return await this.netmdInterface.netMd.getDeviceName()}async finalize(){await this.netmdInterface.netMd.finalize(),this.dropCachedContentList()}async rewriteGroups(e){const t=await this.listContentUsingCache();t.groups=e,await this.writeRawTitles(I(t))}async renameTrack(e,t,a){t=x(t),await this.netmdInterface.cacheTOC(),await this.netmdInterface.setTrackTitle(e,t),void 0!==a&&await this.netmdInterface.setTrackTitle(e,O(a),!0),await this.netmdInterface.syncTOC(),this.dropCachedContentList()}async renameGroup(e,t,a){const A=await this.listContentUsingCache();let n=A.groups.find(t=>t.index===e);n&&(n.title=t,void 0!==a&&(n.fullWidthTitle=a),await this.writeRawTitles(I(A)))}async addGroup(e,t,a){const A=await this.listContentUsingCache();let n=A.groups.find(e=>null===e.title);if(!n)return;let l=n.tracks.length,i=n.tracks.filter(a=>a.index>=e&&a.index<e+t);if(n.tracks=n.tracks.filter(e=>!i.includes(e)),l-n.tracks.length!==t)throw new Error("A track cannot be in 2 groups!");if(!B(i.map(e=>e.index)))throw new Error("Invalid sequence of tracks!");A.groups.push({title:a,fullWidthTitle:"",index:A.groups.length,tracks:i}),A.groups=A.groups.filter(e=>0!==e.tracks.length).sort((e,t)=>e.tracks[0].index-t.tracks[0].index),await this.writeRawTitles(I(A))}async deleteGroup(e){const t=await this.listContentUsingCache();let a=t.groups.findIndex(t=>t.index===e);a>=0&&t.groups.splice(a,1),await this.writeRawTitles(I(t))}async renameDisc(e,t){const a=await this.netmdInterface.getDiscTitle(),A=await this.netmdInterface.getDiscTitle(!0),n=await this.netmdInterface._getDiscTitle(),l=await this.netmdInterface._getDiscTitle(!0),i=n.indexOf("//")>=0,r=n.indexOf("\uff0f\uff0f")>=0,o=n.startsWith("0;"),c=n.startsWith("\uff10\uff1b");if(e=x(e),(t=t&&O(t))!==A&&void 0!==t){let e;e=r?c?l.replace(/^\uff10\uff1b.*?\uff0f\uff0f/,""!==t?`\uff10\uff1b${t}\uff0f\uff0f`:""):`\uff10\uff1b${t}\uff0f\uff0f${l}`:t,await this.netmdInterface.cacheTOC(),await this.netmdInterface.setDiscTitle(e,!0),await this.netmdInterface.syncTOC(),this.dropCachedContentList()}if(e===a)return;let s;s=i?o?n.replace(/^0;.*?\/\//,""!==e?`0;${e}//`:""):`0;${e}//${n}`:e,await this.netmdInterface.cacheTOC(),await this.netmdInterface.setDiscTitle(s),await this.netmdInterface.syncTOC(),this.dropCachedContentList()}async deleteTracks(e){(e=e.sort()).reverse();let t=await this.listContentUsingCache();for(let a of e)t=j(t,a,-1),await this.netmdInterface.eraseTrack(a),await h(100);await this.writeRawTitles(I(t)),this.dropCachedContentList()}async wipeDisc(){await this.netmdInterface.eraseDisc(),this.dropCachedContentList()}async wipeDiscTitleInfo(){await this.writeRawTitles({newRawTitle:"",newRawFullWidthTitle:""})}async moveTrack(e,t,a){await this.netmdInterface.moveTrack(e,t),(void 0===a||a)&&await this.writeRawTitles(I(j(await this.listContentUsingCache(),e,t))),this.dropCachedContentList()}async upload(e,t,a,A,n){let l=a.byteLength,i=0,r=0;function o(){n({written:i,encrypted:r,total:l})}let c=new W,s=Object(m.makeGetAsyncPacketIteratorOnWorkerThread)(c,({encryptedBytes:e})=>{r=e,o()}),u=x(e);t=O(t);let p=new d.MDTrack(u,A,a,524288,t,s);await Object(d.download)(this.netmdInterface,p,({writtenBytes:e})=>{i=e,o()}),c.terminate(),this.dropCachedContentList()}async play(){await this.netmdInterface.play()}async pause(){await this.netmdInterface.pause()}async stop(){await this.netmdInterface.stop()}async next(){await this.netmdInterface.nextTrack()}async prev(){await this.netmdInterface.previousTrack()}async gotoTrack(e){await this.netmdInterface.gotoTrack(e)}async gotoTime(e,t,a,A,n){await this.netmdInterface.gotoTime(e,t,a,A,n)}async getPosition(){return await this.netmdInterface.getPosition()}},Object(s.a)(F.prototype,"listContent",[N],Object.getOwnPropertyDescriptor(F.prototype,"listContent"),F.prototype),Object(s.a)(F.prototype,"getDeviceStatus",[N],Object.getOwnPropertyDescriptor(F.prototype,"getDeviceStatus"),F.prototype),Object(s.a)(F.prototype,"getDeviceName",[N],Object.getOwnPropertyDescriptor(F.prototype,"getDeviceName"),F.prototype),Object(s.a)(F.prototype,"finalize",[N],Object.getOwnPropertyDescriptor(F.prototype,"finalize"),F.prototype),Object(s.a)(F.prototype,"rewriteGroups",[N],Object.getOwnPropertyDescriptor(F.prototype,"rewriteGroups"),F.prototype),Object(s.a)(F.prototype,"renameTrack",[N],Object.getOwnPropertyDescriptor(F.prototype,"renameTrack"),F.prototype),Object(s.a)(F.prototype,"renameGroup",[N],Object.getOwnPropertyDescriptor(F.prototype,"renameGroup"),F.prototype),Object(s.a)(F.prototype,"addGroup",[N],Object.getOwnPropertyDescriptor(F.prototype,"addGroup"),F.prototype),Object(s.a)(F.prototype,"deleteGroup",[N],Object.getOwnPropertyDescriptor(F.prototype,"deleteGroup"),F.prototype),Object(s.a)(F.prototype,"renameDisc",[N],Object.getOwnPropertyDescriptor(F.prototype,"renameDisc"),F.prototype),Object(s.a)(F.prototype,"deleteTracks",[N],Object.getOwnPropertyDescriptor(F.prototype,"deleteTracks"),F.prototype),Object(s.a)(F.prototype,"wipeDisc",[N],Object.getOwnPropertyDescriptor(F.prototype,"wipeDisc"),F.prototype),Object(s.a)(F.prototype,"wipeDiscTitleInfo",[N],Object.getOwnPropertyDescriptor(F.prototype,"wipeDiscTitleInfo"),F.prototype),Object(s.a)(F.prototype,"moveTrack",[N],Object.getOwnPropertyDescriptor(F.prototype,"moveTrack"),F.prototype),Object(s.a)(F.prototype,"play",[N],Object.getOwnPropertyDescriptor(F.prototype,"play"),F.prototype),Object(s.a)(F.prototype,"pause",[N],Object.getOwnPropertyDescriptor(F.prototype,"pause"),F.prototype),Object(s.a)(F.prototype,"stop",[N],Object.getOwnPropertyDescriptor(F.prototype,"stop"),F.prototype),Object(s.a)(F.prototype,"next",[N],Object.getOwnPropertyDescriptor(F.prototype,"next"),F.prototype),Object(s.a)(F.prototype,"prev",[N],Object.getOwnPropertyDescriptor(F.prototype,"prev"),F.prototype),Object(s.a)(F.prototype,"gotoTrack",[N],Object.getOwnPropertyDescriptor(F.prototype,"gotoTrack"),F.prototype),Object(s.a)(F.prototype,"gotoTime",[N],Object.getOwnPropertyDescriptor(F.prototype,"gotoTime"),F.prototype),Object(s.a)(F.prototype,"getPosition",[N],Object.getOwnPropertyDescriptor(F.prototype,"getPosition"),F.prototype),F);var L={},U=a(38),G=a(28),V=a(22);const H=Object(G.b)({name:"uploadDialog",initialState:{visible:!1,cancelled:!1,writtenProgress:0,encryptedProgress:0,totalProgress:1,trackTotal:1,trackConverting:0,trackCurrent:0,titleCurrent:"",titleConverting:""},reducers:{setVisible:(e,t)=>{e.visible=t.payload},setWriteProgress:(e,t)=>{e.encryptedProgress=t.payload.encrypted,e.writtenProgress=t.payload.written,e.totalProgress=t.payload.total},setCancelUpload:(e,t)=>{e.cancelled=t.payload},setTrackProgress:(e,t)=>{e.trackTotal=t.payload.total,e.trackCurrent=t.payload.current,e.trackConverting=t.payload.converting,e.titleCurrent=t.payload.titleCurrent,e.titleConverting=t.payload.titleConverting}}}),{reducer:J,actions:Y}=H;var K=Object(V.enableBatching)(J);const Z=Object(G.b)({name:"renameDialog",initialState:{visible:!1,title:"",fullWidthTitle:"",index:-1,groupIndex:null},reducers:{setVisible:(e,t)=>{e.visible=t.payload},setCurrentName:(e,t)=>{e.title=t.payload},setCurrentFullWidthName:(e,t)=>{e.fullWidthTitle=t.payload},setIndex:(e,t)=>{e.index=t.payload},setGroupIndex:(e,t)=>{e.groupIndex=t.payload}}}),{reducer:X,actions:q}=Z;var $=Object(V.enableBatching)(X);const _={visible:!1,error:""},ee=Object(G.b)({name:"errorDialog",initialState:_,reducers:{setVisible:(e,t)=>{e.visible=t.payload},setErrorMessage:(e,t)=>{e.error=`${t.payload}`}}}),{actions:te,reducer:ae}=ee;var Ae=Object(V.enableBatching)(ae);const ne=Object(G.b)({name:"panicDialog",initialState:{visible:!1,dismissed:!1},reducers:{setVisible:(e,t)=>{e.visible=t.payload},dismiss:(e,t)=>{e.visible=!1,e.dismissed=!0}}}),{actions:le,reducer:ie}=ne;var re=Object(V.enableBatching)(ie);const oe={visible:!1,format:w("uploadFormat","LP2"),titleFormat:w("trackTitleFormat","filename")},ce=Object(G.b)({name:"convertDialog",initialState:oe,reducers:{setVisible:(e,t)=>{e.visible=t.payload},setFormat:(e,t)=>{e.format=t.payload,v("uploadFormat",e.format)},setTitleFormat:(e,t)=>{e.titleFormat=t.payload,v("trackTitleFormat",e.titleFormat)}}}),{actions:se,reducer:de}=ce;var me=Object(V.enableBatching)(de);const ue=Object(G.b)({name:"dumpDialog",initialState:{visible:!1,inputDeviceId:""},reducers:{setVisible:(e,t)=>{e.visible=t.payload},setInputDeviceId:(e,t)=>{e.inputDeviceId=t.payload}}}),{reducer:pe,actions:ge}=ue;var he=Object(V.enableBatching)(pe);const fe=Object(G.b)({name:"recordDialog",initialState:{visible:!1,trackTotal:1,trackDone:0,trackCurrent:0,titleCurrent:""},reducers:{setVisible:(e,t)=>{e.visible=t.payload},setProgress:(e,t)=>{e.trackTotal=t.payload.trackTotal,e.trackDone=t.payload.trackDone,e.trackCurrent=t.payload.trackCurrent,e.titleCurrent=t.payload.titleCurrent}}}),{reducer:be,actions:Ee}=fe;var ve=Object(V.enableBatching)(be);const we=()=>({mainView:"WELCOME",loading:!1,pairingFailed:!1,pairingMessage:"",browserSupported:!0,darkMode:w("darkMode",!1),vintageMode:w("vintageMode",!1),aboutDialogVisible:!1,notifyWhenFinished:w("notifyWhenFinished",!1),hasNotificationSupport:!0,fullWidthSupport:w("fullWidthSupport",!1)}),ke=we(),Ce=Object(G.b)({name:"app",initialState:ke,reducers:{setMainView:(e,t)=>{e.mainView=t.payload},setLoading:(e,t)=>{e.loading=t.payload},setPairingFailed:(e,t)=>{e.pairingFailed=t.payload},setPairingMessage:(e,t)=>{e.pairingMessage=t.payload},setBrowserSupported:(e,t)=>{e.browserSupported=t.payload},setDarkMode:(e,t)=>{e.darkMode=t.payload,v("darkMode",e.darkMode)},setNotifyWhenFinished:(e,t)=>{e.notifyWhenFinished=t.payload,v("notifyWhenFinished",t.payload)},setNotificationSupport:(e,t)=>{e.hasNotificationSupport=t.payload},setVintageMode:(e,t)=>{e.vintageMode=t.payload,v("vintageMode",t.payload)},showAboutDialog:(e,t)=>{e.aboutDialogVisible=t.payload},setFullWidthSupport:(e,t)=>{e.fullWidthSupport=t.payload,v("fullWidthSupport",e.fullWidthSupport)}}}),{reducer:ye,actions:xe}=Ce;var Oe=Object(V.enableBatching)(ye);const De=Object(G.b)({name:"main",initialState:{disc:null,deviceName:"",deviceStatus:null},reducers:{setDisc:(e,t)=>{e.disc=t.payload},setDeviceName:(e,t)=>{e.deviceName=t.payload},setDeviceStatus:(e,t)=>{e.deviceStatus=t.payload}}}),{reducer:Se,actions:Te}=De;var je=Object(V.enableBatching)(Se);let Ie=Object(U.c)({renameDialog:$,uploadDialog:K,errorDialog:Ae,panicDialog:re,convertDialog:me,dumpDialog:he,recordDialog:ve,appState:Oe,main:je});const Be=xe.setMainView.toString(),Ne=Object(G.a)({reducer:function(...e){const[t,a]=e;return a.type===Be&&"WELCOME"===a.payload?{...Re,appState:we()}:Ie(...e)},middleware:[e=>e=>async t=>{try{await e(t)}catch(a){console.error(a),e(le.setVisible(!0))}},...Object(G.c)()]}),Re=Object.freeze(Ne.getState());var Pe=a(654),Me=a(590),Fe=a(655),Qe=a(630),We=a(320),ze=a(640),Le=a(287),Ue=a(288),Ge=a.n(Ue);function Ve(e,t){return async function(a,A){switch(e){case"play":await L.netmdService.play();break;case"stop":await L.netmdService.stop();break;case"next":await L.netmdService.next();break;case"prev":await L.netmdService.prev();break;case"pause":await L.netmdService.pause();break;case"goto":{const e=Object(g.assertNumber)(t,'Invalid track number for "goto" command');await L.netmdService.gotoTrack(e);break}case"seek":{if(!(t instanceof Object))throw new Error('"seek" command has wrong params');const e=t,a=Object(g.assertNumber)(e.trackNumber,'Invalid track number for "seek" command'),A=function(e){let t=Math.round(e),a=t%60;t=(t-a)/60;let A=t%60;return t=(t-A)/60,[t,A,a,0]}(Object(g.assertNumber)(e.time,'Invalid time for "seek" command'));await L.netmdService.gotoTime(a,A[0],A[1],A[2],A[3]);break}}await h(500);try{let e=await L.netmdService.getDeviceStatus();a(Te.setDeviceStatus(e))}catch(n){console.log("control: Cannot get device status")}}}function He(){return async function(e,t){var a;e(xe.setPairingFailed(!1)),null===(a=L.mediaSessionService)||void 0===a||a.init(),await L.audioExportService.init();try{if(await L.netmdService.connect())return void e(xe.setMainView("MAIN"))}catch(A){console.error(A)}try{if(await L.netmdService.pair())return void e(xe.setMainView("MAIN"));e(Object(V.batchActions)([xe.setPairingMessage("Connection Failed"),xe.setPairingFailed(!0)]))}catch(A){console.error(A);let t=A.message;e(Object(V.batchActions)([xe.setPairingMessage(t),xe.setPairingFailed(!0)]))}}}function Je(){return async function(e){let t;e(xe.setLoading(!0));try{t=await L.netmdService.listContent()}catch(n){if(!window.confirm("This disc's title seems to be corrupted, do you wish to erase it?\nNone of the tracks will be deleted."))throw n;await L.netmdService.wipeDiscTitleInfo(),t=await L.netmdService.listContent()}let a=await L.netmdService.getDeviceName(),A=null;try{A=await L.netmdService.getDeviceStatus()}catch(l){console.log("listContent: Cannot get device status")}e(Object(V.batchActions)([Te.setDisc(t),Te.setDeviceName(a),Te.setDeviceStatus(A),xe.setLoading(!1)]))}}function Ye(e){return async function(t,a){if("granted"!==Notification.permission){if(!window.confirm("Enable Notification on recording completed?"))return;if("granted"!==await(function(){try{Notification.requestPermission().then()}catch(e){return!1}return!0}()?Notification.requestPermission():new Promise(e=>Notification.requestPermission(e))))return t(xe.setNotificationSupport(!1)),void t(xe.setNotifyWhenFinished(!1))}t(xe.setNotifyWhenFinished(e))}}const Ke={SP:d.Wireformat.pcm,LP2:d.Wireformat.lp2,LP105:d.Wireformat.l105kbps,LP4:d.Wireformat.lp4};async function Ze(e,t){var a,A,n;const l=await e.arrayBuffer(),i=new Blob([new Uint8Array(l)]);let r=await Le.parseBlob(i);const o=null!==(a=r.common.title)&&void 0!==a?a:"Unknown Title",c=null!==(A=r.common.artist)&&void 0!==A?A:"Unknown Artist",s=null!==(n=r.common.album)&&void 0!==n?n:"Unknown Album";switch(t){case"title":return o;case"artist-title":return`${c} - ${o}`;case"title-artist":return`${o} - ${c}`;case"album-title":return`${s} - ${o}`;case"artist-album-title":return`${c} - ${s} - ${o}`;case"filename":{let t=e.name;const a=t.lastIndexOf(".");return a>0&&(t=t.substring(0,a)),t}}}function Xe(e,t,a){return async function(A,n){const{audioExportService:l,netmdService:i}=L;await(null===i||void 0===i?void 0:i.stop()),A(Object(V.batchActions)([Y.setVisible(!0),Y.setCancelUpload(!1)]));const r=({written:e,encrypted:t,total:a})=>{A(Y.setWriteProgress({written:e,encrypted:t,total:a}))},o=()=>n().uploadDialog.cancelled;let c={current:0,converting:0,total:e.length,titleCurrent:"",titleConverting:""};const s=()=>{A(Y.setTrackProgress(c))};let d,m=n().main.disc,u=n().appState.fullWidthSupport,p=k(m),g="",h=1;for await(let E of async function*(e){let a=[],A=0;!function n(){if(A===e.length||o())return c.converting=A,c.titleConverting="",void s();let i=e[A];c.converting=A,c.titleConverting=i.name,s(),A++,a.push(new Promise(async(e,a)=>{let A,r;try{await l.prepare(i),({data:A,format:r}=await l.export({requestedFormat:t})),n(),e({file:i,data:A,format:r})}catch(o){d=o,g=`${i.name}: Unsupported or unrecognized format`,a(o)}}))}();let n=0;for(;n<a.length;)yield await a[n],delete a[n],n++}(e)){if(o())break;const{file:e,data:t,format:A}=E;let n=e.name;try{n=await Ze(e,a)}catch(b){console.error(b)}const l=e=>7*Math.ceil(e/7);let m=n.substr(0,Math.min(y(n),p));p-=l(y(m));let f="";u&&(f=n.substr(0,Math.min(2*n.length,p,210)/2),p-=l(2*f.length)),c.current=h++,c.titleCurrent=m,s(),r({written:0,encrypted:0,total:100});try{await(null===i||void 0===i?void 0:i.upload(m,f,t,A,r))}catch(b){d=b,g=`${e.name}: Error uploading to device. There might not be enough space left.`;break}}let f=[Y.setVisible(!1)];d&&(console.error(d),f=f.concat([te.setVisible(!0),te.setErrorMessage(g)])),A(Object(V.batchActions)(f)),function(){const{notifyWhenFinished:e,hasNotificationSupport:t}=n().appState;t&&e&&(new Notification("MiniDisc recording completed",{icon:Ge.a}).onclick=function(){window.focus(),this.close()})}(),Je()(A)}}var qe=a(629),$e=a(75),_e=a(638),et=a(639),tt=a(661),at=a(627),At=a(621),nt=a(628),lt=a(625),it=a(626),rt=a(624),ot=a(620),ct=a(6),st=a(2);const dt=st.e.div`
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 2;
`,mt=Object(st.e)(ct.v)`
    width: 80%;
    left: 10%;
    top: 20%;
`,ut=st.e.div`
    display: flex;
    justify-content: flex-end;
    padding-top: 16px;
    width: 100%;
`,pt=Object(st.e)(ct.w)`
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
`,gt=Object(st.e)(ct.c)`
    margin-left: 16px;
    min-width: 90px;
`,ht=Object(st.e)(ct.r)`
    cursor: default;
    &:hover {
        color: ${e=>e.theme.canvasText};
        background-color: initial;
    }
`,ft=st.e.span`
    display: inline-block;
    width: 16px;
    height: 16px;
    margin-left: -1px;
    margin-top: -1px;
    transform: rotateZ(45deg);
    position: relative;

    &:before {
        content: '';
        position: absolute;
        height: 100%;
        width: 3px;
        left: 50%;
        transform: translateX(-50%);
        background-color: #0a0a0a;
    }

    &:after {
        content: '';
        position: absolute;
        height: 3px;
        width: 100%;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        background-color: #0a0a0a;
    }
`,bt=st.e.button`
    width: 60px;
    height: 60px;
    position: absolute;
    bottom: 40px;
    right: 24px;
    z-index: 1;
    border-radius: 50%;
    background: rgb(185, 106, 201);
    border-width: 4px;
    border-style: solid;
    border-color: rgb(233, 128, 252) rgb(111, 45, 189) rgb(111, 45, 189) rgb(233, 128, 252);
    box-shadow: rgb(0 0 0 / 45%) 4px 4px 10px 0px;

    &:after {
        content: '';
        display: inline-block;
        width: 100%;
        height: 100%;
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAADKgAAAyoBEJdYGAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHWSURBVHic7d3BbdYwGIDhz1wYAakXNmOGdhKY4d+MC1JH4BQurcQ1EmmE3+cZwLbkV04OjrKO45idrLWeZ+b7RcO/HMfx46Kxb/Hp7gVwLwHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAuB0DePpPx77F2umXMWutzzPzc2a+XDTF68x8PY7j90Xjf7g1M893L+IfeZqZb3Pd5r97nZnHzPy6eJ4PsWZmnyOA03Z8B+AEAcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAohzLfy8va6F+zDklO0+DNnqEfC2MY8Lp3jstPkzmwXw5sqjeYtj/287BsAJAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxfwAw2y4BcmRzJgAAAABJRU5ErkJggg==');
        background-size: 30px;
        background-repeat: no-repeat;
        filter: drop-shadow(rgb(233, 128, 252) 1px 1px 0px) drop-shadow(rgb(111, 45, 189) -1px -1px 0px);
        background-position: center center;
    }

    &:active {
        border-width: 4px;
        border-style: solid;
        border-color: rgb(111, 45, 189) rgb(233, 128, 252) rgb(233, 128, 252) rgb(111, 45, 189);
        box-shadow: rgb(0 0 0 / 55%) 3px 3px 5px 0px;
    }
`,Et=e=>e.visible?n.a.createElement(dt,null,n.a.createElement(mt,null,n.a.createElement(ct.x,{style:{display:"flex",alignItems:"center"}},n.a.createElement("span",{style:{flex:"1 1 auto"}},"About Web MiniDisc"),n.a.createElement(ct.c,{onClick:e.handleClose},n.a.createElement(ft,null))),n.a.createElement(pt,null,"Web MiniDisc uses",n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(ct.a,{rel:"noopener noreferrer",href:"https://www.ffmpeg.org/",target:"_blank"},"FFmpeg")," ","and"," ",n.a.createElement(ct.a,{rel:"noopener noreferrer",href:"https://github.com/ffmpegjs/FFmpeg",target:"_blank"},"ffmpegjs"),", to read your audio files (wav, mp3, ogg, mp4, etc...)."),n.a.createElement("li",null,n.a.createElement(ct.a,{rel:"noopener noreferrer",href:"https://github.com/dcherednik/atracdenc/",target:"_blank"},"Atracdenc"),", to support atrac3 encoding (lp2, lp4 audio formats)."),n.a.createElement("li",null,n.a.createElement(ct.a,{rel:"noopener noreferrer",href:"https://emscripten.org/",target:"_blank"},"Emscripten"),", to run both FFmpeg and Atracdenc in the browser."),n.a.createElement("li",null,n.a.createElement(ct.a,{rel:"noopener noreferrer",href:"https://github.com/cybercase/netmd-js",target:"_blank"},"netmd-js"),", to send commands to NetMD devices using Javascript."),n.a.createElement("li",null,n.a.createElement(ct.a,{rel:"noopener noreferrer",href:"https://github.com/glaubitz/linux-minidisc",target:"_blank"},"linux-minidisc"),", to make the netmd-js project possible."),n.a.createElement("li",null,n.a.createElement(ct.a,{rel:"noopener noreferrer",href:"https://react95.io/",target:"_blank"},"react85"),", to build the vintage user interface."),n.a.createElement("li",null,n.a.createElement(ct.a,{rel:"noopener noreferrer",href:"https://material-ui.com/",target:"_blank"},"material-ui"),", to build the user interface.")),n.a.createElement(ut,null,n.a.createElement(gt,{onClick:e.handleClose},"OK"))))):null,vt=n.a.forwardRef((function(e,t){return n.a.createElement(ot.a,Object.assign({direction:"up",ref:t},e))})),wt=e=>{const t=Object(r.d)();let a=b(e=>e.appState.aboutDialogVisible);const A=()=>{t(xe.showAboutDialog(!1))};if(b(e=>e.appState.vintageMode)){const e={visible:a,handleClose:A};return n.a.createElement(Et,e)}return n.a.createElement(At.a,{open:a,maxWidth:"sm",fullWidth:!0,TransitionComponent:vt,"aria-labelledby":"about-dialog-slide-title"},n.a.createElement(rt.a,{id:"about-dialog-slide-title"},"About Web MiniDisc"),n.a.createElement(lt.a,null,n.a.createElement(it.a,null,"Web MiniDisc uses"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://www.ffmpeg.org/",target:"_blank"},"FFmpeg")," ","and"," ",n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://github.com/ffmpegjs/FFmpeg",target:"_blank"},"ffmpegjs"),", to read your audio files (wav, mp3, ogg, mp4, etc...)."),n.a.createElement("li",null,n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://github.com/dcherednik/atracdenc/",target:"_blank"},"Atracdenc"),", to support atrac3 encoding (lp2, lp4 audio formats)."),n.a.createElement("li",null,n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://emscripten.org/",target:"_blank"},"Emscripten"),", to run both FFmpeg and Atracdenc in the browser."),n.a.createElement("li",null,n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://github.com/cybercase/netmd-js",target:"_blank"},"netmd-js"),", to send commands to NetMD devices using Javascript."),n.a.createElement("li",null,n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://github.com/glaubitz/linux-minidisc",target:"_blank"},"linux-minidisc"),", to make the netmd-js project possible."),n.a.createElement("li",null,n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://react95.io/",target:"_blank"},"react95"),", to build the vintage user interface."),n.a.createElement("li",null,n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://material-ui.com/",target:"_blank"},"material-ui"),", to build the user interface.")),n.a.createElement(it.a,null,"Attribution"),n.a.createElement("ul",null,n.a.createElement("li",null,"MiniDisc logo from"," ",n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://en.wikipedia.org/wiki/MiniDisc",target:"_blank"},"https://en.wikipedia.org/wiki/MiniDisc")),n.a.createElement("li",null,"MiniDisc icon from"," ",n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://www.deviantart.com/blinkybill/art/Sony-MiniDisc-Plastic-Icon-473812540",target:"_blank"},"http://fav.me/d7u3g3g")))),n.a.createElement(nt.a,null,n.a.createElement(qe.a,{onClick:A},"Close")))};var kt=a(592),Ct=a(322),yt=a(631),xt=a(634),Ot=a(300),Dt=a.n(Ot),St=a(632),Tt=a(633),jt=a(662),It=a(293),Bt=a.n(It),Nt=a(158),Rt=a.n(Nt),Pt=a(299),Mt=a.n(Pt),Ft=a(294),Qt=a.n(Ft),Wt=a(295),zt=a.n(Wt),Lt=a(297),Ut=a.n(Lt),Gt=a(202),Vt=a.n(Gt),Ht=a(201),Jt=a.n(Ht),Yt=a(292),Kt=a.n(Yt),Zt=a(298),Xt=a.n(Zt);const qt=e=>{const t=[];return"MAIN"===e.mainView&&(t.push(n.a.createElement(ct.i,{key:"update",onClick:e.handleRefresh},"Reload TOC")),t.push(n.a.createElement(ct.i,{key:"title",onClick:e.handleRenameDisc},"Rename Disc")),t.push(n.a.createElement(ct.i,{key:"wipe",onClick:e.handleWipeDisc},"Wipe Disc")),t.push(n.a.createElement(ct.i,{key:"vintage",onClick:e.handleVintageMode},n.a.createElement(ct.d,{checked:!0,name:"vintageMode",variant:"menu",value:"vintageMode",label:"Retro Mode (beta)",defaultChecked:!0}))),t.push(n.a.createElement(ct.e,{key:"d1"})),t.push(n.a.createElement(ct.i,{key:"exit",onClick:e.handleExit},"Exit")),t.push(n.a.createElement(ct.e,{key:"d2"}))),t.push(n.a.createElement(ct.i,{key:"about",onClick:e.handleShowAbout},"About...")),t.push(n.a.createElement(ct.i,{key:"menu-gh"},n.a.createElement("a",{rel:"noopener noreferrer",href:"https://github.com/cybercase/webminidisc",target:"_blank"},"Fork me on GitHub"))),n.a.createElement(ct.h,{style:{position:"absolute",left:"0",top:"100%",zIndex:"9999"},onClick:e.onClick},t)},$t=Object(Qe.a)(e=>({listItemIcon:{minWidth:e.spacing(5)},toolTippedText:{textDecoration:"underline",textDecorationStyle:"dotted"}})),_t=function(e){const t=$t(),a=Object(r.d)();let{mainView:l,darkMode:i,vintageMode:o,fullWidthSupport:c}=b(e=>e.appState),s=b(e=>{var t,a;return null!==(t=null===(a=e.main.disc)||void 0===a?void 0:a.title)&&void 0!==t?t:""}),d=b(e=>{var t,a;return null!==(t=null===(a=e.main.disc)||void 0===a?void 0:a.fullWidthTitle)&&void 0!==t?t:""});const m=n.a.useRef(null),u=n.a.useRef(null),[p,g]=n.a.useState(null),h=Boolean(p),f=Object(A.useCallback)(e=>{g(e.currentTarget)},[g]),E=Object(A.useCallback)(()=>{a(xe.setDarkMode(!i))},[a,i]),v=Object(A.useCallback)(()=>{a(xe.setVintageMode(!o))},[a,o]),w=Object(A.useCallback)(()=>{g(null)},[g]),k=Object(A.useCallback)(()=>{a((async function(e){if(!window.confirm("Proceed with Wipe Disc? This operation cannot be undone."))return;const{netmdService:t}=L;e(xe.setLoading(!0)),await t.wipeDisc(),Je()(e)})),w()},[a,w]),C=Object(A.useCallback)(()=>{a(xe.setFullWidthSupport(!c))},[a,c]),y=Object(A.useCallback)(()=>{a(Je()),w()},[a,w]),x=Object(A.useCallback)(()=>{a(Object(V.batchActions)([q.setVisible(!0),q.setCurrentName(s),q.setGroupIndex(null),q.setCurrentFullWidthName(d),q.setIndex(-1)])),w()},[a,w,s,d]),O=Object(A.useCallback)(()=>{a(xe.setMainView("WELCOME")),w()},[a,w]),D=Object(A.useCallback)(()=>{a(xe.showAboutDialog(!0)),w()},[a,w]),S=Object(A.useCallback)(e=>{var t;(e.stopPropagation(),e.target!==m.current)&&(null===(t=m.current)||void 0===t||t.click());w()},[w]),T=Object(A.useCallback)(e=>{var t;(e.stopPropagation(),e.target!==u.current)&&(null===(t=u.current)||void 0===t||t.click());w()},[w]),j=[];if("MAIN"===l&&(j.push(n.a.createElement(yt.a,{key:"update",onClick:y},n.a.createElement(St.a,{className:t.listItemIcon},n.a.createElement(Bt.a,{fontSize:"small"})),n.a.createElement(Tt.a,null,"Reload TOC"))),j.push(n.a.createElement(yt.a,{key:"title",onClick:x},n.a.createElement(St.a,{className:t.listItemIcon},n.a.createElement(Rt.a,{fontSize:"small"})),n.a.createElement(Tt.a,null,"Rename Disc"))),j.push(n.a.createElement(yt.a,{key:"wipe",onClick:k},n.a.createElement(St.a,{className:t.listItemIcon},n.a.createElement(Qt.a,{fontSize:"small"})),n.a.createElement(Tt.a,null,"Wipe Disc"))),j.push(n.a.createElement(yt.a,{key:"exit",onClick:O},n.a.createElement(St.a,{className:t.listItemIcon},n.a.createElement(zt.a,{fontSize:"small"})),n.a.createElement(Tt.a,null,"Exit")))),"MAIN"===l&&(j.push(n.a.createElement(xt.a,{key:"action-divider"})),j.push(n.a.createElement(yt.a,{key:"allowFullWidth",onClick:C},n.a.createElement(St.a,{className:t.listItemIcon},c?n.a.createElement(Jt.a,{fontSize:"small"}):n.a.createElement(Vt.a,{fontSize:"small"})),n.a.createElement(Tt.a,null,c?"Disable ":"Enable ",n.a.createElement(jt.a,{title:"This advanced feature enables the use of Hiragana and Kanji alphabets. More about this in Support and FAQ.",arrow:!0},n.a.createElement("span",{className:t.toolTippedText},"Full-Width Title Editing")))))),j.push(n.a.createElement(yt.a,{key:"darkMode",onClick:E},n.a.createElement(St.a,{className:t.listItemIcon},i?n.a.createElement(Jt.a,{fontSize:"small"}):n.a.createElement(Vt.a,{fontSize:"small"})),n.a.createElement(Tt.a,null,"Dark Mode"))),"MAIN"===l&&j.push(n.a.createElement(yt.a,{key:"vintageMode",onClick:v},n.a.createElement(St.a,{className:t.listItemIcon},n.a.createElement("img",{alt:"Windows 95",src:Kt.a,width:"24px",height:"24px"})),n.a.createElement(Tt.a,null,"Retro Mode (beta)"))),"MAIN"===l&&j.push(n.a.createElement(xt.a,{key:"feature-divider"})),j.push(n.a.createElement(yt.a,{key:"about",onClick:D},n.a.createElement(St.a,{className:t.listItemIcon},n.a.createElement(Ut.a,{fontSize:"small"})),n.a.createElement(Tt.a,null,"About"))),j.push(n.a.createElement(yt.a,{key:"support",onClick:T},n.a.createElement(St.a,{className:t.listItemIcon},n.a.createElement(Xt.a,{fontSize:"small"})),n.a.createElement(Tt.a,null,n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://github.com/cybercase/webminidisc/wiki/Support-and-FAQ",target:"_blank",ref:u,onClick:T},"Support and FAQ")))),j.push(n.a.createElement(yt.a,{key:"github",onClick:S},n.a.createElement(St.a,{className:t.listItemIcon},n.a.createElement(Mt.a,{fontSize:"small"})),n.a.createElement(Tt.a,null,n.a.createElement(at.a,{rel:"noopener noreferrer",href:"https://github.com/cybercase/webminidisc",target:"_blank",ref:m,onClick:S},"Fork me on GitHub")))),o){const t={mainView:l,onClick:e.onClick,handleWipeDisc:k,handleRefresh:y,handleRenameDisc:x,handleExit:O,handleShowAbout:D,handleVintageMode:v};return n.a.createElement(qt,t)}return n.a.createElement(n.a.Fragment,null,n.a.createElement(kt.a,{"aria-label":"actions","aria-controls":"actions-menu","aria-haspopup":"true",onClick:f},n.a.createElement(Dt.a,null)),n.a.createElement(Ct.a,{id:"actions-menu",anchorEl:p,keepMounted:!0,open:h,onClose:w},j))};var ea=a(301),ta=a.n(ea);const aa=Object(Qe.a)(e=>({pairingMessage:{color:"red",marginTop:e.spacing(1)},windowContent:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}})),Aa=e=>{let{dispatch:t,pairingFailed:a,pairingMessage:A}=e;const l=aa();return n.a.createElement(n.a.Fragment,null,n.a.createElement(ct.w,{className:l.windowContent},n.a.createElement("p",{style:{paddingBottom:8}},"Press the button to connect to a NetMD device"),n.a.createElement(ct.c,{style:{minWidth:90},onClick:()=>t(He())},"Connect"),n.a.createElement("p",{style:{visibility:a?"visible":"hidden"},className:l.pairingMessage},A)),n.a.createElement(wt,null))};var na=a(302),la=a.n(na);const ia=Object(Qe.a)(e=>({main:{position:"relative",flex:"1 1 auto",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},button:{marginTop:e.spacing(3),minWidth:150},spacing:{marginTop:e.spacing(1)},chromeLogo:{marginTop:e.spacing(1),width:96,height:96},why:{alignSelf:"flex-start",marginTop:e.spacing(3)},headBox:{display:"flex",justifyContent:"space-between"},connectContainer:{flex:"1 1 auto",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},supportContainer:{flex:"1 1 auto",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}})),ra=e=>{const t=ia(),a=Object(r.d)(),{browserSupported:l,pairingFailed:i,pairingMessage:o,vintageMode:c}=b(e=>e.appState);o.toLowerCase().match(/denied/);const[s,d]=Object(A.useState)(!1);if(c){const e={dispatch:a,pairingFailed:i,pairingMessage:o};return n.a.createElement(Aa,e)}return n.a.createElement(n.a.Fragment,null,n.a.createElement(tt.a,{className:t.headBox},n.a.createElement($e.a,{component:"h1",variant:"h4"},"Web MiniDisc"),n.a.createElement(_t,null)),n.a.createElement($e.a,{component:"h2",variant:"body2"},"Brings NetMD Devices to the Web"),n.a.createElement(tt.a,{className:t.main},l?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:t.connectContainer},n.a.createElement($e.a,{component:"h2",variant:"subtitle1",align:"center",className:t.spacing},"Press the button to connect to a NetMD device"),n.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:()=>a(He()),className:t.button},"Connect"),n.a.createElement(_e.a,{error:!0,className:t.spacing,style:{visibility:i?"visible":"hidden"}},n.a.createElement(et.a,null,o))),n.a.createElement("div",null,n.a.createElement($e.a,{component:"h2",variant:"subtitle1",align:"center",className:t.spacing},n.a.createElement(at.a,{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/cybercase/webminidisc/wiki/Support-and-FAQ"},n.a.createElement("span",{style:{verticalAlign:"middle"}},"Support and FAQ")," ",n.a.createElement(la.a,{style:{verticalAlign:"middle"},fontSize:"inherit"}))))):n.a.createElement(n.a.Fragment,null,n.a.createElement($e.a,{component:"h2",variant:"subtitle1",align:"center",className:t.spacing},"This Web browser is not supported.\xa0",n.a.createElement(at.a,{rel:"noopener noreferrer",href:"#",onClick:e=>{e.preventDefault(),d(!0)}},"Learn Why")),n.a.createElement(at.a,{rel:"noopener noreferrer",target:"_blank",href:"https://www.google.com/chrome/"},n.a.createElement("img",{alt:"Chrome Logo",src:ta.a,className:t.chromeLogo})),n.a.createElement($e.a,{component:"h2",variant:"subtitle1",align:"center",className:t.spacing},"Try using"," ",n.a.createElement(at.a,{rel:"noopener noreferrer",target:"_blank",href:"https://www.google.com/chrome/"},"Chrome")," ","instead"),s?n.a.createElement(n.a.Fragment,null,n.a.createElement($e.a,{component:"p",variant:"body2",className:t.why},"Web MiniDisc requires a browser that supports both"," ",n.a.createElement(at.a,{rel:"noopener noreferrer",target:"_blank",href:"https://wicg.github.io/webusb/"},"WebUSB")," ","and"," ",n.a.createElement(at.a,{rel:"noopener noreferrer",target:"_blank",href:"https://webassembly.org/"},"WebAssembly"),"."),n.a.createElement("ul",null,n.a.createElement("li",null,"WebUSB is needed to control the NetMD device via the USB connection to your computer."),n.a.createElement("li",null,"WebAssembly is used to convert the music to a MiniDisc compatible format"))):null)),n.a.createElement(wt,null))};var oa=a(4),ca=a(167),sa=a(168),da=a(13),ma=a(200),ua=a(653),pa=a(163),ga=a.n(pa),ha=a(160),fa=a.n(ha),ba=a(316),Ea=a.n(ba),va=a(650),wa=a(652),ka=a(642),Ca=a(651),ya=a(641),xa=a(648),Oa=a(203),Da=a(304),Sa=a.n(Da),Ta=a(102),ja=a.n(Ta),Ia=a(103),Ba=a.n(Ia),Na=a(305),Ra=a.n(Na);const Pa=Object(Qe.a)(e=>({currentTrackRow:{color:e.palette.primary.main,"& > td":{color:"inherit"}},inGroupTrackRow:{"& > $indexCell":{transform:`translateX(${e.spacing(3)}px)`},"& > $titleCell":{transform:`translateX(${e.spacing(3)}px)`}},playButtonInTrackList:{display:"none"},trackRow:{"&:hover":{"& $playButtonInTrackList":{display:"inline-flex"},"& $trackIndex":{display:"none"}}},controlButtonInTrackCommon:{width:e.spacing(2),height:e.spacing(2),verticalAlign:"middle",marginLeft:e.spacing(-.5)},formatBadge:{...Oa.styles(e).badge,...Oa.styles(e).colorPrimary,position:"static",display:"inline-flex",border:`2px solid ${e.palette.background.paper}`,padding:"0 4px",verticalAlign:"middle",width:e.spacing(4.5),marginRight:e.spacing(.5)},durationCell:{whiteSpace:"nowrap"},durationCellSecondary:{whiteSpace:"nowrap",color:e.palette.text.secondary},durationCellTime:{verticalAlign:"middle"},titleCell:{overflow:"hidden",maxWidth:"40ch",textOverflow:"ellipsis"},deleteGroupButton:{display:"none"},indexCell:{whiteSpace:"nowrap",paddingRight:0,width:e.spacing(4)},trackIndex:{display:"inline-block",height:"16px",width:"16px"},dragHandle:{width:20,padding:`${e.spacing(.5)}px 0 0 0`},dragHandleEmpty:{width:20,padding:`${e.spacing(.5)}px 0 0 0`},groupFolderIcon:{},groupHeadRow:{"&:hover":{"& $deleteGroupButton":{display:"inline-flex"},"& $groupFolderIcon":{display:"none"}}}}));function Ma({track:e,inGroup:t,isSelected:a,draggableProvided:l,trackStatus:i,onSelect:r,onRename:o,onTogglePlayPause:c}){var s;const m=Pa(),u=Object(A.useCallback)(t=>o(t,e.index),[e.index,o]),p=Object(A.useCallback)(t=>r(t,e.index),[e.index,r]),g=Object(A.useCallback)(t=>{t.stopPropagation(),c(t,e.index)},[e.index,c]),h=Object(A.useCallback)(e=>e.stopPropagation(),[]),f="playing"===i||"paused"===i;return n.a.createElement(ya.a,Object.assign({},l.draggableProps,{ref:l.innerRef,hover:!0,selected:a,onDoubleClick:u,onClick:p,color:"inherit",className:Object(oa.default)(m.trackRow,{[m.inGroupTrackRow]:t,[m.currentTrackRow]:f})}),n.a.createElement(ka.a,Object.assign({className:m.dragHandle},l.dragHandleProps,{onClick:e=>e.stopPropagation()}),n.a.createElement(Sa.a,{fontSize:"small",color:"disabled"})),n.a.createElement(ka.a,{className:m.indexCell},n.a.createElement("span",{className:m.trackIndex},e.index+1),n.a.createElement(kt.a,{"aria-label":"delete",className:Object(oa.default)(m.controlButtonInTrackCommon,m.playButtonInTrackList),size:"small",onClick:g,onDoubleClick:h},"paused"===i||"none"===i?n.a.createElement(ja.a,{fontSize:"inherit"}):n.a.createElement(Ba.a,{fontSize:"inherit"}))),n.a.createElement(ka.a,{className:m.titleCell,title:null!==(s=e.title)&&void 0!==s?s:""},e.fullWidthTitle?`${e.fullWidthTitle} / `:"",e.title||"No Title"),n.a.createElement(ka.a,{align:"right",className:m.durationCell},n.a.createElement("span",{className:m.formatBadge},D[e.encoding]),n.a.createElement("span",{className:m.durationCellTime},Object(d.formatTimeFromFrames)(e.duration,!1))))}function Fa({group:e,onRename:t,onDelete:a}){const l=Pa(),i=Object(A.useCallback)(t=>a(t,e.index),[a,e]),r=Object(A.useCallback)(a=>t(a,e.index),[t,e]);return n.a.createElement(ya.a,{hover:!0,className:l.groupHeadRow,onDoubleClick:r},n.a.createElement(ka.a,{className:l.dragHandleEmpty}),n.a.createElement(ka.a,{className:l.indexCell},n.a.createElement(Ra.a,{className:Object(oa.default)(l.controlButtonInTrackCommon,l.groupFolderIcon)}),n.a.createElement(kt.a,{"aria-label":"delete",className:Object(oa.default)(l.controlButtonInTrackCommon,l.deleteGroupButton),size:"small",onClick:i},n.a.createElement(fa.a,{fontSize:"inherit"}))),n.a.createElement(ka.a,{className:l.titleCell,title:e.title},e.fullWidthTitle?`${e.fullWidthTitle} / `:"",e.title||"No Name"),n.a.createElement(ka.a,{align:"right",className:l.durationCellSecondary},n.a.createElement("span",{className:l.durationCellTime},Object(d.formatTimeFromFrames)(e.tracks.map(e=>e.duration).reduce((e,t)=>e+t),!1))))}var Qa=a(660);const Wa=e=>e.renameDialogVisible?n.a.createElement(dt,null,n.a.createElement(mt,null,n.a.createElement(ct.x,null,n.a.createElement("span",null,"Rename ",e.what)),n.a.createElement(ct.w,null,n.a.createElement("p",{style:{marginBottom:4}},e.what," Name:"),n.a.createElement(ct.s,{style:{marginBottom:16},value:e.renameDialogTitle,placeholder:"Type here...",onChange:e.handleChange,onKeyDown:t=>{"Enter"===t.key&&e.handleDoRename()},fullWidth:!0}),n.a.createElement(ut,null,n.a.createElement(gt,{onClick:e.handleDoRename},"OK"),n.a.createElement(gt,{onClick:e.handleCancelRename},"Cancel"))))):null,za=n.a.forwardRef((function(e,t){return n.a.createElement(ot.a,Object.assign({direction:"up",ref:t},e))})),La=Object(Qe.a)(e=>({marginUpDown:{marginTop:e.spacing(3),marginBottom:e.spacing(3)}})),Ua=e=>{let t=Object(r.d)(),a=La(),l=b(e=>e.renameDialog.visible),i=b(e=>e.renameDialog.title),o=b(e=>e.renameDialog.fullWidthTitle),c=b(e=>e.renameDialog.index),s=b(e=>e.renameDialog.groupIndex),d=b(e=>e.appState.fullWidthSupport);const m=null!==s?"Group":c<0?"Disc":"Track",u=Object(A.useCallback)(()=>{t(q.setVisible(!1))},[t]),p=Object(A.useCallback)(()=>{t(null!==s?function({groupIndex:e,newName:t,newFullWidthName:a}){return async function(A,n){var l;await(null===(l=L.netmdService)||void 0===l?void 0:l.renameGroup(e,t,a)),Je()(A)}}({newName:i,newFullWidthName:o,groupIndex:s}):c<0?function({newName:e,newFullWidthName:t}){return async function(a){const{netmdService:A}=L;await A.renameDisc(e.replace(/\/\//g," /"),null===t||void 0===t?void 0:t.replace(/\uff0f\uff0f/g,"\uff0f")),a(q.setVisible(!1)),Je()(a)}}({newName:i,newFullWidthName:o}):function({index:e,newName:t,newFullWidthName:a}){return async function(A){const{netmdService:n}=L;A(q.setVisible(!1));try{await n.renameTrack(e,t,a)}catch(l){console.error(l),A(Object(V.batchActions)([te.setVisible(!0),te.setErrorMessage("Rename failed.")]))}Je()(A)}}({index:c,newName:i,newFullWidthName:o})),u()},[t,u,o,s,c,i]),g=Object(A.useCallback)(e=>{t(q.setCurrentName(e.target.value.substring(0,120)))},[t]),h=Object(A.useCallback)(e=>{t(q.setCurrentFullWidthName(e.target.value.substring(0,105)))},[t]),f=Object(A.useCallback)(e=>{"Enter"===e.key&&(e.stopPropagation(),e.preventDefault(),p())},[p]),{vintageMode:E}=b(e=>e.appState);if(E){const e={renameDialogVisible:l,renameDialogTitle:i,renameDialogIndex:c,what:m,handleCancelRename:u,handleDoRename:p,handleChange:g};return n.a.createElement(Wa,e)}return n.a.createElement(At.a,{open:l,onClose:u,maxWidth:"sm",fullWidth:!0,TransitionComponent:za,"aria-labelledby":"rename-dialog-title"},n.a.createElement(rt.a,{id:"rename-dialog-title"},"Rename ",m),n.a.createElement(lt.a,null,n.a.createElement(Qa.a,{autoFocus:!0,id:"name",label:`${m} Name`,type:"text",fullWidth:!0,value:i,onKeyDown:f,onChange:g}),d&&n.a.createElement(Qa.a,{id:"fullWidthTitle",label:`Full-Width ${m} Name`,type:"text",fullWidth:!0,className:a.marginUpDown,value:o,onKeyDown:f,onChange:h})),n.a.createElement(nt.a,null,n.a.createElement(qe.a,{onClick:u},"Cancel"),n.a.createElement(qe.a,{color:"primary",onClick:p},"Rename")))};var Ga=a(645),Va=a(646),Ha=a(658);const Ja=e=>e.visible?n.a.createElement(dt,null,n.a.createElement(mt,null,n.a.createElement(ct.x,null,n.a.createElement("span",null,"Recording...")),n.a.createElement(pt,null,n.a.createElement("div",{style:{width:"100%"}},100===e.convertedValue&&e.trackConverting===e.trackTotal?"Conversion completed":`Converting ${e.trackConverting+1} of ${e.trackTotal}: ${e.titleConverting}`),n.a.createElement(ct.k,{value:Math.floor(e.convertedValue)}),n.a.createElement("div",{style:{width:"100%",marginTop:16}},"Uploading ",e.trackCurrent," of ",e.trackTotal,": ",e.titleCurrent),n.a.createElement(ct.k,{value:e.progressValue}),n.a.createElement(ut,null,e.hasNotificationSupport?n.a.createElement(ct.d,{name:"notifyOnEnd",label:"Notify when completed",checked:e.notifyWhenFinished,onChange:e.handleNotifyWhenFinishedChanged}):null,n.a.createElement("div",{style:{flex:"1 1 auto"}}),n.a.createElement(ct.c,{disabled:e.cancelled,onClick:e.handleCancelUpload},e.cancelled?"Stopping after current track...":"Cancel Recording"))))):null,Ya=Object(Qe.a)(e=>({progressPerc:{marginTop:e.spacing(1)},progressBar:{marginTop:e.spacing(3)},uploadLabel:{marginTop:e.spacing(3)},spacer:{flex:"1 1 auto"},checkBox:{marginLeft:0}})),Ka=n.a.forwardRef((function(e,t){return n.a.createElement(ot.a,Object.assign({direction:"up",ref:t},e))})),Za=e=>{const t=Ya(),a=Object(r.d)();let{visible:l,cancelled:i,writtenProgress:o,encryptedProgress:c,totalProgress:s,trackTotal:d,trackCurrent:m,trackConverting:u,titleCurrent:p,titleConverting:g}=b(e=>e.uploadDialog);const{vintageMode:h,notifyWhenFinished:f,hasNotificationSupport:E}=b(e=>e.appState),v=Object(A.useCallback)(()=>{a(Y.setCancelUpload(!0))},[a]),w=Object(A.useCallback)(()=>{a(Ye(!f))},[a,f]);let k=Math.floor(o/s*100),C=Math.floor(c/s*100),y=Math.floor(u/d*100);if(h){const e={visible:l,cancelled:i,writtenProgress:o,encryptedProgress:c,totalProgress:s,trackTotal:d,trackCurrent:m,trackConverting:u,titleCurrent:p,titleConverting:g,handleCancelUpload:v,progressValue:k,bufferValue:C,convertedValue:y,notifyWhenFinished:f,hasNotificationSupport:E,handleNotifyWhenFinishedChanged:w};return n.a.createElement(Ja,e)}return n.a.createElement(At.a,{open:l,maxWidth:"sm",fullWidth:!0,TransitionComponent:Ka,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},n.a.createElement(rt.a,{id:"alert-dialog-slide-title"},"Recording..."),n.a.createElement(lt.a,null,n.a.createElement(it.a,{id:"alert-dialog-slide-description"},100===y&&u===d?"Conversion completed":`Converting ${u+1} of ${d}: ${g}`),n.a.createElement(Ga.a,{className:t.progressBar,variant:0===y?"indeterminate":"determinate",color:"primary",value:y}),n.a.createElement(tt.a,{className:t.progressPerc},y,"%"),n.a.createElement(it.a,{id:"alert-dialog-slide-description",className:t.uploadLabel},"Uploading ",m," of ",d,": ",p),n.a.createElement(Ga.a,{className:t.progressBar,variant:"buffer",color:"secondary",value:k,valueBuffer:C}),n.a.createElement(tt.a,{className:t.progressPerc},k,"%")),n.a.createElement(nt.a,null,E?n.a.createElement(Va.a,{className:t.checkBox,disabled:!E,control:n.a.createElement(Ha.a,{checked:f,onChange:w,name:"notifyOnEnd"}),label:"Notify when completed"}):null,n.a.createElement("div",{className:t.spacer}),n.a.createElement(qe.a,{disabled:i,onClick:v},i?"Stopping after current track...":"Cancel Recording")))},Xa=e=>e.visible?n.a.createElement(dt,null,n.a.createElement(mt,null,n.a.createElement(ct.x,null,n.a.createElement("span",null,"Recording...")),n.a.createElement(pt,null,n.a.createElement("p",{style:{marginBottom:16,width:"100%"}},`Recording track ${e.trackDone+1} of ${e.trackTotal}: ${e.titleCurrent}`),n.a.createElement(ct.k,{value:e.progressValue,hideValue:e.progressValue<0})))):null,qa=Object(Qe.a)(e=>({progressPerc:{marginTop:e.spacing(1)},progressBar:{marginTop:e.spacing(3)}})),$a=n.a.forwardRef((function(e,t){return n.a.createElement(ot.a,Object.assign({direction:"up",ref:t},e))})),_a=e=>{const t=qa();let{visible:a,trackTotal:A,trackDone:l,trackCurrent:i,titleCurrent:r}=b(e=>e.recordDialog),o=Math.round(i);if(b(e=>e.appState.vintageMode)){const e={visible:a,trackTotal:A,trackDone:l,trackCurrent:i,titleCurrent:r,progressValue:o};return n.a.createElement(Xa,e)}return n.a.createElement(At.a,{open:a,maxWidth:"sm",fullWidth:!0,TransitionComponent:$a,"aria-labelledby":"record-dialog-slide-title","aria-describedby":"record-dialog-slide-description"},n.a.createElement(rt.a,{id:"record-dialog-slide-title"},"Recording..."),n.a.createElement(lt.a,null,n.a.createElement(it.a,{id:"record-dialog-slide-description"},`Recording track ${l+1} of ${A}: ${r}`),n.a.createElement(Ga.a,{className:t.progressBar,variant:i>=0?"determinate":"indeterminate",color:"primary",value:o}),n.a.createElement(tt.a,{className:t.progressPerc},o>=0?`${o}%`:"")),n.a.createElement(nt.a,null))},eA=n.a.forwardRef((function(e,t){return n.a.createElement(ot.a,Object.assign({direction:"up",ref:t},e))})),tA=e=>{const t=Object(r.d)();let{visible:a,error:l}=b(e=>e.errorDialog);const i=Object(A.useCallback)(()=>{t(te.setVisible(!1))},[t]);return n.a.createElement(At.a,{open:a,maxWidth:"sm",fullWidth:!0,TransitionComponent:eA,"aria-labelledby":"error-dialog-slide-title","aria-describedby":"error-dialog-slide-description"},n.a.createElement(rt.a,{id:"alert-dialog-slide-title"},"Error"),n.a.createElement(lt.a,null,n.a.createElement(it.a,{id:"alert-dialog-slide-description"},l)),n.a.createElement(nt.a,null,n.a.createElement(qe.a,{onClick:i},"Close")))},aA=n.a.forwardRef((function(e,t){return n.a.createElement(ot.a,Object.assign({direction:"up",ref:t},e))})),AA=e=>{const t=Object(r.d)();let{visible:a,dismissed:l}=b(e=>e.panicDialog);const i=Object(A.useCallback)(()=>{window.location.reload()},[]),o=Object(A.useCallback)(()=>{t(le.dismiss())},[t]);return n.a.createElement(At.a,{open:a&&!l,maxWidth:"sm",fullWidth:!0,scroll:"paper",TransitionComponent:aA,"aria-labelledby":"error-dialog-slide-title","aria-describedby":"error-dialog-slide-description"},n.a.createElement(rt.a,{id:"alert-dialog-slide-title"},"Oops\u2026 Something unexpected happened."),n.a.createElement(lt.a,null,n.a.createElement($e.a,{color:"textSecondary",variant:"body1",component:"div"},"Try to restart the app. If the error persists, try the followings:",n.a.createElement("ol",null,n.a.createElement("li",null,"Use your browser in incognito mode."),n.a.createElement("li",null,"Use a blank MiniDisc."),n.a.createElement("li",null,"Try to use Web MiniDisc on another computer.")),"If this does not solve the error, your unit might not be supported yet or you have encountered a bug. The full error is reported in the JS console.")),n.a.createElement(nt.a,null,n.a.createElement(qe.a,{onClick:o,size:"small"},"Ignore and Continue"),n.a.createElement(qe.a,{onClick:i,color:"primary"},"Restart the App")))};var nA=a(647),lA=a(664),iA=a(657),rA=a(643),oA=a(659),cA=a(649),sA=a(309),dA=a.n(sA),mA=a(310),uA=a.n(mA),pA=a(308),gA=a.n(pA),hA=a(636),fA=a(591),bA=a(656),EA=a(306),vA=a.n(EA),wA=a(307),kA=a.n(wA),CA=a(162),yA=a.n(CA);const xA=[{value:"filename",label:"Filename"},{value:"title",label:"Title"},{value:"album-title",label:"Album - Title"},{value:"artist-title",label:"Artist - Title"},{value:"title-artist",label:"Title - Artist"},{value:"artist-album-title",label:"Artist - Album - Title"}],OA=[{value:"SP",label:"SP"},{value:"LP2",label:"LP2"},{value:"LP4",label:"LP4"}],DA=e=>{const t=Object(A.useContext)(st.a),a=Object(A.useCallback)(()=>e.files.map((a,A)=>{const l=e.selectedTrackIndex===A,i=l?e.selectedTrackRef:null;return n.a.createElement(ht,{key:`${A}`,onClick:()=>e.setSelectedTrack(A),ref:i,style:l?t.selectedTableRow:{}},n.a.createElement(ct.o,null,a.name))}),[e,t]);return e.dialogVisible?n.a.createElement(dt,null,n.a.createElement(mt,null,n.a.createElement(ct.x,{style:{display:"flex",alignItems:"center"}},n.a.createElement("span",{style:{flex:"1 1 auto"}},"Upload Settings"),n.a.createElement(ct.c,{onClick:e.handleClose},n.a.createElement(ft,null))),n.a.createElement(pt,null,n.a.createElement("div",{style:{display:"flex",width:"100%"}},n.a.createElement(ct.f,{label:"Recording Mode",style:{display:"flex",flex:"1 1 auto"}},n.a.createElement(ct.l,{defaultValue:e.format,options:OA,width:90,onChange:(t,a)=>e.handleChangeFormat(t,a.value)})),n.a.createElement(ct.f,{label:"Track title",style:{flex:"1 1 auto",marginLeft:16}},n.a.createElement(ct.l,{defaultValue:e.titleFormat,options:xA,width:180,onChange:e.handleChangeTitleFormat}))),e.tracksOrderVisible?n.a.createElement("div",Object.assign({},e.getRootProps(),{style:{width:"100%",marginTop:16}}),n.a.createElement(ct.e,{style:{marginTop:16}}),n.a.createElement(ct.t,{style:{display:"flex"}},n.a.createElement(ct.c,{variant:"menu",onClick:e.open},"Add..."),n.a.createElement(ct.c,{variant:"menu",disabled:e.disableRemove,onClick:e.handleRemoveSelectedTrack},n.a.createElement("img",{alt:"delete",src:yA.a,style:{marginRight:4}}),"Remove"),n.a.createElement("div",{style:{flex:"1 1 auto"}}),n.a.createElement(ct.c,{variant:"menu",disabled:e.disableRemove,onClick:e.moveFileDown},n.a.createElement("img",{alt:"Move Down",src:kA.a})),n.a.createElement(ct.c,{variant:"menu",disabled:e.disableRemove,onClick:e.moveFileUp},n.a.createElement("img",{alt:"Move Up",src:vA.a}))),n.a.createElement("div",{style:{maxHeight:"30vh",overflow:"scroll"}},n.a.createElement(ct.m,null,n.a.createElement(ct.n,null,a()))),n.a.createElement("input",e.getInputProps())):null,n.a.createElement(ut,null,n.a.createElement(ct.c,{onClick:e.handleToggleTracksOrder},`${e.tracksOrderVisible?"Hide":"Edit"} Tracks`),n.a.createElement("div",{style:{flex:"1 1 auto"}}),n.a.createElement(gt,{onClick:e.handleConvert},"OK"),n.a.createElement(gt,{onClick:e.handleClose},"Cancel"))))):null},SA=n.a.forwardRef((function(e,t){return n.a.createElement(ot.a,Object.assign({direction:"up",ref:t},e))})),TA=Object(Qe.a)(e=>({container:{display:"flex",flexDirection:"row"},formControl:{minWidth:60},toggleButton:{minWidth:40},dialogContent:{display:"flex",flexDirection:"column",justifyContent:"stretch"},formatAndTitle:{display:"flex",flexWrap:"wrap",justifyContent:"space-between"},rightBlock:{display:"flex",flexDirection:"column"},titleFormControl:{minWidth:170,marginTop:4,[P(e)]:{width:114,minWidth:0}},spacer:{display:"flex",flex:"1 1 auto"},showTracksOrderBtn:{marginLeft:e.spacing(1)},tracksOrderAccordion:{"&:before":{opacity:0}},tracksOrderAccordionDetail:{maxHeight:"40vh",overflow:"auto"},toolbarHighlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(da.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},trackList:{flex:"1 1 auto"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})),jA=e=>{const t=Object(r.d)(),a=TA();let{visible:l,format:i,titleFormat:o}=b(e=>e.convertDialog);const[c,s]=Object(A.useState)(e.files),[d,m]=Object(A.useState)(-1),u=Object(A.useCallback)(e=>{const t=d+e;if(t>=c.length||t<0)return;const a=c.slice();let A=a[d];a[d]=a[t],a[t]=A,s(a),m(t)},[c,d]),p=Object(A.useCallback)(()=>{u(-1)},[u]),g=Object(A.useCallback)(()=>{u(1)},[u]),h=Object(A.useCallback)(()=>{t(se.setVisible(!1))},[t]),f=Object(A.useCallback)((e,a)=>{null!==a&&t(se.setFormat(a))},[t]),E=Object(A.useCallback)(e=>{t(se.setTitleFormat(e.target.value))},[t]),v=Object(A.useCallback)(()=>{h(),t(Xe(c,i,o))},[t,c,i,o,h]),[w,k]=Object(A.useState)(!1),C=Object(A.useCallback)(()=>{k(!w)},[w,k]);Object(A.useEffect)(()=>{const t=Array.from(e.files);s(t),m(-1),k(!1)},[e.files,m,k]);const y=Object(A.useRef)(null);Object(A.useEffect)(()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({block:"nearest",behavior:"smooth"})},[y,d]);const x=Object(A.useCallback)(()=>c.map((e,t)=>{const a=d===t,A=a?y:null;return n.a.createElement(fA.a,{key:`${t}`,disableGutters:!0,onClick:()=>m(t),ref:A,button:!0},n.a.createElement(St.a,null,n.a.createElement(bA.a,{checked:a,value:`track-${t}`,size:"small"})),n.a.createElement(Tt.a,{primary:e.name}))}),[c,d,m,y]),O=Object(A.useCallback)((e,t)=>{const a=c.slice().concat(e);s(a)},[c,s]),{getRootProps:D,getInputProps:S,isDragActive:T,open:j}=Object(ca.a)({onDrop:O,accept:["audio/*","video/mp4"],noClick:!0}),I=d<0||d>=c.length,B=Object(A.useCallback)(()=>{const e=c.filter((e,t)=>t!==d);s(e),d>=e.length&&m(e.length-1)},[d,c,s]),N=b(e=>e.convertDialog.visible);if(Object(A.useEffect)(()=>{N&&0===c.length&&h()},[c,N,h]),b(e=>e.appState.vintageMode)){const e={visible:l,format:i,titleFormat:o,files:c,setFiles:s,selectedTrackIndex:d,setSelectedTrack:m,moveFileUp:p,moveFileDown:g,handleClose:h,handleChangeFormat:f,handleChangeTitleFormat:E,handleConvert:v,tracksOrderVisible:w,setTracksOrderVisible:k,handleToggleTracksOrder:C,selectedTrackRef:y,getRootProps:D,getInputProps:S,isDragActive:T,open:j,disableRemove:I,handleRemoveSelectedTrack:B,dialogVisible:N};return n.a.createElement(DA,e)}return n.a.createElement(At.a,{open:l,maxWidth:"xs",fullWidth:!0,TransitionComponent:SA,"aria-labelledby":"convert-dialog-slide-title","aria-describedby":"convert-dialog-slide-description"},n.a.createElement(rt.a,{id:"convert-dialog-slide-title"},"Upload Settings"),n.a.createElement(lt.a,{className:a.dialogContent},n.a.createElement("div",{className:a.formatAndTitle},n.a.createElement(_e.a,null,n.a.createElement($e.a,{component:"label",variant:"caption",color:"textSecondary"},"Recording Mode"),n.a.createElement(lA.a,{value:i,exclusive:!0,onChange:f,size:"small"},n.a.createElement(nA.a,{className:a.toggleButton,value:"SP"},"SP"),n.a.createElement(nA.a,{className:a.toggleButton,value:"LP2"},"LP2"),n.a.createElement(nA.a,{className:a.toggleButton,value:"LP4"},"LP4"))),n.a.createElement("div",{className:a.rightBlock},n.a.createElement(_e.a,{className:a.formControl},n.a.createElement($e.a,{component:"label",variant:"caption",color:"textSecondary"},"Track title"),n.a.createElement(_e.a,{className:a.titleFormControl},n.a.createElement(iA.a,{value:o,color:"secondary",input:n.a.createElement(rA.a,null),onChange:E},n.a.createElement(yt.a,{value:"filename"},"Filename"),n.a.createElement(yt.a,{value:"title"},"Title"),n.a.createElement(yt.a,{value:"album-title"},"Album - Title"),n.a.createElement(yt.a,{value:"artist-title"},"Artist - Title"),n.a.createElement(yt.a,{value:"title-artist"},"Title - Artist"),n.a.createElement(yt.a,{value:"artist-album-title"},"Artist - Album - Title")))))),n.a.createElement(oA.a,{expanded:w,className:a.tracksOrderAccordion,square:!0},n.a.createElement("div",null),n.a.createElement("div",Object.assign({},D(),{style:{outline:"none"}}),n.a.createElement(xa.a,{variant:"dense",className:a.toolbarHighlight},n.a.createElement(kt.a,{edge:"start","aria-label":"add track",onClick:j},n.a.createElement(ga.a,null)),n.a.createElement(kt.a,{edge:"start","aria-label":"remove track",onClick:B,disabled:I},n.a.createElement(gA.a,null)),n.a.createElement("div",{className:a.spacer}),n.a.createElement(kt.a,{edge:"end","aria-label":"move up",onClick:g},n.a.createElement(dA.a,null)),n.a.createElement(kt.a,{edge:"end","aria-label":"move down",onClick:p},n.a.createElement(uA.a,null))),n.a.createElement(cA.a,{className:a.tracksOrderAccordionDetail},n.a.createElement(hA.a,{dense:!0,disablePadding:!1,className:a.trackList},x())),n.a.createElement(Me.a,{className:a.backdrop,open:T},"Drop your Music to add it to the queue"),n.a.createElement("input",S())))),n.a.createElement(nt.a,null,n.a.createElement(qe.a,{onClick:C,className:a.showTracksOrderBtn},`${w?"Hide":"Edit"} Tracks`),n.a.createElement("div",{className:a.spacer}),n.a.createElement(qe.a,{onClick:h},"Cancel"),n.a.createElement(qe.a,{onClick:v},"Ok")))};var IA=a(165),BA=a.n(IA),NA=a(166),RA=a.n(NA),PA=a(164),MA=a.n(PA);function FA(){return(FA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var A in a)Object.prototype.hasOwnProperty.call(a,A)&&(e[A]=a[A])}return e}).apply(this,arguments)}var QA=n.a.createElement("g",{fill:"#000",fillRule:"evenodd"},n.a.createElement("g",{fillRule:"nonzero"},n.a.createElement("path",{d:"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z"})),n.a.createElement("path",{d:"M53.259 20.337c6.582-5.574 6.582-5.574 14.753-12.436C62.599 6.72 56.322 6 49.946 6c-6.485 0-12.82.747-18.303 1.966 6.675 5.894 7.084 6.191 14.006 12.252 3.48-.293 3.97-.293 7.61.12zM36.927 24.504c.992-1.544 2.25-2.448 5.124-3.474-5.486-4.744-7.34-6.324-14.003-12.173-11.485 3.264-19.33 9.02-20.049 15.647h28.928zM61.159 24.504c14.02 0 20.615 0 30.732-.004-.789-6.629-8.72-12.468-20.269-15.706-2.061 1.766-11.14 9.316-14.827 12.484 1.793.813 3.226 1.35 4.364 3.226zM40.996 30.602c-2.045-.884-3.476-1.935-4.042-3.102-1.056 0-26.431 0-28.782.039C9.53 33.6 16.924 38.847 27.455 41.964c4.236-3.528 8.255-6.948 13.541-11.362zM49.946 45c6.284 0 12.247-.64 17.6-1.79-4.721-4.135-7.729-6.721-13.454-11.689-3.681.692-6.213.59-9.6.068-4.888 4.125-10.974 9.218-13.473 11.324C36.707 44.248 43.137 45 49.946 45zM57.47 30.45c4.38 3.707 9.262 8.068 13.687 11.884 11.265-3.066 19.178-8.5 20.57-14.83H61.18c-.667.999-1.516 1.917-3.71 2.946z"}));const WA=({svgRef:e,title:t,...a})=>n.a.createElement("svg",FA({width:98,height:52,viewBox:"0 0 98 52",ref:e},a),t?n.a.createElement("title",null,t):null,QA),zA=n.a.forwardRef((e,t)=>n.a.createElement(WA,FA({svgRef:t},e)));a.p;function LA(){return(LA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var A in a)Object.prototype.hasOwnProperty.call(a,A)&&(e[A]=a[A])}return e}).apply(this,arguments)}var UA=n.a.createElement("g",{fill:"#000",fillRule:"evenodd"},n.a.createElement("g",{fillRule:"nonzero"},n.a.createElement("path",{d:"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z"})),n.a.createElement("path",{d:"M36.927 24.504c.992-1.544 2.25-2.448 5.124-3.474-5.486-4.744-7.34-6.324-14.003-12.173-11.485 3.264-19.33 9.02-20.049 15.647h28.928zM57.47 30.45c4.38 3.707 9.262 8.068 13.687 11.884 11.265-3.066 19.178-8.5 20.57-14.83H61.18c-.667.999-1.516 1.917-3.71 2.946z"}));const GA=({svgRef:e,title:t,...a})=>n.a.createElement("svg",LA({width:98,height:52,viewBox:"0 0 98 52",ref:e},a),t?n.a.createElement("title",null,t):null,UA),VA=n.a.forwardRef((e,t)=>n.a.createElement(GA,LA({svgRef:t},e)));a.p;function HA(){return(HA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var A in a)Object.prototype.hasOwnProperty.call(a,A)&&(e[A]=a[A])}return e}).apply(this,arguments)}var JA=n.a.createElement("g",{fill:"#000",fillRule:"evenodd"},n.a.createElement("g",{fillRule:"nonzero"},n.a.createElement("path",{d:"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z"})),n.a.createElement("path",{d:"M53.259 20.337c6.582-5.574 6.582-5.574 14.753-12.436C62.599 6.72 56.322 6 49.946 6c-6.485 0-12.82.747-18.303 1.966 6.675 5.894 7.084 6.191 14.006 12.252 3.48-.293 3.97-.293 7.61.12zM49.946 45c6.284 0 12.247-.64 17.6-1.79-4.721-4.135-7.729-6.721-13.454-11.689-3.681.692-6.213.59-9.6.068-4.888 4.125-10.974 9.218-13.473 11.324C36.707 44.248 43.137 45 49.946 45z"}));const YA=({svgRef:e,title:t,...a})=>n.a.createElement("svg",HA({width:98,height:52,viewBox:"0 0 98 52",ref:e},a),t?n.a.createElement("title",null,t):null,JA),KA=n.a.forwardRef((e,t)=>n.a.createElement(YA,HA({svgRef:t},e)));a.p;function ZA(){return(ZA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var A in a)Object.prototype.hasOwnProperty.call(a,A)&&(e[A]=a[A])}return e}).apply(this,arguments)}var XA=n.a.createElement("g",{fill:"#000",fillRule:"evenodd"},n.a.createElement("g",{fillRule:"nonzero"},n.a.createElement("path",{d:"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z"})),n.a.createElement("path",{d:"M61.159 24.504c14.02 0 20.615 0 30.732-.004-.789-6.629-8.72-12.468-20.269-15.706-2.061 1.766-11.14 9.316-14.827 12.484 1.793.813 3.226 1.35 4.364 3.226zM40.996 30.602c-2.045-.884-3.476-1.935-4.042-3.102-1.056 0-26.431 0-28.782.039C9.53 33.6 16.924 38.847 27.455 41.964c4.236-3.528 8.255-6.948 13.541-11.362z"}));const qA=({svgRef:e,title:t,...a})=>n.a.createElement("svg",ZA({width:98,height:52,viewBox:"0 0 98 52",ref:e},a),t?n.a.createElement("title",null,t):null,XA),$A=n.a.forwardRef((e,t)=>n.a.createElement(qA,ZA({svgRef:t},e)));a.p;const _A=Object(Qe.a)(e=>({container:{display:"flex",flex:"1 1 auto",alignItems:"center",[P(e)]:{flexWrap:"wrap"}},lcd:{backgroundColor:"black !important",flex:"1 1 auto",margin:"0 80px 0 0px",minWidth:150,height:48,color:"white !important",fontFamily:"LCDDot"}})),en=e=>{const t=_A();return n.a.createElement("div",{className:t.container},n.a.createElement(ct.c,{onClick:e.handlePrev},n.a.createElement(MA.a,null)),n.a.createElement(ct.c,{onClick:e.handlePlay},n.a.createElement(ja.a,null)),n.a.createElement(ct.c,{onClick:e.handlePause},n.a.createElement(Ba.a,null)),n.a.createElement(ct.c,{onClick:e.handleStop},n.a.createElement(BA.a,null)),n.a.createElement(ct.c,{onClick:e.handleNext,style:{marginRight:16}},n.a.createElement(RA.a,null)),n.a.createElement(ct.j,{variant:"well",className:t.lcd},n.a.createElement("div",{className:e.classes.lcdText,style:{left:16,width:"calc(100% - 16px)"}},n.a.createElement("span",{className:e.lcdScroll?e.classes.scrollingStatusMessage:e.classes.statusMessage,ref:e.lcdRef,style:e.message&&e.lcdScroll>0?{animationDuration:`${e.lcdScrollDuration}s`,transform:`translate(-${e.lcdScroll}%)`,top:12}:{top:12}},e.message))))},tn=[zA,VA,KA,$A],an=Object(Qe.a)(e=>({"@keyframes scrollLeft":{from:{transform:"translateX(0%)"},to:{}},"@keyframes blink":{"50%":{visibility:"hidden"}},container:{display:"flex",flex:"1 1 auto",[P(e)]:{flexWrap:"wrap"}},lcd:{flex:"1 1 auto",position:"relative",marginLeft:e.spacing(1.5),marginRight:e.spacing(1.5),paddingLeft:e.spacing(3),paddingRight:e.spacing(3),borderRadius:e.spacing(3),backgroundColor:e.palette.background.default,minWidth:150,height:48,[P(e)]:{marginLeft:0,marginRight:e.spacing(2)}},lcdText:{overflow:"hidden",position:"relative",width:"calc(100% - 40px)",left:40,height:"100%",fontFamily:"LCDDot"},lcdDisc:{position:"absolute",top:0,left:20},lcdDiscIcon:{width:28,height:48,"& g":{fill:e.palette.action.active}},scrollingStatusMessage:{position:"absolute",width:"100%",whiteSpace:"nowrap",animationName:"$scrollLeft",animationTimingFunction:"linear",animationIterationCount:"1",top:15,left:1},statusMessage:{position:"absolute",width:"100%",whiteSpace:"nowrap",top:15,left:1},lcdBlink:{animationName:"$blink",animationTimingFunction:"step-end",animationDuration:"1s",animationIterationCount:"infinite"},button:{}})),An=()=>{var e,t,a;const l=Object(r.d)(),i=b(e=>e.main.deviceStatus),o=b(e=>e.main.disc),c=an(),s=Object(A.useCallback)(()=>{l(Ve("prev"))},[l]),d=Object(A.useCallback)(()=>{l(Ve("play"))},[l]),m=Object(A.useCallback)(()=>{l(Ve("stop"))},[l]),u=Object(A.useCallback)(()=>{l(Ve("next"))},[l]),p=Object(A.useCallback)(()=>{l(Ve("pause"))},[l]);let g="",h=null!==(e=null===i||void 0===i?void 0:i.track)&&void 0!==e?e:null,f=null!==(t=null===i||void 0===i?void 0:i.state)&&void 0!==t?t:null,E=null!==(a=null===i||void 0===i?void 0:i.discPresent)&&void 0!==a&&a,v="paused"===(null===i||void 0===i?void 0:i.state);const w=Object(A.useMemo)(()=>S(o),[o]);if(E){if("readingTOC"===f)g="READING TOC";else if(0===w.length)g="BLANKDISC";else if(i&&null!==i.track&&w[i.track]){let e=w[i.track].fullWidthTitle||w[i.track].title;g=(i.track+1).toString().padStart(3,"0")+(e?" - "+e:"")}}else g="";const[k,C]=Object(A.useState)(0),[y,x]=Object(A.useState)(0),[O,D]=Object(A.useState)(0),T=Object(A.useRef)(null),j=Object(A.useRef)(null);Object(A.useEffect)(()=>(clearTimeout(T.current),C(0),T.current=setTimeout(()=>{(()=>{var e,t,a;const A=j.current,n=null!==(e=null===A||void 0===A?void 0:A.scrollWidth)&&void 0!==e?e:0,l=null!==(t=null===A||void 0===A?void 0:null===(a=A.parentElement)||void 0===a?void 0:a.offsetWidth)&&void 0!==t?t:0,i=n>l?n/20:0;C(n>l?100*n/l:0),x(i),i>0&&(T.current=setTimeout(()=>{C(0)},1e3*i+500))})()},2e3),()=>{clearTimeout(T.current)}),[h,f,g]);const I=Object(A.useRef)(null);Object(A.useEffect)(()=>(clearInterval(I.current),"playing"===f||"readingTOC"===f?I.current=setInterval(()=>{D(1+O%(tn.length-1))},600):D(0),()=>{clearInterval(I.current)}),[f,O]);const B=tn[O];if(b(e=>e.appState.vintageMode)){const e={handlePrev:s,handlePlay:d,handleStop:m,handlePause:p,handleNext:u,message:g,discPresent:E,lcdScroll:k,lcdRef:j,lcdScrollDuration:y,classes:c};return n.a.createElement(en,e)}return n.a.createElement(tt.a,{className:c.container},n.a.createElement(kt.a,{"aria-label":"prev",onClick:s,className:c.button},n.a.createElement(MA.a,null)),n.a.createElement(kt.a,{"aria-label":"play",onClick:d,className:c.button},n.a.createElement(ja.a,null)),n.a.createElement(kt.a,{"aria-label":"pause",onClick:p,className:c.button},n.a.createElement(Ba.a,null)),n.a.createElement(kt.a,{"aria-label":"stop",onClick:m,className:c.button},n.a.createElement(BA.a,null)),n.a.createElement(kt.a,{"aria-label":"next",onClick:u,className:c.button},n.a.createElement(RA.a,null)),n.a.createElement("div",{className:c.lcd},n.a.createElement("div",{className:c.lcdText},n.a.createElement("span",{className:k?c.scrollingStatusMessage:c.statusMessage,ref:j,style:g&&k>0?{animationDuration:`${y}s`,transform:`translate(-${k}%)`}:{}},g)),n.a.createElement("div",{className:c.lcdDisc},E&&n.a.createElement(B,{className:Object(oa.default)(c.lcdDiscIcon,{[c.lcdBlink]:v})}))))},nn=e=>e.visible?n.a.createElement(dt,null,n.a.createElement(mt,null,n.a.createElement(ct.x,{style:{display:"flex",alignItems:"center"}},n.a.createElement("span",{style:{flex:"1 1 auto"}},"Record Selected Tracks"),n.a.createElement(ct.c,{onClick:e.handleClose},n.a.createElement(ft,null))),n.a.createElement(pt,null,n.a.createElement("div",{style:{width:"100%",display:"flex",alignItems:"flex-Start",flexDirection:"column"}},n.a.createElement("p",null,"1. Connect your MD Player line-out to your PC audio line-in."),n.a.createElement("p",null,"2. Use the controls at the bottom right to play some tracks."),n.a.createElement("p",null,"3. Select the input source. You should hear the tracks playing on your PC."),n.a.createElement("p",null,"4. Adjust the input gain and the line-out volume of your device."),n.a.createElement(ct.f,{label:"Input Source",style:{display:"flex",flex:"1 1 auto",margin:"32px 0"}},n.a.createElement(ct.l,{defaultValue:e.inputDeviceId||"",options:e.devices.concat([{deviceId:"",label:"None"}]).map(({deviceId:e,label:t})=>({value:e,label:t})),onChange:e.handleChange,width:200})),n.a.createElement(An,null)),n.a.createElement(ut,null,n.a.createElement("div",{style:{flex:"1 1 auto"}}),n.a.createElement(gt,{onClick:e.handleClose},"Cancel"),n.a.createElement(gt,{onClick:e.handleStartTransfer,disabled:""===e.inputDeviceId},"Start Record"))))):null,ln=n.a.forwardRef((function(e,t){return n.a.createElement(ot.a,Object.assign({direction:"up",ref:t},e))})),rn=Object(Qe.a)(e=>({container:{display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between",marginRight:-e.spacing(2),flexFlow:"wrap"},formControl:{minWidth:120},selectEmpty:{marginTop:e.spacing(2)},head:{textShadow:"0px 0px 12px rgba(150, 150, 150, 1)",fontSize:e.typography.h2.fontSize,textAlign:"center",marginBottom:e.spacing(2)}})),on=({trackIndexes:e})=>{const t=Object(r.d)(),a=rn(),[l,i]=Object(A.useState)([]),[o,c]=Object(A.useState)("");let{visible:s}=b(e=>e.dumpDialog);const m=Object(A.useCallback)(()=>{var e;c(""),null===(e=L.mediaRecorderService)||void 0===e||e.stopTestInput(),t(ge.setVisible(!1))},[t]),u=Object(A.useCallback)(e=>{var t,a;const A=e.target.value;c(A),null===(t=L.mediaRecorderService)||void 0===t||t.stopTestInput(),null===(a=L.mediaRecorderService)||void 0===a||a.playTestInput(A)},[c]),p=Object(A.useCallback)(()=>{var a,A;t((a=e,A=o,async function(e,t){e(Object(V.batchActions)([Ee.setVisible(!0),Ee.setProgress({trackTotal:a.length,trackDone:0,trackCurrent:0,titleCurrent:""})]));let n=t().main.disc,l=Object(d.getTracks)(n).filter(e=>a.indexOf(e.index)>=0);const{netmdService:i,mediaRecorderService:r}=L;await L.netmdService.stop();for(let[a,c]of l.entries()){var o;e(Ee.setProgress({trackTotal:l.length,trackDone:a,trackCurrent:-1,titleCurrent:null!==(o=c.title)&&void 0!==o?o:""})),await i.gotoTrack(c.index),await i.play(),console.log("Waiting for track to be ready to play");let t=await i.getPosition(),n=[c.index,0,0,1];for(;null===t||!n.every((e,a)=>n[a]===t[a]);)await h(250),t=await i.getPosition();await i.pause(),await(null===i||void 0===i?void 0:i.gotoTrack(c.index)),console.log("Track is ready to play"),await(null===r||void 0===r?void 0:r.initStream(A)),await(null===r||void 0===r?void 0:r.startRecording()),await i.play();let s=c.duration/512;await f(1e3*s,t=>{var A;e(Ee.setProgress({trackTotal:l.length,trackDone:a,trackCurrent:t,titleCurrent:null!==(A=c.title)&&void 0!==A?A:""}))}),await(null===r||void 0===r?void 0:r.stopRecording());const d=c.title||`Track ${c.index+1}`;null===r||void 0===r||r.downloadRecorded(`${d}`),await(null===r||void 0===r?void 0:r.closeStream())}await i.stop(),e(Ee.setVisible(!1))})),m()},[e,o,t,m]);if(Object(A.useEffect)(()=>{s&&async function(){await navigator.mediaDevices.getUserMedia({audio:!0});let e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind).map(e=>({deviceId:e.deviceId,label:e.label}));i(e)}()},[s,i]),b(e=>e.appState.vintageMode)){const e={handleClose:m,handleChange:u,handleStartTransfer:p,visible:s,devices:l,inputDeviceId:o};return n.a.createElement(nn,e)}return n.a.createElement(At.a,{open:s,maxWidth:"sm",fullWidth:!0,TransitionComponent:ln,"aria-labelledby":"dump-dialog-slide-title","aria-describedby":"dump-dialog-slide-description"},n.a.createElement(rt.a,{id:"dump-dialog-slide-title"},"Record Selected Tracks"),n.a.createElement(lt.a,null,n.a.createElement($e.a,{component:"p",variant:"h2",className:a.head},"\ud83d\udcbb \u2b05 \ud83d\udcbd"),n.a.createElement($e.a,{component:"p",variant:"body2"},"1. Connect your MD Player line-out to your PC audio line-in."),n.a.createElement($e.a,{component:"p",variant:"body2"},"2. Use the controls at the bottom right to play some tracks."),n.a.createElement($e.a,{component:"p",variant:"body2"},"3. Select the input source. You should hear the tracks playing on your PC."),n.a.createElement($e.a,{component:"p",variant:"body2"},"4. Adjust the input gain and the line-out volume of your device."),n.a.createElement(tt.a,{className:a.container},n.a.createElement(_e.a,{className:a.formControl},n.a.createElement(iA.a,{value:o,onChange:u,displayEmpty:!0,className:a.selectEmpty},n.a.createElement(yt.a,{value:"",disabled:!0},"Input Source"),l.map(e=>n.a.createElement(yt.a,{key:e.deviceId,value:e.deviceId},e.label))),n.a.createElement(et.a,null,"Input Source")),n.a.createElement(An,null))),n.a.createElement(nt.a,null,n.a.createElement(qe.a,{onClick:m},"Cancel"),n.a.createElement(qe.a,{onClick:p,disabled:""===o},"Start Record")))};var cn=a(311),sn=a.n(cn),dn=a(312),mn=a.n(dn),un=a(313),pn=a.n(un),gn=a(314),hn=a.n(gn),fn=a(315),bn=a.n(fn);const En=Object(Qe.a)(e=>({container:{width:"100%",flex:"1 1 auto",display:"flex",minHeight:0,"& > div":{display:"flex",flexDirection:"column",width:"100%"}},table:{height:"100%",width:"100%",display:"flex !important",flexDirection:"column"},windowContent:{flex:"1 1 auto",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:0},controlsContainer:{width:"100%",marginTop:16},toolbarIcon:{marginRight:4},toolbarItem:{padding:"6px 10px"}})),vn=e=>{var t,a,l;const i=En(),r=Object(A.useContext)(st.a),{mainView:o}=b(e=>e.appState);return n.a.createElement(n.a.Fragment,null,n.a.createElement(ct.e,null),n.a.createElement(ct.t,{style:{flexWrap:"wrap",position:"relative"}},0===e.selectedCount?n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{alt:"device",src:hn.a,style:{marginTop:-10,marginLeft:10}}),n.a.createElement("div",{className:i.toolbarItem},`${e.deviceName}: (`||"Loading...",(null===(t=e.disc)||void 0===t?void 0:t.fullWidthTitle)&&`${null===(a=e.disc)||void 0===a?void 0:a.fullWidthTitle} / `,(null===(l=e.disc)||void 0===l?void 0:l.title)||"Untitled Disc",")"),n.a.createElement(ct.b,{size:35}),n.a.createElement("img",{alt:"minidisc",src:bn.a,style:{width:32,marginLeft:10}}),null!==e.disc?n.a.createElement(ct.u,{text:`${Object(d.formatTimeFromFrames)(2*e.disc.left,!1)} in LP2 or ${Object(d.formatTimeFromFrames)(4*e.disc.left,!1)} in LP4`,enterDelay:100,leaveDelay:500},n.a.createElement("div",{className:i.toolbarItem},`${Object(d.formatTimeFromFrames)(e.disc.left,!1)} left of ${Object(d.formatTimeFromFrames)(e.disc.total,!1)} `)):null):null,e.selectedCount>0?n.a.createElement(n.a.Fragment,null,n.a.createElement(ct.c,{variant:"menu",disabled:1!==e.selectedCount,onClick:e.handleShowMoveMenu},n.a.createElement("img",{alt:"move",src:mn.a,className:i.toolbarIcon}),"Move"),n.a.createElement(ct.c,{variant:"menu",onClick:e.handleShowDumpDialog},n.a.createElement("img",{alt:"record",src:sn.a,className:i.toolbarIcon}),"Record"),n.a.createElement(ct.c,{variant:"menu",onClick:e.handleDeleteSelected},n.a.createElement("img",{alt:"delete",src:yA.a,className:i.toolbarIcon}),"Delete"),n.a.createElement(ct.c,{variant:"menu",onClick:e.handleRenameActionClick,disabled:e.selectedCount>1},n.a.createElement("img",{alt:"rename",src:pn.a,className:i.toolbarIcon}),"Rename"),e.moveMenuAnchorEl?n.a.createElement(ct.h,{style:{position:"absolute",left:16,top:32,zIndex:2}},Array(e.tracks.length).fill(null).map((t,a)=>n.a.createElement(ct.i,{key:`pos-${a}`,onClick:()=>e.handleMoveSelectedTrack(a)},a+1))):null):null,n.a.createElement(ct.b,{size:35})),n.a.createElement(ct.e,null),n.a.createElement(ct.w,{className:i.windowContent},n.a.createElement("div",Object.assign({className:i.container},e.getRootProps(),{style:{outline:"none"}}),n.a.createElement("input",e.getInputProps()),n.a.createElement(ct.m,{className:i.table},n.a.createElement(ct.p,null,n.a.createElement(ct.r,{head:!0,style:{display:"flex"}},n.a.createElement(ct.q,{style:{width:"2ch"}},"#"),n.a.createElement(ct.q,{style:{textAlign:"left",flex:"1 1 auto"}},"Title"),n.a.createElement(ct.q,{style:{textAlign:"right",width:"20%"}},"Duration"))),n.a.createElement(ct.n,null,e.tracks.map(t=>n.a.createElement(ht,{style:e.selected.includes(t.index)?r.selectedTableRow:{},key:t.index,onDoubleClick:a=>e.handleRenameTrack(a,t.index),onClick:a=>e.handleSelectTrackClick(a,t.index)},n.a.createElement(ct.o,{style:{textAlign:"center",width:"2ch"}},t.index+1),n.a.createElement(ct.o,{style:{width:"80%"}},n.a.createElement("div",null,t.fullWidthTitle&&`${t.fullWidthTitle} / `,t.title||"No Title")),n.a.createElement(ct.o,{style:{textAlign:"right",width:"20%"}},n.a.createElement("span",null,t.encoding),"\xa0",n.a.createElement("span",null,t.duration))))))),n.a.createElement("div",{className:i.controlsContainer},"MAIN"===o?n.a.createElement(An,null):null)),n.a.createElement(bt,{onClick:e.open}),n.a.createElement(Za,null),n.a.createElement(Ua,null),n.a.createElement(tA,null),n.a.createElement(jA,{files:e.uploadedFiles}),n.a.createElement(_a,null),n.a.createElement(on,{trackIndexes:e.selected}),n.a.createElement(wt,null),n.a.createElement(AA,null))},wn=Object(Qe.a)(e=>({add:{position:"absolute",bottom:e.spacing(3),right:e.spacing(3),[P(e)]:{bottom:e.spacing(2)}},main:{overflowY:"auto",flex:"1 1 auto",marginBottom:e.spacing(3),outline:"none",marginLeft:e.spacing(-1),marginRight:e.spacing(-1),[R(e)]:{marginLeft:e.spacing(-2),marginRight:e.spacing(-2)}},toolbar:{marginTop:e.spacing(3),marginLeft:e.spacing(-2),marginRight:e.spacing(-2),[e.breakpoints.up(600+2*e.spacing(2))]:{marginLeft:e.spacing(-3),marginRight:e.spacing(-3)}},toolbarLabel:{flex:"1 1 100%"},toolbarHighlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(da.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},headBox:{display:"flex",justifyContent:"space-between"},spacing:{marginTop:e.spacing(1)},indexCell:{whiteSpace:"nowrap",paddingRight:0,width:e.spacing(4)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},remainingTimeTooltip:{textDecoration:"underline",textDecorationStyle:"dotted"},hoveringOverGroup:{backgroundColor:`${Object(ma.alpha)(e.palette.secondary.dark,.4)}`},dragHandleEmpty:{width:20,padding:`${e.spacing(.5)}px 0 0 0`}}));function kn(e,t){return t&&e.index===t.track?"playing"===t.state?"playing":"paused"===t.state?"paused":"none":"none"}const Cn=e=>{let t=Object(r.d)();const a=b(e=>e.main.disc),l=b(e=>e.main.deviceName),i=b(e=>e.main.deviceStatus),{vintageMode:o}=b(e=>e.appState),[c,s]=n.a.useState([]),[m,u]=n.a.useState([]),[p,g]=Object(A.useState)(-1),[h,f]=n.a.useState(null),E=Object(A.useCallback)(e=>{f(e.currentTarget)},[f]),v=Object(A.useCallback)(()=>{f(null)},[f]),w=Object(A.useCallback)(e=>{t(function(e,t){return async function(a){const{netmdService:A}=L;await A.moveTrack(e,t),Je()(a)}}(c[0],e)),v()},[t,c,v]),k=Object(A.useCallback)((e,a)=>{if(!e.destination)return;let A=parseInt(e.source.droppableId),n=e.source.index,l=parseInt(e.destination.droppableId),i=e.destination.index;t(function(e,t,a,A){return async function(n,l){if(e===a&&t===A)return;n(xe.setLoading(!0));const i=T(await L.netmdService.listContent());let r,o,c,s,d,m,u=i[e].tracks.splice(t,1)[0];e<a?(o=e,s=t,c=a,d=A,m=-1):e>a?(o=a,s=A,c=e,d=t,m=1):t<A?(o=c=e,s=t,d=A,m=-1):(o=c=a,s=A,d=t,m=1);for(let e=o;e<=c;e++){let t=e===o?s:0,a=e===c?d:i[e].tracks.length;for(let A=t;A<a;A++)i[e].tracks[A].index+=m}if(0===a)r=A;else if(0===A){let e=i[a-1],t=2;for(;e&&0===e.tracks.length;)e=i[a-t++];if(e){r=e.tracks[e.tracks.length-1].index+1}else r=0}else r=i[a].tracks[0].index+A;u.index!==r&&await L.netmdService.moveTrack(u.index,r,!1),u.index=r,i[a].tracks.splice(A,0,u);let p=[],g=[];for(let e of i)0!==e.tracks.length&&(-1===e.index?p.push(...e.tracks):g.push(e));p.length&&g.unshift({index:0,title:null,fullWidthTitle:null,tracks:p}),await L.netmdService.rewriteGroups(g),Je()(n)}}(A,n,l,i))},[t]),C=Object(A.useCallback)(()=>{t(ge.setVisible(!0))},[t]);Object(A.useEffect)(()=>{t(Je())},[t]),Object(A.useEffect)(()=>{s([])},[a]);const y=Object(A.useCallback)((e,a)=>{u(e),t(se.setVisible(!0))},[t]),{getRootProps:x,getInputProps:O,isDragActive:D,open:j}=Object(ca.a)({onDrop:y,accept:["audio/*","video/mp4"],noClick:!0}),I=wn(),N=Object(A.useMemo)(()=>S(a),[a]),R=Object(A.useMemo)(()=>T(a),[a]),P=Object(A.useCallback)((e,t)=>{if(e.shiftKey&&c.length&&-1!==p){let e=Math.min(p+1,t),a=Math.max(p-1,t),A=[...c];for(let t=e;t<=a;t++){let e=A.indexOf(t);-1===e?A.push(t):A.splice(e,1)}A.includes(t)||A.push(t),s(A)}else c.includes(t)?s(c.filter(e=>e!==t)):s([...c,t]);g(t)},[c,s,p,g]),M=Object(A.useCallback)(e=>{c.length<N.length?s(N.map(e=>e.index)):s([])},[c,N]),F=Object(A.useCallback)((e,a)=>{let A=N.find(e=>e.index===a);A&&t(Object(V.batchActions)([q.setVisible(!0),q.setGroupIndex(null),q.setCurrentName(A.title),q.setCurrentFullWidthName(A.fullWidthTitle),q.setIndex(A.index)]))},[t,N]),Q=Object(A.useCallback)((e,a)=>{var A,n;let l=R.find(e=>e.index===a);l&&t(Object(V.batchActions)([q.setVisible(!0),q.setGroupIndex(a),q.setCurrentName(null!==(A=l.title)&&void 0!==A?A:""),q.setCurrentFullWidthName(null!==(n=l.fullWidthTitle)&&void 0!==n?n:""),q.setIndex(-1)]))},[t,R]),W=Object(A.useCallback)(e=>{1===e.detail&&F(e,c[0])},[F,c]),z=Object(A.useCallback)(e=>{var a;t((a=c,async function(e){if(!window.confirm(`Proceed with Delete Track${1!==a.length?"s":""}? This operation cannot be undone.`))return;const{netmdService:t}=L;e(xe.setLoading(!0)),await t.deleteTracks(a),Je()(e)}))},[t,c]),U=Object(A.useCallback)(e=>{var a;t((a=c,async function(e){let t=a[0],A=a[a.length-1]-t+1;const{netmdService:n}=L;n.addGroup(t,A,""),Je()(e)}))},[t,c]),G=Object(A.useCallback)((e,a)=>{t(function(e){return async function(t){const{netmdService:a}=L;a.deleteGroup(e),Je()(t)}}(a))},[t]),H=Object(A.useCallback)((e,a)=>{i&&(i.track!==a?(t(Ve("goto",a)),t(Ve("play"))):"playing"===i.state?t(Ve("pause")):t(Ve("play")))},[t,i]),J=Object(A.useMemo)(()=>N.filter(e=>null===e.group&&c.includes(e.index)).length===c.length&&B(c.sort((e,t)=>e-t)),[N,c]),Y=c.length;if(o){const e={disc:a,deviceName:l,selected:c,setSelected:s,selectedCount:Y,tracks:N,uploadedFiles:m,setUploadedFiles:u,onDrop:y,getRootProps:x,getInputProps:O,isDragActive:D,open:j,moveMenuAnchorEl:h,setMoveMenuAnchorEl:f,handleShowMoveMenu:E,handleCloseMoveMenu:v,handleMoveSelectedTrack:w,handleShowDumpDialog:C,handleDeleteSelected:z,handleRenameActionClick:W,handleRenameTrack:F,handleSelectAllClick:M,handleSelectTrackClick:P};return n.a.createElement(vn,e)}return n.a.createElement(n.a.Fragment,null,n.a.createElement(tt.a,{className:I.headBox},n.a.createElement($e.a,{component:"h1",variant:"h4"},l||"Loading..."),n.a.createElement(_t,null)),n.a.createElement($e.a,{component:"h2",variant:"body2"},null!==a?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",null,`${Object(d.formatTimeFromFrames)(a.left,!1)} left of ${Object(d.formatTimeFromFrames)(a.total,!1)} `),n.a.createElement(jt.a,{title:n.a.createElement(n.a.Fragment,null,n.a.createElement("span",null,`${Object(d.formatTimeFromFrames)(2*a.left,!1)} left in LP2 Mode`),n.a.createElement("br",null),n.a.createElement("span",null,`${Object(d.formatTimeFromFrames)(4*a.left,!1)} left in LP4 Mode`)),arrow:!0},n.a.createElement("span",{className:I.remainingTimeTooltip},"SP Mode"))):"Loading..."),n.a.createElement(xa.a,{className:Object(oa.default)(I.toolbar,{[I.toolbarHighlight]:Y>0})},Y>0?n.a.createElement(Ha.a,{indeterminate:Y>0&&Y<N.length,checked:Y>0,onChange:M,inputProps:{"aria-label":"select all tracks"}}):null,Y>0?n.a.createElement($e.a,{className:I.toolbarLabel,color:"inherit",variant:"subtitle1"},Y," selected"):n.a.createElement($e.a,{component:"h3",variant:"h6",className:I.toolbarLabel},(null===a||void 0===a?void 0:a.fullWidthTitle)&&`${a.fullWidthTitle} / `,(null===a||void 0===a?void 0:a.title)||"Untitled Disc"),Y>0?n.a.createElement(n.a.Fragment,null,n.a.createElement(jt.a,{title:"Record from MD"},n.a.createElement(qe.a,{"aria-label":"Record",onClick:C},"Record"))):null,Y>0?n.a.createElement(jt.a,{title:"Delete"},n.a.createElement(kt.a,{"aria-label":"delete",onClick:z},n.a.createElement(fa.a,null))):null,Y>0?n.a.createElement(jt.a,{title:J?"Group":""},n.a.createElement(kt.a,{"aria-label":"group",disabled:!J,onClick:U},n.a.createElement(Ea.a,null))):null,Y>0?n.a.createElement(jt.a,{title:"Rename"},n.a.createElement(kt.a,{"aria-label":"rename",disabled:1!==Y,onClick:W},n.a.createElement(Rt.a,null))):null),n.a.createElement(tt.a,Object.assign({className:I.main},x(),{id:"main"}),n.a.createElement("input",O()),n.a.createElement(va.a,{size:"small"},n.a.createElement(Ca.a,null,n.a.createElement(ya.a,null,n.a.createElement(ka.a,{className:I.dragHandleEmpty}),n.a.createElement(ka.a,{className:I.indexCell},"#"),n.a.createElement(ka.a,null,"Title"),n.a.createElement(ka.a,{align:"right"},"Duration"))),n.a.createElement(sa.a,{onDragEnd:k},n.a.createElement(wa.a,null,R.map((e,t)=>n.a.createElement(ya.a,{key:`${t}`},n.a.createElement(ka.a,{colSpan:4,style:{padding:"0"}},n.a.createElement(va.a,{size:"small"},n.a.createElement(sa.c,{droppableId:`${t}`,key:`${t}`},(t,a)=>n.a.createElement(wa.a,Object.assign({},t.droppableProps,{ref:t.innerRef,className:Object(oa.default)({[I.hoveringOverGroup]:a.isDraggingOver})}),null!==e.title&&n.a.createElement(Fa,{group:e,onRename:Q,onDelete:G}),null===e.title&&0===e.tracks.length&&n.a.createElement(ya.a,{style:{height:"1px"}}),e.tracks.map((t,a)=>n.a.createElement(sa.b,{draggableId:`${e.index}-${t.index}`,key:`t-${t.index}`,index:a},a=>n.a.createElement(Ma,{track:t,draggableProvided:a,inGroup:null!==e.title,isSelected:c.includes(t.index),trackStatus:kn(t,i),onSelect:P,onRename:F,onTogglePlayPause:H}))),t.placeholder))))))))),D?n.a.createElement(Me.a,{className:I.backdrop,open:D},"Drop your Music to Upload"):null),n.a.createElement(ua.a,{color:"primary","aria-label":"add",className:I.add,onClick:j},n.a.createElement(ga.a,null)),n.a.createElement(Za,null),n.a.createElement(Ua,null),n.a.createElement(tA,null),n.a.createElement(jA,{files:m}),n.a.createElement(_a,null),n.a.createElement(on,{trackIndexes:c}),n.a.createElement(wt,null),n.a.createElement(AA,null))};var yn=a(586),xn=a(317),On=a.n(xn),Dn=a(318),Sn=a.n(Dn);const Tn=st.c`
${ct.y}
body {
    font-family: 'ms_sans_serif';
}
img {
    image-rendering: pixelated;
}
`,jn=Object(Qe.a)(e=>({desktop:{width:"100%",height:"100%",backgroundColor:"teal",display:"flex",justifyContent:"center"},window:{display:"flex !important",flexDirection:"column",width:"auto",height:"100%",[R(e)]:{width:600,marginLeft:"auto",marginRight:"auto",height:600,marginTop:e.spacing(2)},[M(e)]:{width:700,height:700,marginTop:e.spacing(2)}},loading:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})),In=()=>{const e=jn(),t=Object(r.d)(),{mainView:a,loading:l}=b(e=>e.appState),[i,o]=Object(A.useState)(!1),c=Object(A.useCallback)(()=>{t(xe.setMainView("WELCOME"))},[t]),s=Object(A.useCallback)(()=>{o(!1)},[o]),d=Object(A.useCallback)(()=>{o(!i)},[i,o]),m=Object(A.useCallback)(()=>{window.open("https://github.com/cybercase/webminidisc/wiki/Support-and-FAQ","_blank")},[]),u=On.a,p={...u,selectedTableRow:{background:u.hoverBackground,color:u.canvasTextInvert}};return n.a.createElement("div",{className:e.desktop},n.a.createElement(Tn,null),n.a.createElement(st.b,{theme:p},n.a.createElement(ct.v,{className:e.window},n.a.createElement(ct.x,{style:{display:"flex",alignItems:"center"}},n.a.createElement("img",{alt:"CD Player",src:Sn.a}),n.a.createElement("span",{style:{flex:"1 1 auto",marginLeft:"4px"}},"Web MiniDisc"),"MAIN"===a?n.a.createElement(ct.c,{onClick:c},n.a.createElement(ft,null)):null),n.a.createElement(ct.t,null,n.a.createElement(ct.c,{variant:"menu",size:"sm",active:i,onClick:d},"File"),n.a.createElement(ct.c,{variant:"menu",size:"sm",onClick:m},"Help"),i?n.a.createElement(_t,{onClick:s}):null),n.a.createElement(n.a.Fragment,null,"WELCOME"===a?n.a.createElement(ra,null):null,"MAIN"===a?n.a.createElement(Cn,null):null),n.a.createElement(ct.j,{variant:"well"},"\xa0"," (c) ",n.a.createElement(ct.a,{rel:"noopener noreferrer",color:"inherit",target:"_blank",href:"https://stefano.brilli.me/"},"Stefano Brilli")," ",(new Date).getFullYear(),"."),l?n.a.createElement("div",{className:e.loading},n.a.createElement(ct.g,{size:32})):null)))},Bn=Object(Qe.a)(e=>({layout:{width:"auto",height:"100%",[R(e)]:{width:600,marginLeft:"auto",marginRight:"auto"},[M(e)]:{width:700}},paper:{position:"relative",display:"flex",flexDirection:"column",padding:e.spacing(2),height:"calc(100% - 20px)",[R(e)]:{marginTop:e.spacing(2),marginBottom:e.spacing(1),padding:e.spacing(3),height:600},[M(e)]:{height:700}},bottomBar:{display:"flex",alignItems:"center",[P(e)]:{flexWrap:"wrap"},marginLeft:-e.spacing(2)},copyrightTypography:{textAlign:"center"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},minidiscLogo:{width:48},controlsContainer:{flex:"0 0 auto",width:"100%",paddingRight:e.spacing(8),[P(e)]:{paddingLeft:0}}})),Nn=Object(We.a)({palette:{type:"dark",primary:{light:"#6ec6ff",main:"#2196f3",dark:"#0069c0",contrastText:"#fff"}}}),Rn=Object(We.a)({palette:{type:"light"}});var Pn=()=>{const e=Bn(),{mainView:t,loading:a,darkMode:A,vintageMode:l}=b(e=>e.appState);return l?n.a.createElement(In,null):n.a.createElement(n.a.Fragment,null,n.a.createElement(ze.a,{theme:A?Nn:Rn},n.a.createElement(Pe.a,null),n.a.createElement("main",{className:e.layout},n.a.createElement(yn.a,{className:e.paper},"WELCOME"===t?n.a.createElement(ra,null):null,"MAIN"===t?n.a.createElement(Cn,null):null,n.a.createElement(tt.a,{className:e.controlsContainer},"MAIN"===t?n.a.createElement(An,null):null)),n.a.createElement($e.a,{variant:"body2",color:"textSecondary",className:e.copyrightTypography},"\xa9 ",n.a.createElement(at.a,{rel:"noopener noreferrer",color:"inherit",target:"_blank",href:"https://stefano.brilli.me/"},"Stefano Brilli")," ",(new Date).getFullYear(),".")),a?n.a.createElement(Me.a,{className:e.backdrop,open:a},n.a.createElement(Fe.a,{color:"inherit"})):null))},Mn=(a(568),a(569),a(204));class Fn{constructor(e){this.worker=e,this.messageCallback=void 0,e.onmessage=this.handleMessage.bind(this)}async init(){await new Promise(e=>{this.messageCallback=e,this.worker.postMessage({action:"init"})})}async encode(e,t){return(await new Promise(a=>{this.messageCallback=a,this.worker.postMessage({action:"encode",bitrate:t,data:e},[e])})).data.result}terminate(){this.worker.terminate()}handleMessage(e){this.messageCallback(e),this.messageCallback=void 0}}if("undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){let e;onmessage=async t=>{const{action:a,...A}=t.data;if("init"===a)self.importScripts(E("atracdenc.js")),self.Module().then(t=>{e=t,self.postMessage({action:"init"}),e.setLogger&&e.setLogger((e,t)=>console.log(`${t}: ${e}`))});else if("encode"===a){const{bitrate:t,data:a}=A,n="inWavFile.wav",l="outAt3File.aea",i=new Uint8Array(a);e.FS.writeFile(`${n}`,i),e.callMain(["-e","atrac3","-i",n,"-o",l,"--bitrate",t]);let r=e.FS.stat(l).size,o=new Uint8Array(r-96),c=e.FS.open(l,"r");e.FS.read(c,o,0,o.length,96),e.FS.close(c);let s=o.buffer;self.postMessage({action:"encode",result:s},[s])}}}const Qn=a(584);var Wn,zn=a(319),Ln=a.n(zn);function Un(e,t=22050){const a=e*t*1*2+44,A=new ArrayBuffer(a),n=new DataView(A);let l=0;function i(e){n.setUint16(l,e,!0),l+=2}function r(e){n.setUint32(l,e,!0),l+=4}return r(1179011410),r(a-8),r(1163280727),r(544501094),r(16),i(1),i(1),r(t),r(1*t*2),i(2),i(16),r(1635017060),r(a-l-4),new Blob([A],{type:"audio/wav"})}if(L.netmdService=(null===(Wn=window.native)||void 0===Wn?void 0:Wn.interface)||new z({debug:!0}),L.audioExportService=new class{constructor(){this.ffmpegProcess=void 0,this.atracdencProcess=void 0,this.loglines=[],this.inFileName="",this.outFileNameNoExt="",this.inFile=void 0}async init(){Object(Mn.setLogging)(!0)}async prepare(e){this.inFile=e,this.loglines=[],this.ffmpegProcess=Object(Mn.createWorker)({logger:e=>{this.loglines.push(e),console.log(e.action,e.message)},corePath:E("ffmpeg-core.js"),workerPath:E("worker.min.js")}),await this.ffmpegProcess.load(),this.atracdencProcess=new Fn(new Qn),await this.atracdencProcess.init();let t=e.name.split(".").slice(-1);if(0===t.length)throw new Error(`Unrecognized file format: ${e.name}`);this.inFileName=`inAudioFile.${t[0]}`,this.outFileNameNoExt="outAudioFile",await this.ffmpegProcess.write(this.inFileName,e)}async info(){await this.ffmpegProcess.transcode(this.inFileName,`${this.outFileNameNoExt}.metadata`,"-f ffmetadata");let e=/Audio:\s(.*?),/,t=/Input #0,\s(.*?),/,a=null,A=null;for(let n of this.loglines){let l=n.message.match(e);if(null===l)if(l=n.message.match(t),null===l){if(null!==a&&null!==A)break}else A=l[1];else a=l[1]}return{format:a,input:A}}async export({requestedFormat:e}){let t,a;const A=await async function(e){const t=await e.arrayBuffer();if(t.byteLength<44)return null;const a=new Uint32Array(t.slice(0,12));if(1179011410!==a[0]||1163280727!==a[2])return null;if(544501094!==new Uint32Array(t.slice(12,20))[0])return!1;const A=new Uint16Array(t.slice(20,24));if(624!==A[0]||2!==A[1])return null;const n=new Uint32Array(t.slice(24,32));if(44100!==n[0])return null;const l=n[1];let i=null;if(i=l>16e3?"LP2":l>13e3?"LP105":l>8e3?"LP4":null,null===i)return null;let r=-1;const o=new Uint16Array(t.slice(36,38))[0]+38,c=o+8,s=new Uint32Array(t.slice(o,c));if(1635017060===s[0])r=c;else if(1952670054===s[0]){const e=8;r=c+s[1]+e}return-1===r?null:{mode:i,dataOffset:r}}(this.inFile);if(A)a=Ke[A.mode],t=(await this.inFile.arrayBuffer()).slice(A.dataOffset);else if("SP"===e){const e=`${this.outFileNameNoExt}.raw`;await this.ffmpegProcess.transcode(this.inFileName,e,"-ac 2 -ar 44100 -f s16be");let{data:A}=await this.ffmpegProcess.read(e);t=A.buffer,a=d.Wireformat.pcm}else{const A=`${this.outFileNameNoExt}.wav`;await this.ffmpegProcess.transcode(this.inFileName,A,"-f wav -ar 44100 -ac 2");let{data:n}=await this.ffmpegProcess.read(A),l="0";switch(e){case"LP2":l="128",a=d.Wireformat.lp2;break;case"LP105":l="102",a=d.Wireformat.l105kbps;break;case"LP4":l="64",a=d.Wireformat.lp4}t=await this.atracdencProcess.encode(n.buffer,l)}return this.ffmpegProcess.worker.terminate(),this.atracdencProcess.terminate(),{data:t,format:a}}},L.mediaRecorderService=new class{constructor(){this.recorder=void 0,this.stream=void 0,this.audioContext=void 0,this.analyserNode=void 0,this.gainNode=void 0}playTestInput(e){this.audioContext=new AudioContext,this.gainNode=this.audioContext.createGain(),this.analyserNode=this.audioContext.createAnalyser(),this.initStream(e).then(()=>{this.audioContext.createMediaStreamSource(this.stream).connect(this.gainNode),this.gainNode.connect(this.analyserNode),this.analyserNode.connect(this.audioContext.destination)})}stopTestInput(){var e;this.audioContext&&(null===(e=this.audioContext)||void 0===e||e.close(),delete this.audioContext,this.closeStream())}async initStream(e){const t={autoGainControl:!1,channelCount:2,deviceId:e,echoCancellation:!1,noiseSuppression:!1,sampleRate:{min:44100,max:44100,ideal:44100},highpassFilter:!1};try{this.stream=await navigator.mediaDevices.getUserMedia({audio:t})}catch(A){if(!(A instanceof OverconstrainedError&&"sampleRate"===A.constraint))throw A;console.log("Cannot obtain a sampleRate of 44100Hz. Falling back to default value..."),this.stream=await navigator.mediaDevices.getUserMedia({audio:{...t,sampleRate:void 0}})}const a=this.stream.getAudioTracks();a.length>0&&console.log("Record Setings:",a[0].getSettings())}async startRecording(){this.audioContext=new AudioContext;const e=this.audioContext.createMediaStreamSource(this.stream);this.recorder=new Ln.a(e,{workerPath:E("recorderWorker.js")}),this.recorder.record()}async stopRecording(){this.recorder.stop()}async closeStream(){var e;null===(e=this.stream)||void 0===e||e.getTracks().forEach(e=>e.stop())}downloadRecorded(e){this.recorder.exportWAV(t=>{let a=URL.createObjectURL(t),A=document.createElement("a");document.body.appendChild(A),A.style.display="none",A.href=a,A.download=`${C(e)}.wav`,A.click(),window.URL.revokeObjectURL(a),document.body.removeChild(A)})}},L.mediaSessionService=new class{constructor(e){this.initialized=!1,this.audioEl=void 0,this.dispatch=void 0,this.subscribe=void 0,this.getState=void 0,this.sortedTracks=[],this.sortedTracksDisc=null,this.dispatch=e.dispatch.bind(e),this.subscribe=e.subscribe.bind(e),this.getState=e.getState.bind(e)}async init(){var e;if(this.initialized||!navigator.mediaSession)return;this.initialized=!0;const t=document.createElement("audio");t.id="browser-media-session-helper",document.body.appendChild(t),t.setAttribute("loop","true"),t.src=URL.createObjectURL(Un(6)),t.volume=0,this.audioEl=t,navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("seekto",null),navigator.mediaSession.metadata=null,t.play(),await h(5e3),t.pause(),"playing"===(null===(e=this.getState().main.deviceStatus)||void 0===e?void 0:e.state)&&t.play(),console.log("MediaSession ready"),navigator.mediaSession.setActionHandler("previoustrack",()=>{this.dispatch(Ve("prev"))}),navigator.mediaSession.setActionHandler("nexttrack",()=>{this.dispatch(Ve("next"))}),navigator.mediaSession.setActionHandler("pause",()=>{t.pause(),this.dispatch(Ve("pause"))}),navigator.mediaSession.setActionHandler("play",()=>{t.play(),this.dispatch(Ve("play"))});const a=function(e,t=300){let a;return(...A)=>{clearTimeout(a),a=setTimeout(()=>{e(...A)},t)}}((e,a)=>{this.dispatch(Ve("seek",{time:e,trackNumber:a})),t.currentTime=e},100);navigator.mediaSession.setActionHandler("seekto",e=>{var t,A;const n=null!==(t=null===(A=this.getState().main.deviceStatus)||void 0===A?void 0:A.track)&&void 0!==t?t:-1;-1!==n&&null!==e.seekTime&&a(e.seekTime,n)}),this.subscribe(()=>{this.syncState()})}getSortedTracksWithCache(e){return e!==this.sortedTracksDisc&&(this.sortedTracks=S(e),this.sortedTracksDisc=e),this.sortedTracks}syncState(){var e,t,a,A;if(!this.initialized)return;const n=this.audioEl,{main:{deviceStatus:l,disc:i}}=this.getState(),r="playing"===(null===l||void 0===l?void 0:l.state),o=null===i||void 0===i?void 0:i.title,c=null!==(e=null===l||void 0===l?void 0:l.track)&&void 0!==e?e:-1,s=this.getSortedTracksWithCache(i)[c],d=s?s.fullWidthTitle||(null===s||void 0===s?void 0:s.title):"",m=Math.round(null!==(t=null===s||void 0===s?void 0:s.durationInSecs)&&void 0!==t?t:-1),u=null===(a=navigator.mediaSession.metadata)||void 0===a?void 0:a.title,p=null===(A=navigator.mediaSession.metadata)||void 0===A?void 0:A.album;var g;(r&&"playing"!==navigator.mediaSession.playbackState?navigator.mediaSession.playbackState="playing":r||"paused"===navigator.mediaSession.playbackState||(navigator.mediaSession.playbackState="paused"),u===d&&p===o||(navigator.mediaSession.metadata=new MediaMetadata({title:d,album:o,artwork:[{src:window.location.pathname+"MiniDisc192.png",sizes:"192x192",type:"image/png"},{src:window.location.pathname+"MiniDisc512.png",sizes:"512x512",type:"image/png"}]})),n&&n.duration!==m&&r)&&(URL.revokeObjectURL(null!==(g=n.src)&&void 0!==g?g:""),n.src=URL.createObjectURL(Un(Math.max(m,1))));r&&n.paused?n.play():r||n.paused||n.pause()}}(Ne),function(){let e;window.addEventListener("beforeunload",e=>{Ne.getState().uploadDialog.visible&&(e.preventDefault(),e.returnValue="Warning! Recording will be interrupted")}),navigator&&navigator.usb?navigator.usb.ondisconnect=function(){Ne.dispatch(xe.setMainView("WELCOME"))}:Ne.dispatch(xe.setBrowserSupported(!1)),"Notification"in window&&"denied"!==Notification.permission||(Ne.dispatch(xe.setNotificationSupport(!1)),Ne.dispatch(xe.setNotifyWhenFinished(!1))),window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),e=t})}(),function(){let e=null,t=!1;function a(e){var a;return!t&&"MAIN"===e.appState.mainView&&!1===e.appState.loading&&"playing"===(null===(a=e.main.deviceStatus)||void 0===a?void 0:a.state)&&!1===e.convertDialog.visible&&!1===e.uploadDialog.visible&&!1===e.recordDialog.visible&&!1===e.panicDialog.visible&&!1===e.errorDialog.visible&&!1===e.dumpDialog.visible}Ne.subscribe((function(){const A=Ne.getState();!0===a(A)&&null===e?e=setInterval(async()=>{try{const e=await L.netmdService.getDeviceStatus();Ne.dispatch(Te.setDeviceStatus(e))}catch(e){console.error(e),t=!0}},5e3):!1===a(A)&&null!==e&&(clearInterval(e),e=null)}))}(),i.a.render(n.a.createElement(r.a,{store:Ne},n.a.createElement(Pn,null)),document.getElementById("root")),"true"!==Object({NODE_ENV:"production",PUBLIC_URL:"/webminidisc"}).REACT_APP_NO_GA_RELEASE){!function(e){if("serviceWorker"in navigator){if(new URL("/webminidisc",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="/webminidisc/final-service-worker.js";o?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(a=>{const A=a.headers.get("content-type");404===a.status||null!=A&&-1===A.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):c(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):c(t,e)})}}();try{!function(){let e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="https://www.googletagmanager.com/gtag/js?id=UA-60498490-1",e.appendChild(t);let a=document.createElement("script");a.type="text/javascript",a.text="\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', 'UA-60498490-1');\n            ",e.appendChild(a)}()}catch(Gn){}}}},[[343,1,2]]]);
//# sourceMappingURL=main.36c253e8.chunk.js.map