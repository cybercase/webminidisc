{"version":3,"sources":["images/win95/delete.png","images/record-complete-notification-icon.png","images/win95/win95.png","images/chrome-icon.svg","images/win95/arrowup.png","images/win95/arrowdown.png","images/win95/mic.png","images/win95/move.png","images/win95/rename.png","images/win95/device.png","images/win95/minidisc32.png","images/win95/cdplayer.png","webpack:///./src/services/atracdenc-worker.ts?dc3c","serviceWorker.ts","utils.ts","services/netmd.ts","services/registry.ts","redux/upload-dialog-feature.ts","redux/rename-dialog-feature.ts","redux/error-dialog-feature.ts","redux/panic-dialog-feature.ts","redux/convert-dialog-feature.ts","redux/dump-dialog-feature.ts","redux/record-dialog-feature.ts","redux/app-feature.ts","redux/main-feature.ts","redux/store.ts","redux/actions.ts","components/win95/common.tsx","components/win95/about-dialog.tsx","components/about-dialog.tsx","components/win95/topmenu.tsx","components/topmenu.tsx","components/win95/welcome.tsx","components/welcome.tsx","components/main-rows.tsx","components/win95/rename-dialog.tsx","components/rename-dialog.tsx","components/win95/upload-dialog.tsx","components/upload-dialog.tsx","components/win95/record-dialog.tsx","components/record-dialog.tsx","components/error-dialog.tsx","components/panic-dialog.tsx","components/win95/convert-dialog.tsx","components/convert-dialog.tsx","images/md0.svg","images/md1.svg","images/md2.svg","images/md3.svg","components/win95/controls.tsx","components/controls.tsx","components/win95/dump-dialog.tsx","components/dump-dialog.tsx","components/win95/main.tsx","components/main.tsx","components/win95/app.tsx","components/app.tsx","services/atracdenc-worker.ts","services/audio-export.ts","create-empty-wave.ts","index.tsx","services/mediarecorder.ts","services/media-session.ts"],"names":["module","exports","Worker","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","console","log","state","controller","onUpdate","onSuccess","update","catch","error","sleep","ms","Promise","resolve","setTimeout","async","sleepWithProgressCallback","cb","elapsedSecs","interval","setInterval","Math","min","clearInterval","useShallowEqualSelector","selector","useSelector","shallowEqual","getPublicPathFor","script","savePreference","key","value","localStorage","setItem","JSON","stringify","loadPreference","defaultValue","res","getItem","parse","e","getAvailableCharsForTitle","disc","includeGroups","fixLength","len","ceil","groups","filter","n","title","fwTitle","fullWidthTitle","hwTitle","undefined","group","range","tracks","index","length","usedCells","getHalfWidthTitleLength","trk","getTracks","max","sanitizeTitle","normalize","replace","multiByteChars","split","map","reduce","a","b","sanitizeHalfWidthTitle","CharType","handakutenPossible","dakutenPossible","concat","dakutenFix","type","normal","char","sanitizeFullWidthTitle","reverse","dakuten","includes","push","String","fromCharCode","charCodeAt","handakuten","join","mappings","allowedHalfWidthKana","Object","values","newTitle","jconv","encode","justRemap","sjisEncoded","decode","EncodingName","Encoding","sp","lp2","lp4","getSortedTracks","track","encoding","duration","formatTimeFromFrames","durationInSecs","sort","l","r","getGroupedTracks","groupedList","ungroupedTracks","find","lastIndex","toCopy","splice","recomputeGroupsAfterTrackMove","trackIndex","targetIndex","offset","deleteMode","trackCount","boundsStart","boundsEnd","allTracks","groupBoundaries","name","fullWidthName","start","end","anyChanges","newDisc","slice","allGrouped","ungrouped","i","unshift","compileDiscTitles","availableCharactersForTitle","useFullWidth","newRawTitle","newRawFullWidthTitle","newRawTitleAfterGroup","newRawFullWidthTitleAfterGroup","halfWidthToFullWidthRange","titlesLengthInTOC","isSequential","numbers","last","num","asyncMutex","target","propertyKey","descriptor","oldValue","args","mutex","this","release","acquire","apply","forAnyDesktop","theme","breakpoints","up","spacing","belowDesktop","down","forWideDesktop","require","NetMDUSBService","constructor","debug","netmdInterface","logger","cachedContentList","Mutex","statusMonitorTimer","_fn","method","info","warn","child","titleObject","cacheTOC","setDiscTitle","syncTOC","dropCachedContentList","listContent","iface","openNewDevice","usb","openPairedDevice","listContentUsingCache","getDeviceStatus","netMd","getDeviceName","finalize","writeRawTitles","setTrackTitle","groupIndex","newName","newFullWidthName","thisGroup","g","groupBegin","groupLength","ungroupedLengthBeforeGroup","thisGroupTracks","Error","findIndex","oldName","getDiscTitle","oldFullWidthName","oldRawName","_getDiscTitle","oldRawFullWidthName","hasGroups","indexOf","hasFullWidthGroups","hasGroupsAndTitle","startsWith","hasFullWidthGroupsAndTitle","newFullWidthNameWithGroups","newNameWithGroups","indexes","content","eraseTrack","eraseDisc","src","dst","updateGroups","moveTrack","data","format","progressCallback","total","byteLength","written","encrypted","updateProgress","w","webWorkerAsyncPacketIterator","makeGetAsyncPacketIteratorOnWorkerThread","encryptedBytes","halfWidthTitle","mdTrack","MDTrack","download","writtenBytes","terminate","play","pause","stop","nextTrack","previousTrack","gotoTrack","h","m","s","f","gotoTime","getPosition","ServiceRegistry","createSlice","initialState","visible","cancelled","writtenProgress","encryptedProgress","totalProgress","trackTotal","trackConverting","trackCurrent","titleCurrent","titleConverting","reducers","setVisible","action","payload","setWriteProgress","setCancelUpload","setTrackProgress","current","converting","reducer","actions","enableBatching","setCurrentName","setCurrentFullWidthName","setIndex","setGroupIndex","setErrorMessage","dismissed","dismiss","titleFormat","setFormat","setTitleFormat","inputDeviceId","setInputDeviceId","trackDone","setProgress","buildInitialState","mainView","loading","pairingFailed","pairingMessage","browserSupported","darkMode","vintageMode","aboutDialogVisible","notifyWhenFinished","hasNotificationSupport","fullWidthSupport","setMainView","setLoading","setPairingFailed","setPairingMessage","setBrowserSupported","setDarkMode","setNotifyWhenFinished","setNotificationSupport","setVintageMode","showAboutDialog","setFullWidthSupport","deviceName","deviceStatus","setDisc","setDeviceName","setDeviceStatus","combineReducers","renameDialog","uploadDialog","errorDialog","panicDialog","convertDialog","dumpDialog","recordDialog","appState","main","resetStateAction","appActions","toString","store","configureStore","buildInitialAppState","middleware","next","panicDialogActions","getDefaultMiddleware","freeze","getState","control","params","dispatch","serviceRegistry","netmdService","prev","trackNumber","assertNumber","typedParams","timeArgs","timeInSecs","round","timeToSeekArgs","time","mainActions","pair","appStateActions","mediaSessionService","init","audioExportService","connect","err","batchActions","message","confirm","wipeDiscTitleInfo","Notification","permission","requestPermission","checkNotificationPromise","WireformatDict","SP","Wireformat","pcm","LP2","LP105","l105kbps","LP4","getTrackNameFromMediaTags","file","fileData","arrayBuffer","blob","Blob","Uint8Array","metadata","mm","common","artist","album","extStartIndex","lastIndexOf","substring","convertAndUpload","files","requestedFormat","uploadDialogActions","updateProgressCallback","hasUploadBeenCancelled","trackUpdate","updateTrack","availableCharacters","errorMessage","item","converted","convertNext","reject","prepare","export","j","conversionIterator","substr","upload","actionToDispatch","errorDialogAction","icon","NotificationCompleteIconUrl","onclick","focus","close","showFinishedNotificationIfNeeded","DialogOverlay","styled","div","DialogWindow","Window","DialogFooter","DialogWindowContent","WindowContent","FooterButton","Button","CustomTableRow","TableRow","canvasText","WindowCloseIcon","span","FloatingButton","button","W95AboutDialog","props","style","display","alignItems","flex","onClick","handleClose","rel","href","Transition","React","forwardRef","ref","Slide","direction","AboutDialog","useDispatch","p","Dialog","open","maxWidth","fullWidth","TransitionComponent","aria-labelledby","DialogTitle","id","DialogContent","DialogContentText","Link","DialogActions","W95TopMenu","items","handleRefresh","handleRenameDisc","handleWipeDisc","handleVintageMode","checked","variant","label","defaultChecked","handleExit","handleShowAbout","position","left","top","zIndex","useStyles","makeStyles","listItemIcon","minWidth","toolTippedText","textDecoration","textDecorationStyle","TopMenu","classes","discTitle","fullWidthDiscTitle","githubLinkRef","useRef","helpLinkRef","menuAnchorEl","setMenuAnchorEl","useState","menuOpen","handleMenuOpen","useCallback","event","currentTarget","handleDarkMode","handleMenuClose","wipeDisc","handleAllowFullWidth","renameDialogActions","handleGithubLink","stopPropagation","click","handleHelpLink","menuItems","MenuItem","ListItemIcon","className","fontSize","ListItemText","Divider","Tooltip","arrow","alt","Win95Icon","width","height","Fragment","IconButton","aria-label","aria-controls","aria-haspopup","Menu","anchorEl","keepMounted","onClose","color","marginTop","windowContent","flexDirection","justifyContent","W95Welcome","paddingBottom","visibility","chromeLogo","why","alignSelf","headBox","connectContainer","supportContainer","Welcome","toLowerCase","showWhyUnsupported","setWhyUnsupported","Box","Typography","component","align","FormControl","FormHelperText","verticalAlign","preventDefault","ChromeIconPath","currentTrackRow","palette","primary","inGroupTrackRow","transform","playButtonInTrackList","trackRow","controlButtonInTrackCommon","marginLeft","formatBadge","BadgeImpl","badge","colorPrimary","border","background","paper","padding","marginRight","durationCell","whiteSpace","durationCellSecondary","text","secondary","durationCellTime","titleCell","overflow","textOverflow","deleteGroupButton","indexCell","paddingRight","dragHandle","dragHandleEmpty","groupFolderIcon","groupHeadRow","TrackRow","inGroup","isSelected","draggableProvided","trackStatus","onSelect","onRename","onTogglePlayPause","handleRename","handleSelect","handlePlayPause","handleDoubleClickOnPlayButton","isPlayingOrPaused","draggableProps","innerRef","hover","selected","onDoubleClick","clsx","TableCell","dragHandleProps","size","GroupRow","onDelete","handleDelete","W95RenameDialog","renameDialogVisible","what","marginBottom","renameDialogTitle","placeholder","onChange","handleChange","onKeyDown","handleDoRename","handleCancelRename","marginUpDown","RenameDialog","renameDialogFullWidthTitle","renameDialogIndex","renameDialogGroupIndex","allowFullWidth","renameGroup","renameDisc","renameTrack","handleFullWidthChange","handleEnterKeyEvent","TextField","autoFocus","W95UploadDialog","convertedValue","floor","progressValue","handleNotifyWhenFinishedChanged","disabled","handleCancelUpload","progressPerc","progressBar","uploadLabel","spacer","checkBox","UploadDialog","bufferValue","aria-describedby","LinearProgress","valueBuffer","FormControlLabel","Checkbox","W95RecordDialog","hideValue","RecordDialog","ErrorDialog","errorDialogActions","PanicDialog","handleReloadApp","reload","handleIgnore","scroll","trackTitleOptions","recordModeOptions","W95ConvertDialog","themeContext","useContext","ThemeContext","renderTracks","selectedTrackIndex","selectedTrackRef","setSelectedTrack","selectedTableRow","dialogVisible","options","ev","handleChangeFormat","handleChangeTitleFormat","tracksOrderVisible","getRootProps","disableRemove","handleRemoveSelectedTrack","DeleteIconUrl","moveFileDown","ArrowDownIconUrl","moveFileUp","ArrowUpIconUrl","maxHeight","getInputProps","handleToggleTracksOrder","handleConvert","container","formControl","toggleButton","dialogContent","formatAndTitle","flexWrap","rightBlock","titleFormControl","showTracksOrderBtn","tracksOrderAccordion","opacity","tracksOrderAccordionDetail","toolbarHighlight","backgroundColor","lighten","light","dark","trackList","backdrop","drawer","ConvertDialog","setFiles","moveFile","newFileArray","tmp","convertDialogActions","newFormat","setTracksOrderVisible","useEffect","newFiles","Array","from","scrollIntoView","block","behavior","ListItem","disableGutters","Radio","onDrop","acceptedFiles","rejectedFiles","isDragActive","useDropzone","accept","noClick","ToggleButtonGroup","exclusive","ToggleButton","Select","input","Input","Accordion","expanded","square","outline","Toolbar","edge","AccordionDetails","List","dense","disablePadding","Backdrop","_extends","assign","arguments","source","prototype","hasOwnProperty","call","createElement","fill","fillRule","d","SvgMd0","svgRef","viewBox","ForwardRef","SvgMd1","SvgMd2","SvgMd3","lcd","margin","fontFamily","W95Controls","handlePrev","handlePlay","handlePause","handleStop","handleNext","lcdText","lcdScroll","scrollingStatusMessage","statusMessage","lcdRef","animationDuration","lcdScrollDuration","frames","MDIcon0","MDIcon1","MDIcon2","MDIcon3","to","paddingLeft","borderRadius","default","lcdDisc","lcdDiscIcon","active","animationName","animationTimingFunction","animationIterationCount","lcdBlink","Controls","deviceState","discPresent","paused","useMemo","padStart","setLcdScroll","setLcdScrollDuration","lcdIconFrame","setLcdIconFrame","scrollTimerRef","clearTimeout","domEl","textWidth","scrollWidth","lcdWidth","parentElement","offsetWidth","scrollDurationInSec","updateLCDScroll","lcdIconAnimationTimer","DiscFrame","W95DumpDialog","devices","deviceId","handleStartTransfer","flexFlow","selectEmpty","head","textShadow","typography","h2","textAlign","DumpDialog","trackIndexes","setDevices","mediaRecorderService","stopTestInput","dumpDialogActions","playTestInput","recordDialogAction","t","entries","expected","every","_","initStream","startRecording","durationInSec","perc","stopRecording","fileName","downloadRecorded","closeStream","mediaDevices","getUserMedia","audio","inputDevices","enumerateDevices","device","kind","updateDeviceList","displayEmpty","minHeight","table","controlsContainer","toolbarIcon","toolbarItem","W95Main","selectedCount","DeviceIconUrl","MDIconUrl","enterDelay","leaveDelay","handleShowMoveMenu","MoveIconUrl","handleShowDumpDialog","MicIconUrl","handleDeleteSelected","handleRenameActionClick","RenameIconUrl","moveMenuAnchorEl","handleMoveSelectedTrack","handleRenameTrack","handleSelectTrackClick","uploadedFiles","add","bottom","right","overflowY","toolbar","toolbarLabel","remainingTimeTooltip","hoveringOverGroup","alpha","getTrackStatus","Main","setSelected","setUploadedFiles","lastClicked","setLastClicked","setMoveMenuAnchorEl","handleCloseMoveMenu","destIndex","srcIndex","handleDrop","result","provided","destination","sourceList","parseInt","droppableId","sourceIndex","targetList","groupedTracks","newIndex","boundsStartList","boundsEndList","boundsStartIndex","boundsEndIndex","movedItem","startingIndex","endingIndex","prevList","normalGroups","rewriteGroups","dragDropTrack","shiftKey","rangeBegin","rangeEnd","copy","handleSelectAllClick","handleRenameGroup","detail","deleteTracks","handleGroupTracks","begin","addGroup","handleDeleteGroup","deleteGroup","handleTogglePlayPauseTrack","canGroup","indeterminate","inputProps","Table","TableHead","onDragEnd","TableBody","colSpan","snapshot","droppableProps","isDraggingOver","tidx","draggableId","Fab","GlobalStyles","createGlobalStyle","styleReset","desktop","W95App","isMenuOpen","setMenuOpen","closeMenu","toggleMenu","handleHelpClick","currentTheme","original","hoverBackground","canvasTextInvert","CDPlayerIconUrl","Date","getFullYear","layout","bottomBar","copyrightTypography","minidiscLogo","darkTheme","createTheme","contrastText","lightTheme","App","ThemeProvider","CssBaseline","Paper","CircularProgress","AtracdencProcess","worker","messageCallback","onmessage","handleMessage","bind","postMessage","bitrate","WorkerGlobalScope","self","Module","others","importScripts","setLogger","msg","stream","inWavFile","outAt3File","dataArray","FS","writeFile","callMain","stat","outAt3FileStream","read","buffer","AtracdencWorker","createEmptyWave","sampleRate","ArrayBuffer","view","DataView","pos","setUint16","setUint32","numOfChan","depthInBytes","native","interface","ffmpegProcess","atracdencProcess","loglines","inFileName","outFileNameNoExt","inFile","setLogging","createWorker","corePath","workerPath","load","ext","write","transcode","audioFormatRegex","inputFormatRegex","line","atrac3Info","riffDescriptor","Uint32Array","audioFormatAndChanneld","Uint16Array","sampleRateAndByteRate","byteRate","mode","dataOffset","nextBlockStartOffset","nextBlockEndOffset","nextBlock","dataBlockLength","getAtrac3Info","outFileName","recorder","audioContext","analyserNode","gainNode","AudioContext","createGain","createAnalyser","createMediaStreamSource","recordConstraints","autoGainControl","channelCount","echoCancellation","noiseSuppression","ideal","highpassFilter","OverconstrainedError","constraint","audioTracks","getAudioTracks","getSettings","Recorder","record","forEach","exportWAV","url","URL","createObjectURL","document","body","appendChild","revokeObjectURL","removeChild","appStore","initialized","audioEl","subscribe","sortedTracks","sortedTracksDisc","mediaSession","setAttribute","volume","setActionHandler","debouncedSeek","func","timeout","timer","debounce","currentTime","details","seekTime","syncState","getSortedTracksWithCache","isPlaying","currentDiscTitle","currentTrackIndex","currentTrack","currentTrackTitle","currentTrackDurationInSecs","oldTrackTitle","oldDiscTitle","playbackState","MediaMetadata","artwork","pathname","sizes","deferredPrompt","addEventListener","returnValue","ondisconnect","statusMonitorInterval","exceptionOccurred","shouldMonitorBeRunning","ReactDOM","render","getElementById","process","REACT_APP_NO_GA_RELEASE","origin","fetch","headers","response","contentType","get","status","ready","unregister","checkValidServiceWorker","getElementsByTagName","uascript","pvscript"],"mappings":"iFAAAA,EAAOC,QAAU,kP,oBCAjBD,EAAOC,QAAU,IAA0B,+D,kBCA3CD,EAAOC,QAAU,sjL,oBCAjBD,EAAOC,QAAU,IAA0B,yC,kBCA3CD,EAAOC,QAAU,8R,kBCAjBD,EAAOC,QAAU,8R,kBCAjBD,EAAOC,QAAU,0X,kBCAjBD,EAAOC,QAAU,8Q,kBCAjBD,EAAOC,QAAU,0V,kBCAjBD,EAAOC,QAAU,8Y,kBCAjBD,EAAOC,QAAU,k0Q,kBCAjBD,EAAOC,QAAU,06B,kPCAjBD,EAAOC,QAAU,WACf,OAAO,IAAIC,OAAO,IAA0B,oC,qFCW9C,MAAMC,EAAcC,QACa,cAA7BC,OAAOC,SAASC,UAEiB,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MAAM,2DAyCvC,SAASC,EAAgBC,EAAeC,GACpCC,UAAUC,cACLC,SAASJ,GACTK,KAAKC,IACFA,EAAaC,cAAgB,KACzB,MAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,KAC7BC,QAAQC,IAAI,eAAgBJ,EAAiBK,OACd,cAA3BL,EAAiBK,QACbX,UAAUC,cAAcW,YAIxBH,QAAQC,IACJ,iHAKAX,GAAUA,EAAOc,UACjBd,EAAOc,SAAST,KAMpBK,QAAQC,IAAI,sCAGRX,GAAUA,EAAOe,WACjBf,EAAOe,UAAUV,QAMrCA,EAAaW,WAEhBC,MAAMC,IACHR,QAAQQ,MAAM,4CAA6CA,K,uDC5FhE,SAASC,EAAMC,GAClB,OAAO,IAAIC,QAAQC,IACfC,WAAWD,EAASF,KAerBI,eAAeC,EAA0BL,EAAYM,GACxD,IAAIC,EAAc,EACdC,EAAWC,YAAY,KACvBF,IACAD,EAAGI,KAAKC,IAAI,IAAqB,IAAdJ,EAAsBP,EAAM,OAChD,WACGD,EAAMC,GACZ1B,OAAOsC,cAAcJ,GAGlB,SAASK,EAAiEC,GAC7E,OAAOC,YAAYD,EAAUE,KAO1B,SAASC,EAAiBC,GAC7B,MAAQ,gBAA4BA,IAGjC,SAASC,EAAeC,EAAaC,GACxCC,aAAaC,QAAQH,EAAKI,KAAKC,UAAUJ,IAGtC,SAASK,EAAkBN,EAAaO,GAC3C,IAAIC,EAAMN,aAAaO,QAAQT,GAC/B,GAAY,OAARQ,EACA,OAAOD,EAEP,IACI,OAAOH,KAAKM,MAAMF,GACpB,MAAOG,GACL,OAAOJ,GAKZ,SAASK,EAA0BC,EAAYC,GAClD,MAEMC,EAAaC,GAAgB1B,KAAK2B,KAAKD,EAAM,GAEnD,IAAIE,EAASL,EAAKK,OAAOC,OAAOC,GAAiB,OAAZA,EAAEC,OAGnCC,EAAUT,EAAKU,eAAkB,OACjCC,EAAUX,EAAKQ,MAAS,OAC5B,GAAIP,QAAmCW,IAAlBX,EACjB,IAAK,IAAIY,KAASR,EAAQ,CACtB,IAAIS,EAAS,GAAED,EAAME,OAAO,GAAGC,MAAQ,IAAIH,EAAME,OAAOE,OAAS,IAAM,GAClE,IAAGJ,EAAME,OAAOF,EAAME,OAAOE,OAAS,GAAGD,MAAQ,QAEtDP,GAAWI,EAAMH,eAAiBI,EAClCH,GAAWE,EAAML,MAAQM,EAGjC,IAAII,EAAY,EAChBA,GAAahB,EAA2B,EAAjBO,EAAQQ,QAC/BC,GAAahB,EAAUiB,EAAwBR,IAC/C,IAAK,IAAIS,KAAOC,oBAAUrB,GAAO,CAAC,IAAD,MAC7BkB,GAAahB,EAA8C,GAApC,oBAACkB,EAAIV,sBAAL,aAAC,EAAoBO,cAArB,QAA+B,IACtDC,GAAahB,EAAUiB,EAAuB,UAACC,EAAIZ,aAAL,QAAc,KAEhE,OAA4C,EAArC/B,KAAK6C,IAzBM,IAyBUJ,EAAW,GAqBpC,SAASK,EAAcf,GAC1B,OAAOA,EAAMgB,UAAU,OAAOC,QAAQ,gBAAiB,IAGpD,SAASN,EAAwBX,GAIpC,MAAMkB,EAA4C,CAAE,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,EAAG,SAAK,GACjkB,OACIlB,EAAMS,OACNT,EACKmB,MAAM,IACNC,IAAIrB,IAAC,uBAAImB,EAAenB,UAAnB,QAAyB,IAC9BsB,OAAO,CAACC,EAAGC,IAAMD,EAAIC,EAAG,GAI9B,SAASC,EAAuBxB,GAAgB,IAC9CyB,GAD6C,SAC7CA,OAD6C,mBAC7CA,IAD6C,qBAC7CA,IAD6C,4BAC7CA,MAD6C,KAOlD,MAAMC,EAAqB,+DAAaP,MAAM,IACxCQ,EAAkB,uLAAiCR,MAAM,IAAIS,OAAOF,GAG1E,IAAIG,EAAa,GACbC,EAAOL,EAASM,OACpB,IAAK,MAAMC,KAAQC,EAAuBjC,GAAO,GAC5CmB,MAAM,IACNe,UAED,OAAQJ,GACJ,KAAKL,EAASU,QACV,GAAIR,EAAgBS,SAASJ,GAAO,CAChCH,EAAWQ,KAAKC,OAAOC,aAAaP,EAAKQ,WAAW,GAAK,IACzDV,EAAOL,EAASM,OAChB,MAER,KAAKN,EAASgB,WACV,GAAIf,EAAmBU,SAASJ,GAAO,CACnCH,EAAWQ,KAAKC,OAAOC,aAAaP,EAAKQ,WAAW,GAAK,IACzDV,EAAOL,EAASM,OAChB,MAER,KAAKN,EAASM,OACV,OAAQC,GACJ,IAAK,SACL,IAAK,SACL,IAAK,SACDF,EAAOL,EAASU,QAChB,MACJ,IAAK,SACL,IAAK,SACL,IAAK,SACDL,EAAOL,EAASgB,WAChB,MACJ,QACIX,EAAOL,EAASM,OAChBF,EAAWQ,KAAKL,IAOpChC,EAAQ6B,EAAWK,UAAUQ,KAAK,IAElC,MAAMC,EAAsC,CAAE,SAAK,IAAK,SAAK,IAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,IAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,KAAM,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAU,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,UACzzFC,EAAiCC,OAAOC,OAAOH,GAE/CI,EAAW/C,EACZmB,MAAM,IACNC,IAAIrB,GACG4C,EAAS5C,GAAW4C,EAAS5C,GAC7BA,EAAEyC,WAAW,GAAK,KAAQI,EAAqBR,SAASrC,GAAWA,EAChE,KAEV2C,KAAK,IAGV,OADoBM,IAAMC,OAAOF,EAAU,QAC3BtC,SAAWE,EAAwBX,GAAee,EAAcf,GACzE+C,EAGJ,SAASd,EAAuBjC,EAAekD,GAAqB,GAEvE,MAAMP,EAAsC,CAAE,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,EAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,IAAK,SAAK,KAAM,SAAK,IAAK,SAAK,IAAK,SAAK,EAAK,SAAK,IAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAK,IAAK,SAAU,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,EAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,eAAM,SAAK,eAAM,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,SAA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","file":"static/js/main.fef20cb7.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAaElEQVR4Ac3BQQrCQAAEsIz///MobGG7bZUiHkz8laKoe+olplrFtRriJVa1ilUNsYlrNcVQQ+zEe3UWB/FZTXEh3quzOIhrNcVQQ+zEWU2xqiE2D6ua4iwOHqa6J6hNTDXFl+q++oUnXWYXCDnmtMUAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/record-complete-notification-icon.f6ae1070.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAAEEfUpiAAAACXBIWXMAAAsSAAALEgHS3X78AAAQR0lEQVRYCQE8EMPvAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAP8AAAAAAP8AAAIAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA//8AAAAB/wAAAgAAAAAAAAAAAQD/AP8AAAAAAAAAAAAAAP8AAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAAAAEAAAAAAAAAAP8AAP8AAAAAAQAAAP8AAAAB/wAAAAAAAAEAAAAAAAAAAAAA//8AAAAAAAABAAAA/wD//wEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAQIAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAA/wAAAAAA/wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAQD/AAAAAAD/AAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAP8AAAABAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAQAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAA/wAAAAEAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAABAP//AAAAAAAAAAAAAAEBAAABAAAAAAAAAAAAAAAAAAAA/wAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAP8AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAABAAAAAAAAAP8AAAABAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQL/AAD/AAAAAQAAAP8AAAAAAAAA/wAAAP8AAAAAAAAAAP8AAAD/AAAA/wAAAAAAAAAA/wAAAP8AAAAAAAAAAAAAAgEAAAH/AAD/AAAAAQAAAAAAAAABAAAAAf8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAA/wEAAAH/AAD/AAAAAP8AAP//AAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA/wAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAgAA//8AAAABAAAA/wAAAAAAAAD/AAAA/wAAAAAAAAAAAAD/AAAA/wAAAP8AAAAAAP//AAD//wAAAAAAAAAAAAACAAABAQAA//8AAAABAAAAAAAAAAEAAAABAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAD/AAABAQAA//8AAAAAAAD//wAA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAD/AAAAAQAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAAAAAAAAAD/AAAAAQAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAD/AAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAEAAAAA/wAA/wEAAAEAAAAAAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAQAAAP8AAAAAAAAAAAAAAAEAAAD/AAAAAAAAAACAAAAAAAAAAH8AAAAAAAAAAQAAAAAAAAAA/wAAAAAAAACBAAAAAAAAAIAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAD/AAD/AQAAAQAAAAAAAAAAAAAAAAAAAP8AAAABAAAAAAAAAP8AAAABAAAAAAAAAAAAAAD/AAAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAQIAAAAAAAAA/wAAAAABAAABAAAAAP8AAP//AAD/AAAAAAAAAAH/AAD/AAAAAP8AAAD/AAD//wAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAD/AAAAAQEAAAEAAAAAAAAAAP8AAP8BAAABAAAAAAAAAAABAAABAAAAAAAAAAAAAAAAAAAAAAAAAACBAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAACAAAAAAAAAAH8AAAAAAAAAAAAAAAAAAAQAAAAAAAD//wAAAQEAAAABAAAAAAAAAP8AAAAAAAAAAQEAAAEAAAD/AAAAAQEAAAAAAAD/AAAAAAAAAAEAAAAAAAAAAAEAAAAAAIAAAAAAAAAAfwAAAAAAAAABAAAAAAD//wAAAAAAAIGBAAAAAAAAgAEAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAP//AAABAQAAAAAAAAAAAAAAAAAAAP8AAAABAAAAAAAAAP8AAAABAAAAAAAAAAAAAAD/AAAAAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAD//wAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAAAAAAAAQIAAAAAAAAA/wAAAAAAAAEBAAAAAAAA//8AAP//AAAAAAAAAAEAAP//AAAAAAAA/wAAAP//AAD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAD/AAAAAQAAAQEAAAAAAAAAAAAA//8AAAEBAAAAAAAAAAAAAAEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIEAAAAAAAAAgAAAAAAAAAAAAAAAAAABAQAAAAAAAICAAAAAAAAAf38AAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAQAAAP8AAAAAAAAAAAAAAAEAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAO4NtYBuc2+1AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/chrome-icon.f3b6c54c.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAiUlEQVR4Ae3BSQ7CUAxEwde+/50bFkgQyGD/DBZSqrjtZMDsIMaZKTFAjDHzRJGoM+tEgagxOSJJ5JkakSByzBixQWwz+4gVYp05hlgglpljiRlinjmH+CJ+mXOJD2LKXEO8iDdzLfEUNBN5pk5sCJoFzYJmQbOgWdAsaBY0C5oFzUSNyRO3f/AAz+gRJE12Ia8AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAiElEQVR4Ae3BSQ7CQBAEwcz+/58LDkhsxp4xSwtBBD9P5oRxMkDGhXmyoWhWNCuaFc2KZkWzolnRrGhWNJOz8FlyVDSTa+Ez5ETuhfeSC7IsvIfckMfCa8kCWRdeQx6QbeE5skLGhH1kg4wLc2SAzAljZJDMC+tkguwTlskk2S9ckwYBwt83OwASZhEklsYbbQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAzUlEQVR4AY3BgXHCMBAAwXuHQugEdfanzkRlH3nGgMfjEO8GF6nFjhpMCxeoxZSZrFprTMW0cFFm0nsnU8YYvNy4QGWVKRGgvC38R4uptUYEqKi8BN9okQm9g3IQTMFftMiECHaCg4UzWmRCBCib4MTCkRaZEAEKmXwT7GmRCb2D8laFvfOiBptgo1ZrjTYGKFPwUROriGAKNjd2Wmtsgh2V1fP55OjGpBYfwYneOypnCij+V0Bx8AMIBF+opXK/3xljCHQ2Cxc9Hg/O/AKFdlY5+3GtSAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAfUlEQVR4Aa3BUQ6CMBRFwXOb7vulKz/CR4Ni1RCc4a6wJr+FTeedbFQ+ScLUeOWGKxoH2SRhSgZTMljpPFG5qrOQDKZkMCUDLZ41FrTYaaHFTgstzho3dU6SwZQMpmSgxVnjRIudFlrstNBipXFTY0GLSYtvGjeFg1wT/uEBKpc1Cx/u8CoAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAt0lEQVR4Ab3Bi1HbYBAGwD2RQlwKVMbnzu6v7IIkZ4CEhzOZya5/Vf7OBHEoLx7cb4JnFJrgurnPJAhXPCNOm+/NjFfhijhtvjYzDo+P7Zc4lBebz82Mw1qtu+0Su3JTPjYzDmu17kYkduWN8qeZcVirdTcisSu/Ke/NjMNarbsRiV35QHk1Mw5rte5GJHblE5vTuFmrdTcisStfeHBKwtMTl8sFkdiVb/zwRkISN+UO5TTeK//LT0efTfwPZVIpAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA3klEQVR4Ae3BwU3EUBBEweeV8+Jn1u3MeiL7eARIPoCFVsLLwVXcbrfb7fZqCwe2Jxeyvax8sj3HGFwlCbv5YGd7jjG4ShK+rLanJK6ybRtHK5+qildY+YUkPGuMwZmVg7cxaJXQktBs8yzbtDEG33nwYisHlXAkiWabZ0miVRXfWTlRVbQ5J8+qKs6s/EJV8VcenEhCS0JLQktCS0JLQktCS0JLQkvCTx6ckESTRJNEk0STRJNEk0STRJNEk8RPFttTElXFFZLQbLNbVnbbtnEl2+wWdgsfJtdauP0X7xi2ahnkEPOyAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACcklEQVR4Ae3BgW1bRxBF0bs0C1lXss+VWJ3ssBO6kzedWJVM/kIk8kVQMmUlCAL4HP74rzUeFBHFHRHReF9xX2Nz5B0RUVzMGVxlmquIKC4iovFBR+6IiOIi5mSZBPdIYqd40Xit8VpxceRGRFTM4EXxEbZZJBXQeEBjJyIqZvBacVU0lkyzSOKzjlxEREnCaTTEo6qKq9YaVcVea42qYq+1RlXRWqNxEREVc+JMFg3xt2IpGkumWSTxWQc2EVExJ4vGYHGaR1QVVUVVsVQVVcVeVVFV7FUVS2MTESWJRWOwOJNFQ7woisaSaRZJfFaLiJLELY2BM1k0xBKnYC8iqCquWmtUFY9qrdEioiRxj8bAmSy2iQj+aUfe4Uw0BnE6ERFsGq9VRBARXNnmliQ2jTsO/IIzeZRtPurAxjaLbRbbLLZ5hG1s8zsObCRhG0nYRhK2kYRt/k1HNraRhG0kYRtJ2GbOSWYSEUREsRMRSOIzjmwkYRtJ2EYStplzkpmMMVgigr2YE2fyGV9sn3rvIQnbSMI2c04ykzEGmcnSe6f3zvfvT7QWnHvn3DtPz8+8RRKbxhsOXNhGEraZc5KZjDHITPbGEIuGcCaLxuB3HdhERGNjmzknmckYg8zkVqa5R2NwSxKbxjsO7Mw5yUzGGGQm94whrjSEM7nSGHzUgYuIaKfTiTEGmclbMs17NAaLJDaNX/jCju1Tay1677xlDLEEcALO/YzzG+feuTp//cqm8YAv3LB96r3Hz58/6b1z6/n5id7PLCdePD0/0X/8wN++wenEpvGgxjsiothI4moMcdXYNPYaH9R4TPG2xh//Z38BPq9JPdh7I1oAAAAASUVORK5CYII=\"","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"33dc43ea845a9e0f006e.worker.js\");\n};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.0/8 are considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/final-service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' + 'worker. To learn more, visit https://bit.ly/CRA-PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    console.log('state change', installingWorker.state);\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n            registration.update(); // Check for new version everytime we load the page\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' },\n    })\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.');\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}\n","import { Disc, formatTimeFromFrames, Encoding, getTracks, Group } from 'netmd-js';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport { RootState } from './redux/store';\nimport { Mutex } from 'async-mutex';\nimport { Theme } from '@material-ui/core';\nimport jconv from 'jconv';\nimport { halfWidthToFullWidthRange } from 'netmd-js/dist/utils';\n\nexport function sleep(ms: number) {\n    return new Promise(resolve => {\n        setTimeout(resolve, ms);\n    });\n}\n\nexport function debounce<T extends Function>(func: T, timeout = 300): T {\n    let timer: ReturnType<typeof setTimeout>;\n    const debouncedFn = (...args: any) => {\n        clearTimeout(timer);\n        timer = setTimeout(() => {\n            func(...args);\n        }, timeout);\n    };\n    return (debouncedFn as any) as T;\n}\n\nexport async function sleepWithProgressCallback(ms: number, cb: (perc: number) => void) {\n    let elapsedSecs = 1;\n    let interval = setInterval(() => {\n        elapsedSecs++;\n        cb(Math.min(100, ((elapsedSecs * 1000) / ms) * 100));\n    }, 1000);\n    await sleep(ms);\n    window.clearInterval(interval);\n}\n\nexport function useShallowEqualSelector<TState = RootState, TSelected = unknown>(selector: (state: TState) => TSelected): TSelected {\n    return useSelector(selector, shallowEqual);\n}\n\nexport function debugEnabled() {\n    return process.env.NODE_ENV === 'development';\n}\n\nexport function getPublicPathFor(script: string) {\n    return `${process.env.PUBLIC_URL}/${script}`;\n}\n\nexport function savePreference(key: string, value: unknown) {\n    localStorage.setItem(key, JSON.stringify(value));\n}\n\nexport function loadPreference<T>(key: string, defaultValue: T): T {\n    let res = localStorage.getItem(key);\n    if (res === null) {\n        return defaultValue;\n    } else {\n        try {\n            return JSON.parse(res) as T;\n        } catch (e) {\n            return defaultValue;\n        }\n    }\n}\n\nexport function getAvailableCharsForTitle(disc: Disc, includeGroups?: boolean) {\n    const cellLimit = 255;\n    // see https://www.minidisc.org/md_toc.html\n    const fixLength = (len: number) => Math.ceil(len / 7);\n\n    let groups = disc.groups.filter(n => n.title !== null);\n\n    // Assume worst-case scenario\n    let fwTitle = disc.fullWidthTitle + `0;//`;\n    let hwTitle = disc.title + `0;//`;\n    if (includeGroups || includeGroups === undefined)\n        for (let group of groups) {\n            let range = `${group.tracks[0].index + 1}${group.tracks.length - 1 !== 0 &&\n                `-${group.tracks[group.tracks.length - 1].index + 1}`}//`;\n            // The order of these characters doesn't matter. It's for length only\n            fwTitle += group.fullWidthTitle + range;\n            hwTitle += group.title + range;\n        }\n\n    let usedCells = 0;\n    usedCells += fixLength(fwTitle.length * 2);\n    usedCells += fixLength(getHalfWidthTitleLength(hwTitle));\n    for (let trk of getTracks(disc)) {\n        usedCells += fixLength((trk.fullWidthTitle?.length ?? 0) * 2);\n        usedCells += fixLength(getHalfWidthTitleLength(trk.title ?? ''));\n    }\n    return Math.max(cellLimit - usedCells, 0) * 7;\n}\n\nexport function framesToSec(frames: number) {\n    return frames / 512;\n}\n\nexport function timeToSeekArgs(timeInSecs: number): number[] {\n    let value = Math.round(timeInSecs); // ignore frames\n\n    let s = value % 60;\n    value = (value - s) / 60; // min\n\n    let m = value % 60;\n    value = (value - m) / 60; // hour\n\n    let h = value;\n\n    return [h, m, s, 0];\n}\n\nexport function sanitizeTitle(title: string) {\n    return title.normalize('NFD').replace(/[^\\x00-\\x7F]/g, '');\n}\n\nexport function getHalfWidthTitleLength(title: string) {\n    // Some characters are written as 2 bytes\n    // prettier-ignore\n    // '\\u309C': -1, '\\uFF9F': -1, '\\u309B': -1, '\\uFF9E': -1 but when they become part of a multi byte character, it will sum up to 0\n    const multiByteChars: { [key: string]: number } = { \"ガ\": 1, \"ギ\": 1, \"グ\": 1, \"ゲ\": 1, \"ゴ\": 1, \"ザ\": 1, \"ジ\": 1, \"ズ\": 1, \"ゼ\": 1, \"ゾ\": 1, \"ダ\": 1, \"ヂ\": 1, \"ヅ\": 1, \"デ\": 1, \"ド\": 1, \"バ\": 1, \"パ\": 1, \"ビ\": 1, \"ピ\": 1, \"ブ\": 1, \"プ\": 1, \"ベ\": 1, \"ペ\": 1, \"ボ\": 1, \"ポ\": 1, \"ヮ\": 1, \"ヰ\": 1, \"ヱ\": 1, \"ヵ\": 1, \"ヶ\": 1, \"ヴ\": 1, \"ヽ\": 1, \"ヾ\": 1, \"が\": 1, \"ぎ\": 1, \"ぐ\": 1, \"げ\": 1, \"ご\": 1, \"ざ\": 1, \"じ\": 1, \"ず\": 1, \"ぜ\": 1, \"ぞ\": 1, \"だ\": 1, \"ぢ\": 1, \"づ\": 1, \"で\": 1, \"ど\": 1, \"ば\": 1, \"ぱ\": 1, \"び\": 1, \"ぴ\": 1, \"ぶ\": 1, \"ぷ\": 1, \"べ\": 1, \"ぺ\": 1, \"ぼ\": 1, \"ぽ\": 1, \"ゎ\": 1, \"ゐ\": 1, \"ゑ\": 1, \"ゕ\": 1, \"ゖ\": 1, \"ゔ\": 1, \"ゝ\": 1, \"ゞ\": 1 };\n    return (\n        title.length +\n        title\n            .split('')\n            .map(n => multiByteChars[n] ?? 0)\n            .reduce((a, b) => a + b, 0)\n    );\n}\n\nexport function sanitizeHalfWidthTitle(title: string) {\n    enum CharType {\n        normal,\n        dakuten,\n        handakuten,\n    }\n\n    const handakutenPossible = 'はひふへほハヒフヘホ'.split('');\n    const dakutenPossible = 'かきくけこさしすせそたちつてとカキクケコサシスセソタチツテト'.split('').concat(handakutenPossible);\n\n    //'Flatten' all the characters followed by the (han)dakuten character into one\n    let dakutenFix = [];\n    let type = CharType.normal;\n    for (const char of sanitizeFullWidthTitle(title, true)\n        .split('')\n        .reverse()) {\n        //This only works for full-width kana. It will get converted to half-width later anyway...\n        switch (type) {\n            case CharType.dakuten:\n                if (dakutenPossible.includes(char)) {\n                    dakutenFix.push(String.fromCharCode(char.charCodeAt(0) + 1));\n                    type = CharType.normal;\n                    break;\n                } //Else fall through\n            case CharType.handakuten:\n                if (handakutenPossible.includes(char)) {\n                    dakutenFix.push(String.fromCharCode(char.charCodeAt(0) + 2));\n                    type = CharType.normal;\n                    break;\n                } //Else fall through\n            case CharType.normal:\n                switch (char) {\n                    case '\\u309B':\n                    case '\\u3099':\n                    case '\\uFF9E':\n                        type = CharType.dakuten;\n                        break;\n                    case '\\u309C':\n                    case '\\u309A':\n                    case '\\uFF9F':\n                        type = CharType.handakuten;\n                        break;\n                    default:\n                        type = CharType.normal;\n                        dakutenFix.push(char);\n                        break;\n                }\n                break;\n        }\n    }\n\n    title = dakutenFix.reverse().join('');\n    // prettier-ignore\n    const mappings: { [key: string]: string } = { '－': '-', 'ｰ': '-', 'ァ': 'ｧ', 'ア': 'ｱ', 'ィ': 'ｨ', 'イ': 'ｲ', 'ゥ': 'ｩ', 'ウ': 'ｳ', 'ェ': 'ｪ', 'エ': 'ｴ', 'ォ': 'ｫ', 'オ': 'ｵ', 'カ': 'ｶ', 'ガ': 'ｶﾞ', 'キ': 'ｷ', 'ギ': 'ｷﾞ', 'ク': 'ｸ', 'グ': 'ｸﾞ', 'ケ': 'ｹ', 'ゲ': 'ｹﾞ', 'コ': 'ｺ', 'ゴ': 'ｺﾞ', 'サ': 'ｻ', 'ザ': 'ｻﾞ', 'シ': 'ｼ', 'ジ': 'ｼﾞ', 'ス': 'ｽ', 'ズ': 'ｽﾞ', 'セ': 'ｾ', 'ゼ': 'ｾﾞ', 'ソ': 'ｿ', 'ゾ': 'ｿﾞ', 'タ': 'ﾀ', 'ダ': 'ﾀﾞ', 'チ': 'ﾁ', 'ヂ': 'ﾁﾞ', 'ッ': 'ｯ', 'ツ': 'ﾂ', 'ヅ': 'ﾂﾞ', 'テ': 'ﾃ', 'デ': 'ﾃﾞ', 'ト': 'ﾄ', 'ド': 'ﾄﾞ', 'ナ': 'ﾅ', 'ニ': 'ﾆ', 'ヌ': 'ﾇ', 'ネ': 'ﾈ', 'ノ': 'ﾉ', 'ハ': 'ﾊ', 'バ': 'ﾊﾞ', 'パ': 'ﾊﾟ', 'ヒ': 'ﾋ', 'ビ': 'ﾋﾞ', 'ピ': 'ﾋﾟ', 'フ': 'ﾌ', 'ブ': 'ﾌﾞ', 'プ': 'ﾌﾟ', 'ヘ': 'ﾍ', 'ベ': 'ﾍﾞ', 'ペ': 'ﾍﾟ', 'ホ': 'ﾎ', 'ボ': 'ﾎﾞ', 'ポ': 'ﾎﾟ', 'マ': 'ﾏ', 'ミ': 'ﾐ', 'ム': 'ﾑ', 'メ': 'ﾒ', 'モ': 'ﾓ', 'ャ': 'ｬ', 'ヤ': 'ﾔ', 'ュ': 'ｭ', 'ユ': 'ﾕ', 'ョ': 'ｮ', 'ヨ': 'ﾖ', 'ラ': 'ﾗ', 'リ': 'ﾘ', 'ル': 'ﾙ', 'レ': 'ﾚ', 'ロ': 'ﾛ', 'ワ': 'ﾜ', 'ヲ': 'ｦ', 'ン': 'ﾝ', 'ー': '-', 'ヮ': 'ヮ', 'ヰ': 'ヰ', 'ヱ': 'ヱ', 'ヵ': 'ヵ', 'ヶ': 'ヶ', 'ヴ': 'ｳﾞ', 'ヽ': 'ヽ', 'ヾ': 'ヾ', '・': '･', '「': '｢', '」': '｣', '。': '｡', '、': '､', '！': '!', '＂': '\"', '＃': '#', '＄': '$', '％': '%', '＆': '&', '＇': \"'\", '（': '(', '）': ')', '＊': '*', '＋': '+', '，': ',', '．': '.', '／': '/', '：': ':', '；': ';', '＜': '<', '＝': '=', '＞': '>', '？': '?', '＠': '@', 'Ａ': 'A', 'Ｂ': 'B', 'Ｃ': 'C', 'Ｄ': 'D', 'Ｅ': 'E', 'Ｆ': 'F', 'Ｇ': 'G', 'Ｈ': 'H', 'Ｉ': 'I', 'Ｊ': 'J', 'Ｋ': 'K', 'Ｌ': 'L', 'Ｍ': 'M', 'Ｎ': 'N', 'Ｏ': 'O', 'Ｐ': 'P', 'Ｑ': 'Q', 'Ｒ': 'R', 'Ｓ': 'S', 'Ｔ': 'T', 'Ｕ': 'U', 'Ｖ': 'V', 'Ｗ': 'W', 'Ｘ': 'X', 'Ｙ': 'Y', 'Ｚ': 'Z', '［': '[', '＼': '\\\\', '］': ']', '＾': '^', '＿': '_', '｀': '`', 'ａ': 'a', 'ｂ': 'b', 'ｃ': 'c', 'ｄ': 'd', 'ｅ': 'e', 'ｆ': 'f', 'ｇ': 'g', 'ｈ': 'h', 'ｉ': 'i', 'ｊ': 'j', 'ｋ': 'k', 'ｌ': 'l', 'ｍ': 'm', 'ｎ': 'n', 'ｏ': 'o', 'ｐ': 'p', 'ｑ': 'q', 'ｒ': 'r', 'ｓ': 's', 'ｔ': 't', 'ｕ': 'u', 'ｖ': 'v', 'ｗ': 'w', 'ｘ': 'x', 'ｙ': 'y', 'ｚ': 'z', '｛': '{', '｜': '|', '｝': '}', '～': '~', '\\u3000': ' ', '０': '0', '１': '1', '２': '2', '３': '3', '４': '4', '５': '5', '６': '6', '７': '7', '８': '8', '９': '9', 'ぁ': 'ｧ', 'あ': 'ｱ', 'ぃ': 'ｨ', 'い': 'ｲ', 'ぅ': 'ｩ', 'う': 'ｳ', 'ぇ': 'ｪ', 'え': 'ｴ', 'ぉ': 'ｫ', 'お': 'ｵ', 'か': 'ｶ', 'が': 'ｶﾞ', 'き': 'ｷ', 'ぎ': 'ｷﾞ', 'く': 'ｸ', 'ぐ': 'ｸﾞ', 'け': 'ｹ', 'げ': 'ｹﾞ', 'こ': 'ｺ', 'ご': 'ｺﾞ', 'さ': 'ｻ', 'ざ': 'ｻﾞ', 'し': 'ｼ', 'じ': 'ｼﾞ', 'す': 'ｽ', 'ず': 'ｽﾞ', 'せ': 'ｾ', 'ぜ': 'ｾﾞ', 'そ': 'ｿ', 'ぞ': 'ｿﾞ', 'た': 'ﾀ', 'だ': 'ﾀﾞ', 'ち': 'ﾁ', 'ぢ': 'ﾁﾞ', 'っ': 'ｯ', 'つ': 'ﾂ', 'づ': 'ﾂﾞ', 'て': 'ﾃ', 'で': 'ﾃﾞ', 'と': 'ﾄ', 'ど': 'ﾄﾞ', 'な': 'ﾅ', 'に': 'ﾆ', 'ぬ': 'ﾇ', 'ね': 'ﾈ', 'の': 'ﾉ', 'は': 'ﾊ', 'ば': 'ﾊﾞ', 'ぱ': 'ﾊﾟ', 'ひ': 'ﾋ', 'び': 'ﾋﾞ', 'ぴ': 'ﾋﾟ', 'ふ': 'ﾌ', 'ぶ': 'ﾌﾞ', 'ぷ': 'ﾌﾟ', 'へ': 'ﾍ', 'べ': 'ﾍﾞ', 'ぺ': 'ﾍﾟ', 'ほ': 'ﾎ', 'ぼ': 'ﾎﾞ', 'ぽ': 'ﾎﾟ', 'ま': 'ﾏ', 'み': 'ﾐ', 'む': 'ﾑ', 'め': 'ﾒ', 'も': 'ﾓ', 'ゃ': 'ｬ', 'や': 'ﾔ', 'ゅ': 'ｭ', 'ゆ': 'ﾕ', 'ょ': 'ｮ', 'よ': 'ﾖ', 'ら': 'ﾗ', 'り': 'ﾘ', 'る': 'ﾙ', 'れ': 'ﾚ', 'ろ': 'ﾛ', 'わ': 'ﾜ', 'を': 'ｦ', 'ん': 'ﾝ', 'ゎ': 'ヮ', 'ゐ': 'ヰ', 'ゑ': 'ヱ', 'ゕ': 'ヵ', 'ゖ': 'ヶ', 'ゔ': 'ｳﾞ', 'ゝ': 'ヽ', 'ゞ': 'ヾ' };\n    const allowedHalfWidthKana: string[] = Object.values(mappings);\n\n    const newTitle = title\n        .split('')\n        .map(n => {\n            if (mappings[n]) return mappings[n];\n            if (n.charCodeAt(0) < 0x7f || allowedHalfWidthKana.includes(n)) return n;\n            return ' ';\n        })\n        .join('');\n    // Check if the amount of characters is the same as the amount of encoded bytes (when accounting for dakuten). Otherwise the disc might end up corrupted\n    const sjisEncoded = jconv.encode(newTitle, 'SJIS');\n    if (sjisEncoded.length !== getHalfWidthTitleLength(title)) return sanitizeTitle(title); //Fallback\n    return newTitle;\n}\n\nexport function sanitizeFullWidthTitle(title: string, justRemap: boolean = false) {\n    // prettier-ignore\n    const mappings: { [key: string]: string } = { '!': '！', '\"': '＂', '#': '＃', '$': '＄', '%': '％', '&': '＆', \"'\": '＇', '(': '（', ')': '）', '*': '＊', '+': '＋', ',': '，', '-': '－', '.': '．', '/': '／', ':': '：', ';': '；', '<': '＜', '=': '＝', '>': '＞', '?': '？', '@': '＠', 'A': 'Ａ', 'B': 'Ｂ', 'C': 'Ｃ', 'D': 'Ｄ', 'E': 'Ｅ', 'F': 'Ｆ', 'G': 'Ｇ', 'H': 'Ｈ', 'I': 'Ｉ', 'J': 'Ｊ', 'K': 'Ｋ', 'L': 'Ｌ', 'M': 'Ｍ', 'N': 'Ｎ', 'O': 'Ｏ', 'P': 'Ｐ', 'Q': 'Ｑ', 'R': 'Ｒ', 'S': 'Ｓ', 'T': 'Ｔ', 'U': 'Ｕ', 'V': 'Ｖ', 'W': 'Ｗ', 'X': 'Ｘ', 'Y': 'Ｙ', 'Z': 'Ｚ', '[': '［', '\\\\': '＼', ']': '］', '^': '＾', '_': '＿', '`': '｀', 'a': 'ａ', 'b': 'ｂ', 'c': 'ｃ', 'd': 'ｄ', 'e': 'ｅ', 'f': 'ｆ', 'g': 'ｇ', 'h': 'ｈ', 'i': 'ｉ', 'j': 'ｊ', 'k': 'ｋ', 'l': 'ｌ', 'm': 'ｍ', 'n': 'ｎ', 'o': 'ｏ', 'p': 'ｐ', 'q': 'ｑ', 'r': 'ｒ', 's': 'ｓ', 't': 'ｔ', 'u': 'ｕ', 'v': 'ｖ', 'w': 'ｗ', 'x': 'ｘ', 'y': 'ｙ', 'z': 'ｚ', '{': '｛', '|': '｜', '}': '｝', '~': '～', ' ': '\\u3000', '0': '０', '1': '１', '2': '２', '3': '３', '4': '４', '5': '５', '6': '６', '7': '７', '8': '８', '9': '９', 'ｧ': 'ァ', 'ｱ': 'ア', 'ｨ': 'ィ', 'ｲ': 'イ', 'ｩ': 'ゥ', 'ｳ': 'ウ', 'ｪ': 'ェ', 'ｴ': 'エ', 'ｫ': 'ォ', 'ｵ': 'オ', 'ｶ': 'カ', 'ｶﾞ': 'ガ', 'ｷ': 'キ', 'ｷﾞ': 'ギ', 'ｸ': 'ク', 'ｸﾞ': 'グ', 'ｹ': 'ケ', 'ｹﾞ': 'ゲ', 'ｺ': 'コ', 'ｺﾞ': 'ゴ', 'ｻ': 'サ', 'ｻﾞ': 'ザ', 'ｼ': 'シ', 'ｼﾞ': 'ジ', 'ｽ': 'ス', 'ｽﾞ': 'ズ', 'ｾ': 'セ', 'ｾﾞ': 'ゼ', 'ｿ': 'ソ', 'ｿﾞ': 'ゾ', 'ﾀ': 'タ', 'ﾀﾞ': 'ダ', 'ﾁ': 'チ', 'ﾁﾞ': 'ヂ', 'ｯ': 'ッ', 'ﾂ': 'ツ', 'ﾂﾞ': 'ヅ', 'ﾃ': 'テ', 'ﾃﾞ': 'デ', 'ﾄ': 'ト', 'ﾄﾞ': 'ド', 'ﾅ': 'ナ', 'ﾆ': 'ニ', 'ﾇ': 'ヌ', 'ﾈ': 'ネ', 'ﾉ': 'ノ', 'ﾊ': 'ハ', 'ﾊﾞ': 'バ', 'ﾊﾟ': 'パ', 'ﾋ': 'ヒ', 'ﾋﾞ': 'ビ', 'ﾋﾟ': 'ピ', 'ﾌ': 'フ', 'ﾌﾞ': 'ブ', 'ﾌﾟ': 'プ', 'ﾍ': 'ヘ', 'ﾍﾞ': 'ベ', 'ﾍﾟ': 'ペ', 'ﾎ': 'ホ', 'ﾎﾞ': 'ボ', 'ﾎﾟ': 'ポ', 'ﾏ': 'マ', 'ﾐ': 'ミ', 'ﾑ': 'ム', 'ﾒ': 'メ', 'ﾓ': 'モ', 'ｬ': 'ャ', 'ﾔ': 'ヤ', 'ｭ': 'ュ', 'ﾕ': 'ユ', 'ｮ': 'ョ', 'ﾖ': 'ヨ', 'ﾗ': 'ラ', 'ﾘ': 'リ', 'ﾙ': 'ル', 'ﾚ': 'レ', 'ﾛ': 'ロ', 'ﾜ': 'ワ', 'ｦ': 'ヲ', 'ﾝ': 'ン', 'ｰ': 'ー', 'ヮ': 'ヮ', 'ヰ': 'ヰ', 'ヱ': 'ヱ', 'ヵ': 'ヵ', 'ヶ': 'ヶ', 'ｳﾞ': 'ヴ', 'ヽ': 'ヽ', 'ヾ': 'ヾ', '･': '・', '｢': '「', '｣': '」', '｡': '。', '､': '、' };\n\n    const newTitle = title\n        .split('')\n        .map(n => mappings[n] ?? n)\n        .join('');\n\n    if (justRemap) return newTitle;\n\n    const sjisEncoded = jconv.encode(newTitle, 'SJIS');\n    if (jconv.decode(sjisEncoded, 'SJIS') !== newTitle) return sanitizeTitle(title); // Fallback\n    if (sjisEncoded.length !== title.length * 2) return sanitizeTitle(title); // Fallback (every character in the full-width title is 2 bytes)\n    return newTitle;\n}\n\nexport const EncodingName: { [k: number]: string } = {\n    [Encoding.sp]: 'SP',\n    [Encoding.lp2]: 'LP2',\n    [Encoding.lp4]: 'LP4',\n};\n\nexport type DisplayTrack = {\n    index: number;\n    title: string;\n    fullWidthTitle: string;\n    group: string | null;\n    duration: string;\n    encoding: string;\n    durationInSecs: number;\n};\n\nexport function getSortedTracks(disc: Disc | null) {\n    let tracks: DisplayTrack[] = [];\n    if (disc !== null) {\n        for (let group of disc.groups) {\n            for (let track of group.tracks) {\n                tracks.push({\n                    index: track.index,\n                    title: track.title ?? `Unknown Title`,\n                    fullWidthTitle: track.fullWidthTitle ?? ``,\n                    group: group.title ?? null,\n                    encoding: EncodingName[track.encoding],\n                    duration: formatTimeFromFrames(track.duration, false),\n                    durationInSecs: track.duration / 512, // CAVEAT: 1s = 512 frames\n                });\n            }\n        }\n    }\n    tracks.sort((l, r) => l.index - r.index);\n    return tracks;\n}\n\nexport function getGroupedTracks(disc: Disc | null) {\n    if (!disc) {\n        return [];\n    }\n    let groupedList: Group[] = [];\n    let ungroupedTracks = [...(disc.groups.find(n => n.title === null)?.tracks ?? [])];\n\n    let lastIndex = 0;\n\n    for (let group of disc.groups) {\n        if (group.title === null) {\n            continue; // Ungrouped tracks\n        }\n        let toCopy = group.tracks[0].index - lastIndex;\n        groupedList.push({\n            index: -1,\n            title: null,\n            fullWidthTitle: null,\n            tracks: toCopy === 0 ? [] : ungroupedTracks.splice(0, toCopy),\n        });\n        lastIndex = group.tracks[group.tracks.length - 1].index + 1;\n        groupedList.push(group);\n    }\n    groupedList.push({\n        index: -1,\n        title: null,\n        fullWidthTitle: null,\n        tracks: ungroupedTracks,\n    });\n    return groupedList;\n}\n\nexport function recomputeGroupsAfterTrackMove(disc: Disc, trackIndex: number, targetIndex: number) {\n    // Used for moving tracks in netmd-mock and deleting\n    let offset = trackIndex > targetIndex ? 1 : -1;\n    let deleteMode = targetIndex === -1;\n\n    if (deleteMode) {\n        offset = -1;\n        targetIndex = disc.trackCount;\n    }\n\n    let boundsStart = Math.min(trackIndex, targetIndex);\n    let boundsEnd = Math.max(trackIndex, targetIndex);\n\n    let allTracks = disc.groups\n        .map(n => n.tracks)\n        .reduce((a, b) => a.concat(b), [])\n        .sort((a, b) => a.index - b.index)\n        .filter(n => !deleteMode || n.index !== trackIndex);\n\n    let groupBoundaries: {\n        name: string | null;\n        fullWidthName: string | null;\n        start: number;\n        end: number;\n    }[] = disc.groups\n        .filter(n => n.title !== null)\n        .map(group => ({\n            name: group.title,\n            fullWidthName: group.fullWidthTitle,\n            start: group.tracks[0].index,\n            end: group.tracks[0].index + group.tracks.length - 1,\n        })); // Convert to a format better for shifting\n\n    let anyChanges = false;\n\n    for (let group of groupBoundaries) {\n        if (group.start > boundsStart && group.start <= boundsEnd) {\n            group.start += offset;\n            anyChanges = true;\n        }\n        if (group.end >= boundsStart && group.end < boundsEnd) {\n            group.end += offset;\n            anyChanges = true;\n        }\n    }\n\n    if (!anyChanges) return disc;\n\n    let newDisc: Disc = { ...disc };\n\n    // Convert back\n    newDisc.groups = groupBoundaries\n        .map(n => ({\n            title: n.name,\n            fullWidthTitle: n.fullWidthName,\n            index: n.start,\n            tracks: allTracks.slice(n.start, n.end + 1),\n        }))\n        .filter(n => n.tracks.length > 0);\n\n    // Convert ungrouped tracks\n    let allGrouped = newDisc.groups.map(n => n.tracks).reduce((a, b) => a.concat(b), []);\n    let ungrouped = allTracks.filter(n => !allGrouped.includes(n));\n\n    // Fix all the track indexes\n    if (deleteMode) {\n        for (let i = 0; i < allTracks.length; i++) {\n            allTracks[i].index = i;\n        }\n    }\n\n    if (ungrouped.length) newDisc.groups.unshift({ title: null, fullWidthTitle: null, index: 0, tracks: ungrouped });\n\n    return newDisc;\n}\n\nexport function compileDiscTitles(disc: Disc) {\n    let availableCharactersForTitle = getAvailableCharsForTitle(\n        {\n            ...disc,\n            title: '',\n            fullWidthTitle: '',\n        },\n        false\n    );\n    // If the disc or any of the groups, or any track has a full-width title, provide support for them\n    const useFullWidth =\n        disc.fullWidthTitle ||\n        disc.groups.filter(n => !!n.fullWidthTitle).length > 0 ||\n        disc.groups\n            .map(n => n.tracks)\n            .reduce((a, b) => a.concat(b), [])\n            .filter(n => !!n.fullWidthTitle).length > 0;\n\n    const fixLength = (l: number) => Math.ceil(l / 7) * 7;\n\n    let newRawTitle = '',\n        newRawFullWidthTitle = '';\n    if (disc.title) newRawTitle = `0;${disc.title}//`;\n    if (useFullWidth) newRawFullWidthTitle = `０；${disc.fullWidthTitle}／／`;\n    for (let n of disc.groups) {\n        if (n.title === null || n.tracks.length === 0) continue;\n        let range = `${n.tracks[0].index + 1}`;\n        if (n.tracks.length !== 1) {\n            // Special case\n            range += `-${n.tracks[0].index + n.tracks.length}`;\n        }\n\n        let newRawTitleAfterGroup = newRawTitle + `${range};${n.title}//`,\n            newRawFullWidthTitleAfterGroup = newRawFullWidthTitle + halfWidthToFullWidthRange(range) + `；${n.fullWidthTitle ?? ''}／／`;\n\n        let titlesLengthInTOC = fixLength(getHalfWidthTitleLength(newRawTitleAfterGroup));\n\n        if (useFullWidth) titlesLengthInTOC += fixLength(newRawFullWidthTitleAfterGroup.length * 2);\n\n        if (availableCharactersForTitle - titlesLengthInTOC < 0) break;\n\n        newRawTitle = newRawTitleAfterGroup;\n        newRawFullWidthTitle = newRawFullWidthTitleAfterGroup;\n    }\n\n    let titlesLengthInTOC = fixLength(getHalfWidthTitleLength(newRawTitle));\n    if (useFullWidth) titlesLengthInTOC += fixLength(newRawFullWidthTitle.length * 2); // If this check fails the titles without the groups already take too much space, don't change anything\n    if (availableCharactersForTitle - titlesLengthInTOC < 0) {\n        return null;\n    }\n\n    return {\n        newRawTitle,\n        newRawFullWidthTitle: useFullWidth ? newRawFullWidthTitle : '',\n    };\n}\n\nexport function isSequential(numbers: number[]) {\n    if (numbers.length === 0) return true;\n    let last = numbers[0];\n    for (let num of numbers) {\n        if (num === last) {\n            ++last;\n        } else return false;\n    }\n    return true;\n}\n\nexport function asyncMutex(target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    // This is meant to be used only with classes having a \"mutex\" instance property\n    const oldValue = descriptor.value;\n    descriptor.value = async function(...args: any) {\n        const mutex = (this as any).mutex as Mutex;\n        const release = await mutex.acquire();\n        try {\n            return await oldValue.apply(this, args);\n        } finally {\n            release();\n        }\n    };\n    return descriptor;\n}\n\nexport function forAnyDesktop(theme: Theme) {\n    return theme.breakpoints.up(600 + theme.spacing(2) * 2);\n}\n\nexport function belowDesktop(theme: Theme) {\n    return theme.breakpoints.down(600 + theme.spacing(2) * 2);\n}\n\nexport function forWideDesktop(theme: Theme) {\n    return theme.breakpoints.up(700 + theme.spacing(2) * 2) + ` and (min-height: 750px)`;\n}\n\nexport function askNotificationPermission(): Promise<NotificationPermission> {\n    // Adapted from: https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API/Using_the_Notifications_API\n    function checkNotificationPromise() {\n        try {\n            Notification.requestPermission().then();\n        } catch (e) {\n            return false;\n        }\n        return true;\n    }\n\n    if (checkNotificationPromise()) {\n        return Notification.requestPermission();\n    } else {\n        return new Promise(resolve => Notification.requestPermission(resolve));\n    }\n}\n\nexport async function getAtrac3Info(file: File) {\n    // see: http://soundfile.sapp.org/doc/WaveFormat/\n    // and: https://www.fatalerrors.org/a/detailed-explanation-of-wav-file-format.html\n\n    const fileData = await file.arrayBuffer();\n    if (fileData.byteLength < 44) {\n        return null;\n    }\n\n    const riffDescriptor = new Uint32Array(fileData.slice(0, 12));\n    if (riffDescriptor[0] !== 0x46464952 || riffDescriptor[2] !== 0x45564157) {\n        // 'RIFF' && 'WAVE'\n        return null;\n    }\n\n    // WAVE format\n    const waveDescriptor = new Uint32Array(fileData.slice(12, 20));\n    if (waveDescriptor[0] !== 0x20746d66) {\n        return false;\n    }\n\n    const audioFormatAndChanneld = new Uint16Array(fileData.slice(20, 24));\n    if (audioFormatAndChanneld[0] !== 0x270 || audioFormatAndChanneld[1] !== 2) {\n        // 'atrac3' && 2 channels\n        return null;\n    }\n\n    const sampleRateAndByteRate = new Uint32Array(fileData.slice(24, 32));\n    if (sampleRateAndByteRate[0] !== 44100) {\n        // Sample rate\n        return null;\n    }\n    const byteRate = sampleRateAndByteRate[1];\n\n    let mode: 'LP2' | 'LP105' | 'LP4' | null = null;\n    if (byteRate > 16000) {\n        mode = 'LP2';\n    } else if (byteRate > 13000) {\n        mode = 'LP105';\n    } else if (byteRate > 8000) {\n        mode = 'LP4';\n    } else {\n        mode = null;\n    }\n\n    if (mode === null) {\n        return null;\n    }\n\n    const waveBlockEndOffset = new Uint16Array(fileData.slice(36, 38));\n\n    let dataOffset = -1;\n\n    const nextBlockStartOffset = waveBlockEndOffset[0] + 38;\n    const nextBlockEndOffset = nextBlockStartOffset + 8;\n    const nextBlock = new Uint32Array(fileData.slice(nextBlockStartOffset, nextBlockEndOffset));\n    if (nextBlock[0] === 0x61746164) {\n        // data\n        dataOffset = nextBlockEndOffset;\n    } else if (nextBlock[0] === 0x74636166) {\n        // fact\n        const dataBlockLength = 8;\n        dataOffset = nextBlockEndOffset + nextBlock[1] + dataBlockLength;\n    }\n\n    if (dataOffset === -1) {\n        return null;\n    }\n\n    return {\n        mode,\n        dataOffset,\n    };\n}\n\ndeclare let process: any;\n","import {\n    openNewDevice,\n    NetMDInterface,\n    Disc,\n    listContent,\n    openPairedDevice,\n    Wireformat,\n    MDTrack,\n    download,\n    getDeviceStatus,\n    DeviceStatus,\n    Group,\n} from 'netmd-js';\nimport { makeGetAsyncPacketIteratorOnWorkerThread } from 'netmd-js/dist/web-encrypt-worker';\nimport { Logger } from 'netmd-js/dist/logger';\nimport {\n    asyncMutex,\n    sanitizeHalfWidthTitle,\n    sanitizeFullWidthTitle,\n    sleep,\n    isSequential,\n    compileDiscTitles,\n    recomputeGroupsAfterTrackMove,\n} from '../utils';\nimport { Mutex } from 'async-mutex';\n\nconst Worker = require('worker-loader!netmd-js/dist/web-encrypt-worker.js'); // eslint-disable-line import/no-webpack-loader-syntax\n\nexport interface NetMDService {\n    mutex: Mutex;\n    getDeviceStatus(): Promise<DeviceStatus>;\n    pair(): Promise<boolean>;\n    connect(): Promise<boolean>;\n    listContent(): Promise<Disc>;\n    getDeviceName(): Promise<string>;\n    finalize(): Promise<void>;\n    renameTrack(index: number, newTitle: string, newFullWidthTitle?: string): Promise<void>;\n    renameDisc(newName: string, newFullWidthName?: string): Promise<void>;\n    renameGroup(groupIndex: number, newTitle: string, newFullWidthTitle?: string): Promise<void>;\n    addGroup(groupBegin: number, groupLength: number, name: string): Promise<void>;\n    deleteGroup(groupIndex: number): Promise<void>;\n    rewriteGroups(groups: Group[]): Promise<void>;\n    deleteTracks(indexes: number[]): Promise<void>;\n    moveTrack(src: number, dst: number, updateGroups?: boolean): Promise<void>;\n    wipeDisc(): Promise<void>;\n    wipeDiscTitleInfo(): Promise<void>;\n    upload(\n        title: string,\n        fullWidthTitle: string,\n        data: ArrayBuffer,\n        format: Wireformat,\n        progressCallback: (progress: { written: number; encrypted: number; total: number }) => void\n    ): Promise<void>;\n\n    play(): Promise<void>;\n    pause(): Promise<void>;\n    stop(): Promise<void>;\n    next(): Promise<void>;\n    prev(): Promise<void>;\n    gotoTrack(index: number): Promise<void>;\n    gotoTime(index: number, hour: number, minute: number, second: number, frame: number): Promise<void>;\n    getPosition(): Promise<number[] | null>;\n}\n\nexport class NetMDUSBService implements NetMDService {\n    private netmdInterface?: NetMDInterface;\n    private logger?: Logger;\n    private cachedContentList?: Disc;\n    public mutex = new Mutex();\n    public statusMonitorTimer: any;\n\n    constructor({ debug = false }: { debug: boolean }) {\n        if (debug) {\n            // Logging a few methods that have been causing issues with some units\n            const _fn = (...args: any) => {\n                if (args && args[0] && args[0].method) {\n                    console.log(...args);\n                }\n            };\n            this.logger = {\n                debug: _fn,\n                info: _fn,\n                warn: _fn,\n                error: _fn,\n                child: () => this.logger!,\n            };\n        }\n    }\n\n    private async writeRawTitles(titleObject: { newRawTitle: string; newRawFullWidthTitle: string } | null) {\n        if (titleObject === null) return;\n        await this.netmdInterface!.cacheTOC();\n        await this.netmdInterface!.setDiscTitle(sanitizeHalfWidthTitle(titleObject.newRawTitle));\n        await this.netmdInterface!.setDiscTitle(sanitizeFullWidthTitle(titleObject.newRawFullWidthTitle), true);\n        await this.netmdInterface!.syncTOC();\n        this.dropCachedContentList();\n    }\n\n    private async listContentUsingCache() {\n        if (!this.cachedContentList) {\n            console.log(\"There's no cached version of the TOC, caching\");\n            this.cachedContentList = await listContent(this.netmdInterface!);\n        } else {\n            console.log(\"There's a cached TOC available.\");\n        }\n        return JSON.parse(JSON.stringify(this.cachedContentList)) as Disc;\n    }\n\n    private dropCachedContentList() {\n        console.log('Cached TOC Dropped');\n        this.cachedContentList = undefined;\n    }\n\n    async pair() {\n        this.dropCachedContentList();\n        let iface = await openNewDevice(navigator.usb, this.logger);\n        if (iface === null) {\n            return false;\n        }\n        this.netmdInterface = iface;\n        return true;\n    }\n\n    async connect() {\n        this.dropCachedContentList();\n        let iface = await openPairedDevice(navigator.usb, this.logger);\n        if (iface === null) {\n            return false;\n        }\n        this.netmdInterface = iface;\n        return true;\n    }\n\n    @asyncMutex\n    async listContent() {\n        this.dropCachedContentList();\n        return await this.listContentUsingCache();\n    }\n\n    @asyncMutex\n    async getDeviceStatus() {\n        return await getDeviceStatus(this.netmdInterface!);\n    }\n\n    @asyncMutex\n    async getDeviceName() {\n        return await this.netmdInterface!.netMd.getDeviceName();\n    }\n\n    @asyncMutex\n    async finalize() {\n        await this.netmdInterface!.netMd.finalize();\n        this.dropCachedContentList();\n    }\n\n    @asyncMutex\n    async rewriteGroups(groups: Group[]) {\n        const disc = await this.listContentUsingCache();\n        disc.groups = groups;\n        await this.writeRawTitles(compileDiscTitles(disc));\n    }\n\n    @asyncMutex\n    async renameTrack(index: number, title: string, fullWidthTitle?: string) {\n        title = sanitizeHalfWidthTitle(title);\n        await this.netmdInterface!.cacheTOC();\n        await this.netmdInterface!.setTrackTitle(index, title);\n        if (fullWidthTitle !== undefined) {\n            await this.netmdInterface!.setTrackTitle(index, sanitizeFullWidthTitle(fullWidthTitle), true);\n        }\n        await this.netmdInterface!.syncTOC();\n        this.dropCachedContentList();\n    }\n\n    @asyncMutex\n    async renameGroup(groupIndex: number, newName: string, newFullWidthName?: string) {\n        const disc = await this.listContentUsingCache();\n        let thisGroup = disc.groups.find(g => g.index === groupIndex);\n        if (!thisGroup) {\n            return;\n        }\n\n        thisGroup.title = newName;\n        if (newFullWidthName !== undefined) {\n            thisGroup.fullWidthTitle = newFullWidthName;\n        }\n        await this.writeRawTitles(compileDiscTitles(disc));\n    }\n\n    @asyncMutex\n    async addGroup(groupBegin: number, groupLength: number, title: string) {\n        const disc = await this.listContentUsingCache();\n        let ungrouped = disc.groups.find(n => n.title === null);\n        if (!ungrouped) {\n            return; // You can only group tracks that aren't already in a different group, if there's no such tracks, there's no point to continue\n        }\n\n        let ungroupedLengthBeforeGroup = ungrouped.tracks.length;\n\n        let thisGroupTracks = ungrouped.tracks.filter(n => n.index >= groupBegin && n.index < groupBegin + groupLength);\n        ungrouped.tracks = ungrouped.tracks.filter(n => !thisGroupTracks.includes(n));\n\n        if (ungroupedLengthBeforeGroup - ungrouped.tracks.length !== groupLength) {\n            throw new Error('A track cannot be in 2 groups!');\n        }\n\n        if (!isSequential(thisGroupTracks.map(n => n.index))) {\n            throw new Error('Invalid sequence of tracks!');\n        }\n\n        disc.groups.push({\n            title,\n            fullWidthTitle: '',\n            index: disc.groups.length,\n            tracks: thisGroupTracks,\n        });\n        disc.groups = disc.groups.filter(g => g.tracks.length !== 0).sort((a, b) => a.tracks[0].index - b.tracks[0].index);\n        await this.writeRawTitles(compileDiscTitles(disc));\n    }\n\n    @asyncMutex\n    async deleteGroup(index: number) {\n        const disc = await this.listContentUsingCache();\n\n        let groupIndex = disc.groups.findIndex(g => g.index === index);\n        if (groupIndex >= 0) {\n            disc.groups.splice(groupIndex, 1);\n        }\n\n        await this.writeRawTitles(compileDiscTitles(disc));\n    }\n\n    @asyncMutex\n    async renameDisc(newName: string, newFullWidthName?: string) {\n        // TODO: This whole function should be moved in netmd-js\n        const oldName = await this.netmdInterface!.getDiscTitle();\n        const oldFullWidthName = await this.netmdInterface!.getDiscTitle(true);\n        const oldRawName = await this.netmdInterface!._getDiscTitle();\n        const oldRawFullWidthName = await this.netmdInterface!._getDiscTitle(true);\n        const hasGroups = oldRawName.indexOf('//') >= 0;\n        const hasFullWidthGroups = oldRawName.indexOf('／／') >= 0;\n        const hasGroupsAndTitle = oldRawName.startsWith('0;');\n        const hasFullWidthGroupsAndTitle = oldRawName.startsWith('０；');\n\n        newName = sanitizeHalfWidthTitle(newName);\n        newFullWidthName = newFullWidthName && sanitizeFullWidthTitle(newFullWidthName);\n\n        if (newFullWidthName !== oldFullWidthName && newFullWidthName !== undefined) {\n            let newFullWidthNameWithGroups;\n            if (hasFullWidthGroups) {\n                if (hasFullWidthGroupsAndTitle) {\n                    newFullWidthNameWithGroups = oldRawFullWidthName.replace(\n                        /^０；.*?／／/,\n                        newFullWidthName !== '' ? `０；${newFullWidthName}／／` : ``\n                    );\n                } else {\n                    newFullWidthNameWithGroups = `０；${newFullWidthName}／／${oldRawFullWidthName}`; // Add the new title\n                }\n            } else {\n                newFullWidthNameWithGroups = newFullWidthName;\n            }\n            await this.netmdInterface!.cacheTOC();\n            await this.netmdInterface!.setDiscTitle(newFullWidthNameWithGroups, true);\n            await this.netmdInterface!.syncTOC();\n            this.dropCachedContentList();\n        }\n\n        if (newName === oldName) {\n            return;\n        }\n\n        let newNameWithGroups;\n\n        if (hasGroups) {\n            if (hasGroupsAndTitle) {\n                newNameWithGroups = oldRawName.replace(/^0;.*?\\/\\//, newName !== '' ? `0;${newName}//` : ``); // Replace or delete the old title\n            } else {\n                newNameWithGroups = `0;${newName}//${oldRawName}`; // Add the new title\n            }\n        } else {\n            newNameWithGroups = newName;\n        }\n\n        await this.netmdInterface!.cacheTOC();\n        await this.netmdInterface!.setDiscTitle(newNameWithGroups);\n        await this.netmdInterface!.syncTOC();\n        this.dropCachedContentList();\n    }\n\n    @asyncMutex\n    async deleteTracks(indexes: number[]) {\n        indexes = indexes.sort();\n        indexes.reverse();\n        let content = await this.listContentUsingCache();\n        for (let index of indexes) {\n            content = recomputeGroupsAfterTrackMove(content, index, -1);\n            await this.netmdInterface!.eraseTrack(index);\n            await sleep(100);\n        }\n        await this.writeRawTitles(compileDiscTitles(content));\n        this.dropCachedContentList();\n    }\n\n    @asyncMutex\n    async wipeDisc() {\n        await this.netmdInterface!.eraseDisc();\n        this.dropCachedContentList();\n    }\n\n    @asyncMutex\n    async wipeDiscTitleInfo() {\n        await this.writeRawTitles({\n            newRawTitle: '',\n            newRawFullWidthTitle: '',\n        });\n    }\n\n    @asyncMutex\n    async moveTrack(src: number, dst: number, updateGroups?: boolean) {\n        await this.netmdInterface!.moveTrack(src, dst);\n\n        if (updateGroups === undefined || updateGroups) {\n            await this.writeRawTitles(compileDiscTitles(recomputeGroupsAfterTrackMove(await this.listContentUsingCache(), src, dst)));\n        }\n        this.dropCachedContentList();\n    }\n\n    async upload(\n        title: string,\n        fullWidthTitle: string,\n        data: ArrayBuffer,\n        format: Wireformat,\n        progressCallback: (progress: { written: number; encrypted: number; total: number }) => void\n    ) {\n        let total = data.byteLength;\n        let written = 0;\n        let encrypted = 0;\n        function updateProgress() {\n            progressCallback({ written, encrypted, total });\n        }\n\n        let w = new Worker();\n\n        let webWorkerAsyncPacketIterator = makeGetAsyncPacketIteratorOnWorkerThread(w, ({ encryptedBytes }) => {\n            encrypted = encryptedBytes;\n            updateProgress();\n        });\n\n        let halfWidthTitle = sanitizeHalfWidthTitle(title);\n        fullWidthTitle = sanitizeFullWidthTitle(fullWidthTitle);\n        let mdTrack = new MDTrack(halfWidthTitle, format, data, 0x80000, fullWidthTitle, webWorkerAsyncPacketIterator);\n\n        await download(this.netmdInterface!, mdTrack, ({ writtenBytes }) => {\n            written = writtenBytes;\n            updateProgress();\n        });\n\n        w.terminate();\n        this.dropCachedContentList();\n    }\n\n    @asyncMutex\n    async play() {\n        await this.netmdInterface!.play();\n    }\n    @asyncMutex\n    async pause() {\n        await this.netmdInterface!.pause();\n    }\n    @asyncMutex\n    async stop() {\n        await this.netmdInterface!.stop();\n    }\n    @asyncMutex\n    async next() {\n        await this.netmdInterface!.nextTrack();\n    }\n    @asyncMutex\n    async prev() {\n        await this.netmdInterface!.previousTrack();\n    }\n\n    @asyncMutex\n    async gotoTrack(index: number) {\n        await this.netmdInterface!.gotoTrack(index);\n    }\n\n    @asyncMutex\n    async gotoTime(index: number, h: number, m: number, s: number, f: number) {\n        await this.netmdInterface!.gotoTime(index, h, m, s, f);\n    }\n\n    @asyncMutex\n    async getPosition() {\n        return await this.netmdInterface!.getPosition();\n    }\n}\n","import { NetMDService } from './netmd';\nimport { AudioExportService } from './audio-export';\nimport { MediaRecorderService } from './mediarecorder';\nimport { MediaSessionService } from './media-session';\n\ninterface ServiceRegistry {\n    netmdService?: NetMDService;\n    audioExportService?: AudioExportService;\n    mediaRecorderService?: MediaRecorderService;\n    mediaSessionService?: MediaSessionService;\n}\n\nconst ServiceRegistry: ServiceRegistry = {};\n\nexport default ServiceRegistry;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { enableBatching } from 'redux-batched-actions';\n\nexport interface LoadingDialogState {\n    visible: boolean;\n    cancelled: boolean;\n\n    writtenProgress: number;\n    encryptedProgress: number;\n    totalProgress: number;\n\n    trackTotal: number;\n    trackConverting: number;\n    trackCurrent: number;\n\n    titleCurrent: string;\n    titleConverting: string;\n}\n\nconst initialState: LoadingDialogState = {\n    visible: false,\n    cancelled: false,\n\n    // Current Track Upload\n    writtenProgress: 0,\n    encryptedProgress: 0,\n    totalProgress: 1,\n\n    // Tracks done\n    trackTotal: 1,\n    trackConverting: 0,\n    trackCurrent: 0,\n    titleCurrent: '',\n    titleConverting: '',\n};\n\nexport const slice = createSlice({\n    name: 'uploadDialog',\n    initialState,\n    reducers: {\n        setVisible: (state, action: PayloadAction<boolean>) => {\n            state.visible = action.payload;\n        },\n        setWriteProgress: (state, action: PayloadAction<{ written: number; encrypted: number; total: number }>) => {\n            state.encryptedProgress = action.payload.encrypted;\n            state.writtenProgress = action.payload.written;\n            state.totalProgress = action.payload.total;\n        },\n        setCancelUpload: (state, action: PayloadAction<boolean>) => {\n            state.cancelled = action.payload;\n        },\n        setTrackProgress: (\n            state,\n            action: PayloadAction<{ total: number; current: number; converting: number; titleCurrent: string; titleConverting: string }>\n        ) => {\n            state.trackTotal = action.payload.total;\n            state.trackCurrent = action.payload.current;\n            state.trackConverting = action.payload.converting;\n            state.titleCurrent = action.payload.titleCurrent;\n            state.titleConverting = action.payload.titleConverting;\n        },\n    },\n});\n\nexport const { reducer, actions } = slice;\nexport default enableBatching(reducer);\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { enableBatching } from 'redux-batched-actions';\n\nexport interface RenameDialogState {\n    visible: boolean;\n    title: string;\n    fullWidthTitle: string;\n    index: number;\n    groupIndex: number | null;\n}\n\nconst initialState: RenameDialogState = {\n    visible: false,\n    title: '',\n    fullWidthTitle: '',\n    index: -1,\n    groupIndex: null,\n};\n\nexport const slice = createSlice({\n    name: 'renameDialog',\n    initialState,\n    reducers: {\n        setVisible: (state: RenameDialogState, action: PayloadAction<boolean>) => {\n            state.visible = action.payload;\n        },\n        setCurrentName: (state: RenameDialogState, action: PayloadAction<string>) => {\n            state.title = action.payload;\n        },\n        setCurrentFullWidthName: (state: RenameDialogState, action: PayloadAction<string>) => {\n            state.fullWidthTitle = action.payload;\n        },\n        setIndex: (state: RenameDialogState, action: PayloadAction<number>) => {\n            state.index = action.payload;\n        },\n        setGroupIndex: (state: RenameDialogState, action: PayloadAction<number | null>) => {\n            state.groupIndex = action.payload;\n        },\n    },\n});\n\nexport const { reducer, actions } = slice;\nexport default enableBatching(reducer);\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { enableBatching } from 'redux-batched-actions';\n\nexport interface ErrorDialogState {\n    visible: boolean;\n    error: string;\n}\n\nconst initialState: ErrorDialogState = {\n    visible: false,\n    error: ``,\n};\n\nconst slice = createSlice({\n    name: 'errorDialog',\n    initialState,\n    reducers: {\n        setVisible: (state, action: PayloadAction<boolean>) => {\n            state.visible = action.payload;\n        },\n        setErrorMessage: (state, action: PayloadAction<string>) => {\n            state.error = `${action.payload}`;\n        },\n    },\n});\n\nexport const { actions, reducer } = slice;\nexport default enableBatching(reducer);\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { enableBatching } from 'redux-batched-actions';\n\nexport const initialState = {\n    visible: false,\n    dismissed: false, // This will prevent showing the dialog during the same session\n};\n\nconst slice = createSlice({\n    name: 'panicDialog',\n    initialState,\n    reducers: {\n        setVisible: (state, action: PayloadAction<boolean>) => {\n            state.visible = action.payload;\n        },\n        dismiss: (state, action: PayloadAction<void>) => {\n            state.visible = false;\n            state.dismissed = true;\n        },\n    },\n});\n\nexport const { actions, reducer } = slice;\nexport default enableBatching(reducer);\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { enableBatching } from 'redux-batched-actions';\nimport { savePreference, loadPreference } from '../utils';\n\nexport type TitleFormatType = 'filename' | 'title' | 'album-title' | 'artist-title' | 'artist-album-title' | 'title-artist';\nexport type UploadFormat = 'SP' | 'LP2' | 'LP4';\n\nexport interface ConvertDialogFeature {\n    visible: boolean;\n    format: UploadFormat;\n    titleFormat: TitleFormatType;\n}\n\nconst initialState: ConvertDialogFeature = {\n    visible: false,\n    format: loadPreference('uploadFormat', 'LP2') as UploadFormat,\n    titleFormat: loadPreference('trackTitleFormat', 'filename') as TitleFormatType,\n};\n\nconst slice = createSlice({\n    name: 'convertDialog',\n    initialState,\n    reducers: {\n        setVisible: (state, action: PayloadAction<boolean>) => {\n            state.visible = action.payload;\n        },\n        setFormat: (state, action: PayloadAction<UploadFormat>) => {\n            state.format = action.payload;\n            savePreference('uploadFormat', state.format);\n        },\n        setTitleFormat: (state, action: PayloadAction<TitleFormatType>) => {\n            state.titleFormat = action.payload;\n            savePreference('trackTitleFormat', state.titleFormat);\n        },\n    },\n});\n\nexport const { actions, reducer } = slice;\nexport default enableBatching(reducer);\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { enableBatching } from 'redux-batched-actions';\n\nexport interface DumpDialogState {\n    visible: boolean;\n    inputDeviceId: string;\n}\n\nconst initialState: DumpDialogState = {\n    visible: false,\n    inputDeviceId: '',\n};\n\nexport const slice = createSlice({\n    name: 'dumpDialog',\n    initialState,\n    reducers: {\n        setVisible: (state, action: PayloadAction<boolean>) => {\n            state.visible = action.payload;\n        },\n        setInputDeviceId: (state, action: PayloadAction<string>) => {\n            state.inputDeviceId = action.payload;\n        },\n    },\n});\n\nexport const { reducer, actions } = slice;\nexport default enableBatching(reducer);\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { enableBatching } from 'redux-batched-actions';\n\nexport interface RecordingDialogState {\n    visible: boolean;\n\n    trackTotal: number;\n    trackDone: number;\n    trackCurrent: number;\n\n    titleCurrent: string;\n}\n\nconst initialState: RecordingDialogState = {\n    visible: false,\n\n    trackTotal: 1,\n    trackDone: 0,\n    trackCurrent: 0,\n\n    titleCurrent: '',\n\n    // visible: true,\n    // trackTotal: 4,\n    // trackDone: 1,\n    // trackCurrent: 25,\n\n    // titleCurrent: 'Seconda traccia',\n};\n\nexport const slice = createSlice({\n    name: 'recordDialog',\n    initialState,\n    reducers: {\n        setVisible: (state, action: PayloadAction<boolean>) => {\n            state.visible = action.payload;\n        },\n        setProgress: (\n            state,\n            action: PayloadAction<{ trackTotal: number; trackDone: number; trackCurrent: number; titleCurrent: string }>\n        ) => {\n            state.trackTotal = action.payload.trackTotal;\n            state.trackDone = action.payload.trackDone;\n            state.trackCurrent = action.payload.trackCurrent;\n            state.titleCurrent = action.payload.titleCurrent;\n        },\n    },\n});\n\nexport const { reducer, actions } = slice;\nexport default enableBatching(reducer);\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { enableBatching } from 'redux-batched-actions';\nimport { savePreference, loadPreference } from '../utils';\n\nexport type Views = 'WELCOME' | 'MAIN';\n\nexport interface AppState {\n    mainView: Views;\n    loading: boolean;\n    pairingFailed: boolean;\n    pairingMessage: string;\n    browserSupported: boolean;\n    darkMode: boolean;\n    vintageMode: boolean;\n    aboutDialogVisible: boolean;\n    notifyWhenFinished: boolean;\n    hasNotificationSupport: boolean;\n    fullWidthSupport: boolean;\n}\n\nexport const buildInitialState = (): AppState => {\n    return {\n        mainView: 'WELCOME',\n        loading: false,\n        pairingFailed: false,\n        pairingMessage: ``,\n        browserSupported: true,\n        darkMode: loadPreference('darkMode', false),\n        vintageMode: loadPreference('vintageMode', false),\n        aboutDialogVisible: false,\n        notifyWhenFinished: loadPreference('notifyWhenFinished', false),\n        hasNotificationSupport: true,\n        fullWidthSupport: loadPreference('fullWidthSupport', false),\n    };\n};\n\nconst initialState: AppState = buildInitialState();\n\nexport const slice = createSlice({\n    name: 'app',\n    initialState,\n    reducers: {\n        setMainView: (state, action: PayloadAction<Views>) => {\n            // CAVEAT: There's a middleware that resets the state when mainView is set to WELCOME\n            state.mainView = action.payload;\n        },\n        setLoading: (state, action: PayloadAction<boolean>) => {\n            state.loading = action.payload;\n        },\n        setPairingFailed: (state, action: PayloadAction<boolean>) => {\n            state.pairingFailed = action.payload;\n        },\n        setPairingMessage: (state, action: PayloadAction<string>) => {\n            state.pairingMessage = action.payload;\n        },\n        setBrowserSupported: (state, action: PayloadAction<boolean>) => {\n            state.browserSupported = action.payload;\n        },\n        setDarkMode: (state, action: PayloadAction<boolean>) => {\n            state.darkMode = action.payload;\n            savePreference('darkMode', state.darkMode);\n        },\n        setNotifyWhenFinished: (state, action: PayloadAction<boolean>) => {\n            state.notifyWhenFinished = action.payload;\n            savePreference('notifyWhenFinished', action.payload);\n        },\n        setNotificationSupport: (state, action: PayloadAction<boolean>) => {\n            state.hasNotificationSupport = action.payload;\n        },\n        setVintageMode: (state, action: PayloadAction<boolean>) => {\n            state.vintageMode = action.payload;\n            savePreference('vintageMode', action.payload);\n        },\n        showAboutDialog: (state, action: PayloadAction<boolean>) => {\n            state.aboutDialogVisible = action.payload;\n        },\n        setFullWidthSupport: (state, action: PayloadAction<boolean>) => {\n            state.fullWidthSupport = action.payload;\n            savePreference('fullWidthSupport', state.fullWidthSupport);\n        },\n    },\n});\n\nexport const { reducer, actions } = slice;\nexport default enableBatching(reducer);\n","import { Disc, DeviceStatus } from 'netmd-js';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { enableBatching } from 'redux-batched-actions';\n\nexport interface MainState {\n    disc: Disc | null;\n    deviceName: string;\n    deviceStatus: DeviceStatus | null;\n}\n\nconst initialState: MainState = {\n    disc: null,\n    deviceName: '',\n    deviceStatus: null,\n};\n\nexport const slice = createSlice({\n    name: 'main',\n    initialState,\n    reducers: {\n        setDisc: (state, action: PayloadAction<Disc>) => {\n            state.disc = action.payload;\n        },\n        setDeviceName: (state, action: PayloadAction<string>) => {\n            state.deviceName = action.payload;\n        },\n        setDeviceStatus: (state, action: PayloadAction<DeviceStatus | null>) => {\n            state.deviceStatus = action.payload;\n        },\n    },\n});\n\nexport const { reducer, actions } = slice;\nexport default enableBatching(reducer);\n","import { configureStore, getDefaultMiddleware, Middleware, combineReducers } from '@reduxjs/toolkit';\nimport uploadDialog from './upload-dialog-feature';\nimport renameDialog from './rename-dialog-feature';\nimport errorDialog from './error-dialog-feature';\nimport panicDialog, { actions as panicDialogActions } from './panic-dialog-feature';\nimport convertDialog from './convert-dialog-feature';\nimport dumpDialog from './dump-dialog-feature';\nimport recordDialog from './record-dialog-feature';\nimport appState, { actions as appActions, buildInitialState as buildInitialAppState } from './app-feature';\nimport main from './main-feature';\n\nconst errorCatcher: Middleware = store => next => async action => {\n    try {\n        await next(action);\n    } catch (e) {\n        console.error(e);\n        next(panicDialogActions.setVisible(true));\n    }\n};\n\nlet reducer = combineReducers({\n    renameDialog,\n    uploadDialog,\n    errorDialog,\n    panicDialog,\n    convertDialog,\n    dumpDialog,\n    recordDialog,\n    appState,\n    main,\n});\n\nconst resetStateAction = appActions.setMainView.toString();\nconst resetStatePayoload = 'WELCOME';\nconst resetStateReducer: typeof reducer = function(...args) {\n    const [state, action] = args;\n    if (action.type === resetStateAction && action.payload === resetStatePayoload) {\n        return {\n            ...initialState,\n            appState: buildInitialAppState(),\n        };\n    }\n    return reducer(...args);\n};\n\nexport const store = configureStore({\n    reducer: resetStateReducer,\n    middleware: [errorCatcher, ...getDefaultMiddleware()],\n});\n\nconst initialState = Object.freeze(store.getState());\n\nexport type AppStore = typeof store;\nexport type AppSubscribe = typeof store.subscribe;\nexport type AppGetState = typeof store.getState;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n","import { batchActions } from 'redux-batched-actions';\nimport { AppDispatch, RootState } from './store';\nimport { actions as uploadDialogActions } from './upload-dialog-feature';\nimport { actions as renameDialogActions } from './rename-dialog-feature';\nimport { actions as errorDialogAction } from './error-dialog-feature';\nimport { actions as recordDialogAction } from './record-dialog-feature';\nimport { actions as appStateActions } from './app-feature';\nimport { actions as mainActions } from './main-feature';\nimport serviceRegistry from '../services/registry';\nimport { Wireformat, getTracks } from 'netmd-js';\nimport { AnyAction } from '@reduxjs/toolkit';\nimport {\n    getAvailableCharsForTitle,\n    framesToSec,\n    sleepWithProgressCallback,\n    sleep,\n    askNotificationPermission,\n    getGroupedTracks,\n    getHalfWidthTitleLength,\n    timeToSeekArgs,\n} from '../utils';\nimport * as mm from 'music-metadata-browser';\nimport { TitleFormatType, UploadFormat } from './convert-dialog-feature';\nimport NotificationCompleteIconUrl from '../images/record-complete-notification-icon.png';\nimport { assertNumber } from 'netmd-js/dist/utils';\n\nexport function control(action: 'play' | 'stop' | 'next' | 'prev' | 'goto' | 'pause' | 'seek', params?: unknown) {\n    return async function(dispatch: AppDispatch, getState: () => RootState) {\n        switch (action) {\n            case 'play':\n                await serviceRegistry.netmdService!.play();\n                break;\n            case 'stop':\n                await serviceRegistry.netmdService!.stop();\n                break;\n            case 'next':\n                await serviceRegistry.netmdService!.next();\n                break;\n            case 'prev':\n                await serviceRegistry.netmdService!.prev();\n                break;\n            case 'pause':\n                await serviceRegistry.netmdService!.pause();\n                break;\n            case 'goto': {\n                const trackNumber = assertNumber(params, 'Invalid track number for \"goto\" command');\n                await serviceRegistry.netmdService!.gotoTrack(trackNumber);\n                break;\n            }\n            case 'seek': {\n                if (!(params instanceof Object)) {\n                    throw new Error('\"seek\" command has wrong params');\n                }\n                const typedParams: { trackNumber: number; time: number } = params as any;\n                const trackNumber = assertNumber(typedParams.trackNumber, 'Invalid track number for \"seek\" command');\n                const time = assertNumber(typedParams.time, 'Invalid time for \"seek\" command');\n                const timeArgs = timeToSeekArgs(time);\n                await serviceRegistry.netmdService!.gotoTime(trackNumber, timeArgs[0], timeArgs[1], timeArgs[2], timeArgs[3]);\n                break;\n            }\n        }\n        // CAVEAT: change-track might take a up to a few seconds to complete.\n        // We wait 500ms and let the monitor do further updates\n        await sleep(500);\n        try {\n            let deviceStatus = await serviceRegistry.netmdService!.getDeviceStatus();\n            dispatch(mainActions.setDeviceStatus(deviceStatus));\n        } catch (e) {\n            console.log('control: Cannot get device status');\n        }\n    };\n}\n\nexport function renameGroup({ groupIndex, newName, newFullWidthName }: { groupIndex: number; newName: string; newFullWidthName?: string }) {\n    return async function(dispatch: AppDispatch, getState: () => RootState) {\n        await serviceRegistry!.netmdService?.renameGroup(groupIndex, newName, newFullWidthName);\n        listContent()(dispatch);\n    };\n}\n\nexport function groupTracks(indexes: number[]) {\n    return async function(dispatch: AppDispatch) {\n        let begin = indexes[0];\n        let length = indexes[indexes.length - 1] - begin + 1;\n        const { netmdService } = serviceRegistry;\n\n        netmdService!.addGroup(begin, length, '');\n        listContent()(dispatch);\n    };\n}\n\nexport function deleteGroup(index: number) {\n    return async function(dispatch: AppDispatch) {\n        const { netmdService } = serviceRegistry;\n        netmdService!.deleteGroup(index);\n        listContent()(dispatch);\n    };\n}\n\nexport function dragDropTrack(sourceList: number, sourceIndex: number, targetList: number, targetIndex: number) {\n    // This code is here, because it would need to be duplicated in both netmd and netmd-mock.\n    return async function(dispatch: AppDispatch, getState: () => RootState) {\n        if (sourceList === targetList && sourceIndex === targetIndex) return;\n        dispatch(appStateActions.setLoading(true));\n        const groupedTracks = getGroupedTracks(await serviceRegistry.netmdService!.listContent());\n        // Remove the moved item from its current list\n        let movedItem = groupedTracks[sourceList].tracks.splice(sourceIndex, 1)[0];\n        let newIndex: number;\n\n        // Calculate bounds\n        let boundsStartList, boundsEndList, boundsStartIndex, boundsEndIndex, offset;\n\n        if (sourceList < targetList) {\n            boundsStartList = sourceList;\n            boundsStartIndex = sourceIndex;\n            boundsEndList = targetList;\n            boundsEndIndex = targetIndex;\n            offset = -1;\n        } else if (sourceList > targetList) {\n            boundsStartList = targetList;\n            boundsStartIndex = targetIndex;\n            boundsEndList = sourceList;\n            boundsEndIndex = sourceIndex;\n            offset = 1;\n        } else {\n            if (sourceIndex < targetIndex) {\n                boundsStartList = boundsEndList = sourceList;\n                boundsStartIndex = sourceIndex;\n                boundsEndIndex = targetIndex;\n                offset = -1;\n            } else {\n                boundsStartList = boundsEndList = targetList;\n                boundsStartIndex = targetIndex;\n                boundsEndIndex = sourceIndex;\n                offset = 1;\n            }\n        }\n\n        // Shift indices\n        for (let i = boundsStartList; i <= boundsEndList; i++) {\n            let startingIndex = i === boundsStartList ? boundsStartIndex : 0;\n            let endingIndex = i === boundsEndList ? boundsEndIndex : groupedTracks[i].tracks.length;\n            for (let j = startingIndex; j < endingIndex; j++) {\n                groupedTracks[i].tracks[j].index += offset;\n            }\n        }\n\n        // Calculate the moved track's destination index\n        if (targetList === 0) {\n            newIndex = targetIndex;\n        } else {\n            if (targetIndex === 0) {\n                let prevList = groupedTracks[targetList - 1];\n                let i = 2;\n                while (prevList && prevList.tracks.length === 0) {\n                    // Skip past all the empty lists\n                    prevList = groupedTracks[targetList - i++];\n                }\n                if (prevList) {\n                    // If there's a previous list, make this tracks's index previous list's last item's index + 1\n                    let lastIndexOfPrevList = prevList.tracks[prevList.tracks.length - 1].index;\n                    newIndex = lastIndexOfPrevList + 1;\n                } else newIndex = 0; // Else default to index 0\n            } else {\n                newIndex = groupedTracks[targetList].tracks[0].index + targetIndex;\n            }\n        }\n\n        if (movedItem.index !== newIndex) {\n            await serviceRegistry!.netmdService!.moveTrack(movedItem.index, newIndex, false);\n        }\n\n        movedItem.index = newIndex;\n        groupedTracks[targetList].tracks.splice(targetIndex, 0, movedItem);\n        let ungrouped = [];\n\n        // Recompile the groups and update them on the player\n        let normalGroups = [];\n        for (let group of groupedTracks) {\n            if (group.tracks.length === 0) continue;\n            if (group.index === -1) ungrouped.push(...group.tracks);\n            else normalGroups.push(group);\n        }\n        if (ungrouped.length)\n            normalGroups.unshift({\n                index: 0,\n                title: null,\n                fullWidthTitle: null,\n                tracks: ungrouped,\n            });\n        await serviceRegistry.netmdService!.rewriteGroups(normalGroups);\n        listContent()(dispatch);\n    };\n}\n\nexport function pair() {\n    return async function(dispatch: AppDispatch, getState: () => RootState) {\n        dispatch(appStateActions.setPairingFailed(false));\n\n        serviceRegistry.mediaSessionService?.init(); // no need to await\n        await serviceRegistry.audioExportService!.init();\n\n        try {\n            let connected = await serviceRegistry.netmdService!.connect();\n            if (connected) {\n                dispatch(appStateActions.setMainView('MAIN'));\n                return;\n            }\n        } catch (err) {\n            console.error(err);\n            // In case of error, just log and try to pair\n        }\n\n        try {\n            let paired = await serviceRegistry.netmdService!.pair();\n            if (paired) {\n                dispatch(appStateActions.setMainView('MAIN'));\n                return;\n            }\n            dispatch(batchActions([appStateActions.setPairingMessage(`Connection Failed`), appStateActions.setPairingFailed(true)]));\n        } catch (err) {\n            console.error(err);\n            let message = (err as Error).message;\n            dispatch(batchActions([appStateActions.setPairingMessage(message), appStateActions.setPairingFailed(true)]));\n        }\n    };\n}\n\nexport function listContent() {\n    return async function(dispatch: AppDispatch) {\n        // Issue loading\n        dispatch(appStateActions.setLoading(true));\n        let disc;\n        try {\n            disc = await serviceRegistry.netmdService!.listContent();\n        } catch (err) {\n            if (window.confirm(\"This disc's title seems to be corrupted, do you wish to erase it?\\nNone of the tracks will be deleted.\")) {\n                await serviceRegistry.netmdService!.wipeDiscTitleInfo();\n                disc = await serviceRegistry.netmdService!.listContent();\n            } else throw err;\n        }\n        let deviceName = await serviceRegistry.netmdService!.getDeviceName();\n        let deviceStatus = null;\n        try {\n            deviceStatus = await serviceRegistry.netmdService!.getDeviceStatus();\n        } catch (e) {\n            console.log('listContent: Cannot get device status');\n        }\n        dispatch(\n            batchActions([\n                mainActions.setDisc(disc),\n                mainActions.setDeviceName(deviceName),\n                mainActions.setDeviceStatus(deviceStatus),\n                appStateActions.setLoading(false),\n            ])\n        );\n    };\n}\n\nexport function renameTrack({ index, newName, newFullWidthName }: { index: number; newName: string; newFullWidthName?: string }) {\n    return async function(dispatch: AppDispatch) {\n        const { netmdService } = serviceRegistry;\n        dispatch(renameDialogActions.setVisible(false));\n        try {\n            await netmdService!.renameTrack(index, newName, newFullWidthName);\n        } catch (err) {\n            console.error(err);\n            dispatch(batchActions([errorDialogAction.setVisible(true), errorDialogAction.setErrorMessage(`Rename failed.`)]));\n        }\n        listContent()(dispatch);\n    };\n}\n\nexport function renameDisc({ newName, newFullWidthName }: { newName: string; newFullWidthName?: string }) {\n    return async function(dispatch: AppDispatch) {\n        const { netmdService } = serviceRegistry;\n        await netmdService!.renameDisc(\n            newName.replace(/\\/\\//g, ' /'), // Make sure the title doesn't interfere with the groups\n            newFullWidthName?.replace(/／／/g, '／')\n        );\n        dispatch(renameDialogActions.setVisible(false));\n        listContent()(dispatch);\n    };\n}\n\nexport function deleteTracks(indexes: number[]) {\n    return async function(dispatch: AppDispatch) {\n        const confirmation = window.confirm(\n            `Proceed with Delete Track${indexes.length !== 1 ? 's' : ''}? This operation cannot be undone.`\n        );\n        if (!confirmation) {\n            return;\n        }\n        const { netmdService } = serviceRegistry;\n        dispatch(appStateActions.setLoading(true));\n        await netmdService!.deleteTracks(indexes);\n        listContent()(dispatch);\n    };\n}\n\nexport function wipeDisc() {\n    return async function(dispatch: AppDispatch) {\n        const confirmation = window.confirm(`Proceed with Wipe Disc? This operation cannot be undone.`);\n        if (!confirmation) {\n            return;\n        }\n        const { netmdService } = serviceRegistry;\n        dispatch(appStateActions.setLoading(true));\n        await netmdService!.wipeDisc();\n        listContent()(dispatch);\n    };\n}\n\nexport function moveTrack(srcIndex: number, destIndex: number) {\n    return async function(dispatch: AppDispatch) {\n        const { netmdService } = serviceRegistry;\n        await netmdService!.moveTrack(srcIndex, destIndex);\n        listContent()(dispatch);\n    };\n}\n\nexport function recordTracks(indexes: number[], deviceId: string) {\n    return async function(dispatch: AppDispatch, getState: () => RootState) {\n        dispatch(\n            batchActions([\n                recordDialogAction.setVisible(true),\n                recordDialogAction.setProgress({ trackTotal: indexes.length, trackDone: 0, trackCurrent: 0, titleCurrent: '' }),\n            ])\n        );\n\n        let disc = getState().main.disc;\n        let tracks = getTracks(disc!).filter(t => indexes.indexOf(t.index) >= 0);\n\n        const { netmdService, mediaRecorderService } = serviceRegistry;\n        await serviceRegistry.netmdService!.stop();\n\n        for (let [i, track] of tracks.entries()) {\n            dispatch(\n                recordDialogAction.setProgress({\n                    trackTotal: tracks.length,\n                    trackDone: i,\n                    trackCurrent: -1,\n                    titleCurrent: track.title ?? '',\n                })\n            );\n\n            // Wait for the track to be ready to play from 0:00\n            await netmdService!.gotoTrack(track.index);\n            await netmdService!.play();\n            console.log('Waiting for track to be ready to play');\n            let position = await netmdService!.getPosition();\n            let expected = [track.index, 0, 0, 1];\n            while (position === null || !expected.every((_, i) => expected[i] === position![i])) {\n                await sleep(250);\n                position = await netmdService!.getPosition();\n            }\n            await netmdService!.pause();\n            await netmdService?.gotoTrack(track.index);\n            console.log('Track is ready to play');\n\n            // Start recording and play track\n            await mediaRecorderService?.initStream(deviceId);\n            await mediaRecorderService?.startRecording();\n            await netmdService!.play();\n\n            // Wait until track is finished\n            let durationInSec = framesToSec(track.duration);\n            // await sleep(durationInSec * 1000);\n            await sleepWithProgressCallback(durationInSec * 1000, (perc: number) => {\n                dispatch(\n                    recordDialogAction.setProgress({\n                        trackTotal: tracks.length,\n                        trackDone: i,\n                        trackCurrent: perc,\n                        titleCurrent: track.title ?? '',\n                    })\n                );\n            });\n\n            // Stop recording and download the wav\n            await mediaRecorderService?.stopRecording();\n            const fileName = track.title || `Track ${track.index + 1}`;\n            mediaRecorderService?.downloadRecorded(`${fileName}`);\n\n            await mediaRecorderService?.closeStream();\n        }\n\n        await netmdService!.stop();\n        dispatch(recordDialogAction.setVisible(false));\n    };\n}\n\nexport function setNotifyWhenFinished(value: boolean) {\n    return async function(dispatch: AppDispatch, getState: () => RootState) {\n        if (Notification.permission !== 'granted') {\n            const confirmation = window.confirm(`Enable Notification on recording completed?`);\n            if (!confirmation) {\n                return;\n            }\n            const result = await askNotificationPermission();\n            if (result !== 'granted') {\n                dispatch(appStateActions.setNotificationSupport(false));\n                dispatch(appStateActions.setNotifyWhenFinished(false));\n                return;\n            }\n        }\n        dispatch(appStateActions.setNotifyWhenFinished(value));\n    };\n}\n\nexport const WireformatDict: { [k: string]: Wireformat } = {\n    SP: Wireformat.pcm,\n    LP2: Wireformat.lp2,\n    LP105: Wireformat.l105kbps,\n    LP4: Wireformat.lp4,\n};\n\nasync function getTrackNameFromMediaTags(file: File, titleFormat: TitleFormatType) {\n    const fileData = await file.arrayBuffer();\n    const blob = new Blob([new Uint8Array(fileData)]);\n    let metadata = await mm.parseBlob(blob);\n    const title = metadata.common.title ?? 'Unknown Title';\n    const artist = metadata.common.artist ?? 'Unknown Artist';\n    const album = metadata.common.album ?? 'Unknown Album';\n    switch (titleFormat) {\n        case 'title': {\n            return title;\n        }\n        case 'artist-title': {\n            return `${artist} - ${title}`;\n        }\n        case 'title-artist': {\n            return `${title} - ${artist}`;\n        }\n        case 'album-title': {\n            return `${album} - ${title}`;\n        }\n        case 'artist-album-title': {\n            return `${artist} - ${album} - ${title}`;\n        }\n        case 'filename': {\n            let title = file.name;\n            // Remove file extension\n            const extStartIndex = title.lastIndexOf('.');\n            if (extStartIndex > 0) {\n                title = title.substring(0, extStartIndex);\n            }\n            return title;\n        }\n    }\n}\n\nexport function convertAndUpload(files: File[], requestedFormat: UploadFormat, titleFormat: TitleFormatType) {\n    return async function(dispatch: AppDispatch, getState: () => RootState) {\n        const { audioExportService, netmdService } = serviceRegistry;\n\n        await netmdService?.stop();\n        dispatch(batchActions([uploadDialogActions.setVisible(true), uploadDialogActions.setCancelUpload(false)]));\n\n        const updateProgressCallback = ({ written, encrypted, total }: { written: number; encrypted: number; total: number }) => {\n            dispatch(uploadDialogActions.setWriteProgress({ written, encrypted, total }));\n        };\n\n        const hasUploadBeenCancelled = () => {\n            return getState().uploadDialog.cancelled;\n        };\n\n        function showFinishedNotificationIfNeeded() {\n            const { notifyWhenFinished, hasNotificationSupport } = getState().appState;\n            if (!hasNotificationSupport || !notifyWhenFinished) {\n                return;\n            }\n            const notification = new Notification('MiniDisc recording completed', {\n                icon: NotificationCompleteIconUrl,\n            });\n            notification.onclick = function() {\n                window.focus();\n                this.close();\n            };\n        }\n\n        let trackUpdate: {\n            current: number;\n            converting: number;\n            total: number;\n            titleCurrent: string;\n            titleConverting: string;\n        } = {\n            current: 0,\n            converting: 0,\n            total: files.length,\n            titleCurrent: '',\n            titleConverting: '',\n        };\n        const updateTrack = () => {\n            dispatch(uploadDialogActions.setTrackProgress(trackUpdate));\n        };\n\n        let conversionIterator = async function*(files: File[]) {\n            let converted: Promise<{ file: File; data: ArrayBuffer; format: Wireformat }>[] = [];\n\n            let i = 0;\n            function convertNext() {\n                if (i === files.length || hasUploadBeenCancelled()) {\n                    trackUpdate.converting = i;\n                    trackUpdate.titleConverting = ``;\n                    updateTrack();\n                    return;\n                }\n\n                let f = files[i];\n                trackUpdate.converting = i;\n                trackUpdate.titleConverting = f.name;\n                updateTrack();\n                i++;\n\n                converted.push(\n                    new Promise(async (resolve, reject) => {\n                        let data: ArrayBuffer;\n                        let format: Wireformat;\n                        try {\n                            await audioExportService!.prepare(f);\n                            ({ data, format } = await audioExportService!.export({ requestedFormat }));\n                            convertNext();\n                            resolve({ file: f, data: data, format: format });\n                        } catch (err) {\n                            error = err;\n                            errorMessage = `${f.name}: Unsupported or unrecognized format`;\n                            reject(err);\n                        }\n                    })\n                );\n            }\n            convertNext();\n\n            let j = 0;\n            while (j < converted.length) {\n                yield await converted[j];\n                delete converted[j];\n                j++;\n            }\n        };\n\n        let disc = getState().main.disc;\n        let useFullWidth = getState().appState.fullWidthSupport;\n        let availableCharacters = getAvailableCharsForTitle(disc!);\n\n        let error: any;\n        let errorMessage = ``;\n        let i = 1;\n        for await (let item of conversionIterator(files)) {\n            if (hasUploadBeenCancelled()) {\n                break;\n            }\n\n            const { file, data, format } = item;\n\n            let title = file.name;\n            try {\n                title = await getTrackNameFromMediaTags(file, titleFormat);\n            } catch (err) {\n                console.error(err);\n            }\n\n            const fixLength = (l: number) => Math.ceil(l / 7) * 7;\n            let halfWidthTitle = title.substr(0, Math.min(getHalfWidthTitleLength(title), availableCharacters));\n            availableCharacters -= fixLength(getHalfWidthTitleLength(halfWidthTitle));\n\n            let fullWidthTitle = '';\n            if (useFullWidth) {\n                fullWidthTitle = title.substr(0, Math.min(title.length * 2, availableCharacters, 210 /* limit is 105 */) / 2);\n                availableCharacters -= fixLength(fullWidthTitle.length * 2);\n            }\n\n            trackUpdate.current = i++;\n            trackUpdate.titleCurrent = halfWidthTitle;\n            updateTrack();\n            updateProgressCallback({ written: 0, encrypted: 0, total: 100 });\n            try {\n                await netmdService?.upload(halfWidthTitle, fullWidthTitle, data, format, updateProgressCallback);\n            } catch (err) {\n                error = err;\n                errorMessage = `${file.name}: Error uploading to device. There might not be enough space left.`;\n                break;\n            }\n        }\n\n        let actionToDispatch: AnyAction[] = [uploadDialogActions.setVisible(false)];\n\n        if (error) {\n            console.error(error);\n            actionToDispatch = actionToDispatch.concat([\n                errorDialogAction.setVisible(true),\n                errorDialogAction.setErrorMessage(errorMessage),\n            ]);\n        }\n\n        dispatch(batchActions(actionToDispatch));\n        showFinishedNotificationIfNeeded();\n        listContent()(dispatch);\n    };\n}\n","import { Button, Window, WindowContent, TableRow } from 'react95';\nimport styled from 'styled-components';\n\nexport const DialogOverlay = styled.div`\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 2;\n`;\n\nexport const DialogWindow = styled(Window)`\n    width: 80%;\n    left: 10%;\n    top: 20%;\n`;\n\nexport const DialogFooter = styled.div`\n    display: flex;\n    justify-content: flex-end;\n    padding-top: 16px;\n    width: 100%;\n`;\n\nexport const DialogWindowContent = styled(WindowContent)`\n    flex: 1 1 auto;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n`;\n\nexport const FooterButton = styled(Button)`\n    margin-left: 16px;\n    min-width: 90px;\n`;\n\nexport const CustomTableRow = styled(TableRow)`\n    cursor: default;\n    &:hover {\n        color: ${(styled: any) => styled.theme.canvasText};\n        background-color: initial;\n    }\n`;\n\nexport const WindowCloseIcon = styled.span`\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    margin-left: -1px;\n    margin-top: -1px;\n    transform: rotateZ(45deg);\n    position: relative;\n\n    &:before {\n        content: '';\n        position: absolute;\n        height: 100%;\n        width: 3px;\n        left: 50%;\n        transform: translateX(-50%);\n        background-color: #0a0a0a;\n    }\n\n    &:after {\n        content: '';\n        position: absolute;\n        height: 3px;\n        width: 100%;\n        left: 0;\n        top: 50%;\n        transform: translateY(-50%);\n        background-color: #0a0a0a;\n    }\n`;\n\nexport const FloatingButton = styled.button`\n    width: 60px;\n    height: 60px;\n    position: absolute;\n    bottom: 40px;\n    right: 24px;\n    z-index: 1;\n    border-radius: 50%;\n    background: rgb(185, 106, 201);\n    border-width: 4px;\n    border-style: solid;\n    border-color: rgb(233, 128, 252) rgb(111, 45, 189) rgb(111, 45, 189) rgb(233, 128, 252);\n    box-shadow: rgb(0 0 0 / 45%) 4px 4px 10px 0px;\n\n    &:after {\n        content: '';\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAADKgAAAyoBEJdYGAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHWSURBVHic7d3BbdYwGIDhz1wYAakXNmOGdhKY4d+MC1JH4BQurcQ1EmmE3+cZwLbkV04OjrKO45idrLWeZ+b7RcO/HMfx46Kxb/Hp7gVwLwHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAuB0DePpPx77F2umXMWutzzPzc2a+XDTF68x8PY7j90Xjf7g1M893L+IfeZqZb3Pd5r97nZnHzPy6eJ4PsWZmnyOA03Z8B+AEAcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAohzLfy8va6F+zDklO0+DNnqEfC2MY8Lp3jstPkzmwXw5sqjeYtj/287BsAJAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxAogTQJwA4gQQJ4A4AcQJIE4AcQKIE0CcAOIEECeAOAHECSBOAHECiBNAnADiBBAngDgBxAkgTgBxfwAw2y4BcmRzJgAAAABJRU5ErkJggg==');\n        background-size: 30px;\n        background-repeat: no-repeat;\n        filter: drop-shadow(rgb(233, 128, 252) 1px 1px 0px) drop-shadow(rgb(111, 45, 189) -1px -1px 0px);\n        background-position: center center;\n    }\n\n    &:active {\n        border-width: 4px;\n        border-style: solid;\n        border-color: rgb(111, 45, 189) rgb(233, 128, 252) rgb(233, 128, 252) rgb(111, 45, 189);\n        box-shadow: rgb(0 0 0 / 55%) 3px 3px 5px 0px;\n    }\n`;\n","import React from 'react';\nimport { Button, WindowHeader, Anchor } from 'react95';\nimport { FooterButton, DialogOverlay, DialogWindow, DialogFooter, DialogWindowContent, WindowCloseIcon } from './common';\n\nexport const W95AboutDialog = (props: { visible: boolean; handleClose: () => void }) => {\n    if (!props.visible) {\n        return null;\n    }\n\n    return (\n        <DialogOverlay>\n            <DialogWindow>\n                <WindowHeader style={{ display: 'flex', alignItems: 'center' }}>\n                    <span style={{ flex: '1 1 auto' }}>About Web MiniDisc</span>\n                    <Button onClick={props.handleClose}>\n                        <WindowCloseIcon />\n                    </Button>\n                </WindowHeader>\n                <DialogWindowContent>\n                    Web MiniDisc uses\n                    <ul>\n                        <li>\n                            <Anchor rel=\"noopener noreferrer\" href=\"https://www.ffmpeg.org/\" target=\"_blank\">\n                                FFmpeg\n                            </Anchor>{' '}\n                            and{' '}\n                            <Anchor rel=\"noopener noreferrer\" href=\"https://github.com/ffmpegjs/FFmpeg\" target=\"_blank\">\n                                ffmpegjs\n                            </Anchor>\n                            , to read your audio files (wav, mp3, ogg, mp4, etc...).\n                        </li>\n                        <li>\n                            <Anchor rel=\"noopener noreferrer\" href=\"https://github.com/dcherednik/atracdenc/\" target=\"_blank\">\n                                Atracdenc\n                            </Anchor>\n                            , to support atrac3 encoding (lp2, lp4 audio formats).\n                        </li>\n                        <li>\n                            <Anchor rel=\"noopener noreferrer\" href=\"https://emscripten.org/\" target=\"_blank\">\n                                Emscripten\n                            </Anchor>\n                            , to run both FFmpeg and Atracdenc in the browser.\n                        </li>\n                        <li>\n                            <Anchor rel=\"noopener noreferrer\" href=\"https://github.com/cybercase/netmd-js\" target=\"_blank\">\n                                netmd-js\n                            </Anchor>\n                            , to send commands to NetMD devices using Javascript.\n                        </li>\n                        <li>\n                            <Anchor rel=\"noopener noreferrer\" href=\"https://github.com/glaubitz/linux-minidisc\" target=\"_blank\">\n                                linux-minidisc\n                            </Anchor>\n                            , to make the netmd-js project possible.\n                        </li>\n                        <li>\n                            <Anchor rel=\"noopener noreferrer\" href=\"https://react95.io/\" target=\"_blank\">\n                                react85\n                            </Anchor>\n                            , to build the vintage user interface.\n                        </li>\n                        <li>\n                            <Anchor rel=\"noopener noreferrer\" href=\"https://material-ui.com/\" target=\"_blank\">\n                                material-ui\n                            </Anchor>\n                            , to build the user interface.\n                        </li>\n                    </ul>\n                    <DialogFooter>\n                        <FooterButton onClick={props.handleClose}>OK</FooterButton>\n                    </DialogFooter>\n                </DialogWindowContent>\n            </DialogWindow>\n        </DialogOverlay>\n    );\n};\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useShallowEqualSelector } from '../utils';\n\nimport { actions as appActions } from '../redux/app-feature';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Button from '@material-ui/core/Button';\nimport Link from '@material-ui/core/Link';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport { W95AboutDialog } from './win95/about-dialog';\n\nconst Transition = React.forwardRef(function Transition(\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\n    ref: React.Ref<unknown>\n) {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport const AboutDialog = (props: {}) => {\n    const dispatch = useDispatch();\n\n    let visible = useShallowEqualSelector(state => state.appState.aboutDialogVisible);\n    const vintageMode = useShallowEqualSelector(state => state.appState.vintageMode);\n\n    const handleClose = () => {\n        dispatch(appActions.showAboutDialog(false));\n    };\n\n    if (vintageMode) {\n        const p = {\n            visible,\n            handleClose,\n        };\n        return <W95AboutDialog {...p} />;\n    }\n\n    return (\n        <Dialog\n            open={visible}\n            maxWidth={'sm'}\n            fullWidth={true}\n            TransitionComponent={Transition as any}\n            aria-labelledby=\"about-dialog-slide-title\"\n        >\n            <DialogTitle id=\"about-dialog-slide-title\">About Web MiniDisc</DialogTitle>\n            <DialogContent>\n                <DialogContentText>Web MiniDisc uses</DialogContentText>\n                <ul>\n                    <li>\n                        <Link rel=\"noopener noreferrer\" href=\"https://www.ffmpeg.org/\" target=\"_blank\">\n                            FFmpeg\n                        </Link>{' '}\n                        and{' '}\n                        <Link rel=\"noopener noreferrer\" href=\"https://github.com/ffmpegjs/FFmpeg\" target=\"_blank\">\n                            ffmpegjs\n                        </Link>\n                        , to read your audio files (wav, mp3, ogg, mp4, etc...).\n                    </li>\n                    <li>\n                        <Link rel=\"noopener noreferrer\" href=\"https://github.com/dcherednik/atracdenc/\" target=\"_blank\">\n                            Atracdenc\n                        </Link>\n                        , to support atrac3 encoding (lp2, lp4 audio formats).\n                    </li>\n                    <li>\n                        <Link rel=\"noopener noreferrer\" href=\"https://emscripten.org/\" target=\"_blank\">\n                            Emscripten\n                        </Link>\n                        , to run both FFmpeg and Atracdenc in the browser.\n                    </li>\n                    <li>\n                        <Link rel=\"noopener noreferrer\" href=\"https://github.com/cybercase/netmd-js\" target=\"_blank\">\n                            netmd-js\n                        </Link>\n                        , to send commands to NetMD devices using Javascript.\n                    </li>\n                    <li>\n                        <Link rel=\"noopener noreferrer\" href=\"https://github.com/glaubitz/linux-minidisc\" target=\"_blank\">\n                            linux-minidisc\n                        </Link>\n                        , to make the netmd-js project possible.\n                    </li>\n                    <li>\n                        <Link rel=\"noopener noreferrer\" href=\"https://react95.io/\" target=\"_blank\">\n                            react95\n                        </Link>\n                        , to build the vintage user interface.\n                    </li>\n                    <li>\n                        <Link rel=\"noopener noreferrer\" href=\"https://material-ui.com/\" target=\"_blank\">\n                            material-ui\n                        </Link>\n                        , to build the user interface.\n                    </li>\n                </ul>\n                <DialogContentText>Attribution</DialogContentText>\n                <ul>\n                    <li>\n                        MiniDisc logo from{' '}\n                        <Link rel=\"noopener noreferrer\" href=\"https://en.wikipedia.org/wiki/MiniDisc\" target=\"_blank\">\n                            https://en.wikipedia.org/wiki/MiniDisc\n                        </Link>\n                    </li>\n                    <li>\n                        MiniDisc icon from{' '}\n                        <Link\n                            rel=\"noopener noreferrer\"\n                            href=\"https://www.deviantart.com/blinkybill/art/Sony-MiniDisc-Plastic-Icon-473812540\"\n                            target=\"_blank\"\n                        >\n                            http://fav.me/d7u3g3g\n                        </Link>\n                    </li>\n                </ul>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose}>Close</Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n","import React from 'react';\nimport { List, ListItem, Checkbox, Divider } from 'react95';\nimport { Views } from '../../redux/app-feature';\n\nexport const W95TopMenu = (props: {\n    mainView: Views;\n    onClick?: () => void;\n    handleWipeDisc: () => void;\n    handleRefresh: () => void;\n    handleRenameDisc: () => void;\n    handleExit: () => void;\n    handleShowAbout: () => void;\n    handleVintageMode: () => void;\n}) => {\n    const items = [];\n\n    if (props.mainView === 'MAIN') {\n        items.push(\n            <ListItem key=\"update\" onClick={props.handleRefresh}>\n                Reload TOC\n            </ListItem>\n        );\n        items.push(\n            <ListItem key=\"title\" onClick={props.handleRenameDisc}>\n                Rename Disc\n            </ListItem>\n        );\n        items.push(\n            <ListItem key=\"wipe\" onClick={props.handleWipeDisc}>\n                Wipe Disc\n            </ListItem>\n        );\n        items.push(\n            <ListItem key=\"vintage\" onClick={props.handleVintageMode}>\n                <Checkbox checked name=\"vintageMode\" variant=\"menu\" value=\"vintageMode\" label=\"Retro Mode (beta)\" defaultChecked />\n            </ListItem>\n        );\n\n        items.push(<Divider key=\"d1\" />);\n        items.push(\n            <ListItem key=\"exit\" onClick={props.handleExit}>\n                Exit\n            </ListItem>\n        );\n        items.push(<Divider key=\"d2\" />);\n    }\n    items.push(\n        <ListItem key=\"about\" onClick={props.handleShowAbout}>\n            About...\n        </ListItem>\n    );\n    items.push(\n        <ListItem key={`menu-gh`}>\n            <a rel=\"noopener noreferrer\" href=\"https://github.com/cybercase/webminidisc\" target=\"_blank\">\n                Fork me on GitHub\n            </a>\n        </ListItem>\n    );\n    return (\n        <List\n            style={{\n                position: 'absolute',\n                left: '0',\n                top: '100%',\n                zIndex: '9999',\n            }}\n            onClick={props.onClick}\n        >\n            {items}\n        </List>\n    );\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { batchActions } from 'redux-batched-actions';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Divider from '@material-ui/core/Divider';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\n\nimport { wipeDisc, listContent } from '../redux/actions';\nimport { actions as appActions } from '../redux/app-feature';\nimport { actions as renameDialogActions } from '../redux/rename-dialog-feature';\nimport { useShallowEqualSelector } from '../utils';\nimport Link from '@material-ui/core/Link';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport EditIcon from '@material-ui/icons/Edit';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport InfoIcon from '@material-ui/icons/Info';\nimport ToggleOffIcon from '@material-ui/icons/ToggleOff';\nimport ToggleOnIcon from '@material-ui/icons/ToggleOn';\nimport Win95Icon from '../images/win95/win95.png';\nimport HelpIcon from '@material-ui/icons/Help';\n\nimport { W95TopMenu } from './win95/topmenu';\n\nconst useStyles = makeStyles(theme => ({\n    listItemIcon: {\n        minWidth: theme.spacing(5),\n    },\n    toolTippedText: {\n        textDecoration: 'underline',\n        textDecorationStyle: 'dotted',\n    },\n}));\n\nexport const TopMenu = function(props: { onClick?: () => void }) {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    let { mainView, darkMode, vintageMode, fullWidthSupport } = useShallowEqualSelector(state => state.appState);\n    let discTitle = useShallowEqualSelector(state => state.main.disc?.title ?? ``);\n    let fullWidthDiscTitle = useShallowEqualSelector(state => state.main.disc?.fullWidthTitle ?? ``);\n\n    const githubLinkRef = React.useRef<null | HTMLAnchorElement>(null);\n    const helpLinkRef = React.useRef<null | HTMLAnchorElement>(null);\n    const [menuAnchorEl, setMenuAnchorEl] = React.useState<null | HTMLElement>(null);\n    const menuOpen = Boolean(menuAnchorEl);\n\n    const handleMenuOpen = useCallback(\n        (event: React.MouseEvent<HTMLElement>) => {\n            setMenuAnchorEl(event.currentTarget);\n        },\n        [setMenuAnchorEl]\n    );\n\n    const handleDarkMode = useCallback(() => {\n        dispatch(appActions.setDarkMode(!darkMode));\n    }, [dispatch, darkMode]);\n\n    const handleVintageMode = useCallback(() => {\n        dispatch(appActions.setVintageMode(!vintageMode));\n    }, [dispatch, vintageMode]);\n\n    const handleMenuClose = useCallback(() => {\n        setMenuAnchorEl(null);\n    }, [setMenuAnchorEl]);\n\n    const handleWipeDisc = useCallback(() => {\n        dispatch(wipeDisc());\n        handleMenuClose();\n    }, [dispatch, handleMenuClose]);\n\n    const handleAllowFullWidth = useCallback(() => {\n        dispatch(appActions.setFullWidthSupport(!fullWidthSupport));\n    }, [dispatch, fullWidthSupport]);\n\n    const handleRefresh = useCallback(() => {\n        dispatch(listContent());\n        handleMenuClose();\n    }, [dispatch, handleMenuClose]);\n\n    const handleRenameDisc = useCallback(() => {\n        dispatch(\n            batchActions([\n                renameDialogActions.setVisible(true),\n                renameDialogActions.setCurrentName(discTitle),\n                renameDialogActions.setGroupIndex(null),\n                renameDialogActions.setCurrentFullWidthName(fullWidthDiscTitle),\n                renameDialogActions.setIndex(-1),\n            ])\n        );\n        handleMenuClose();\n    }, [dispatch, handleMenuClose, discTitle, fullWidthDiscTitle]);\n\n    const handleExit = useCallback(() => {\n        dispatch(appActions.setMainView('WELCOME'));\n        handleMenuClose();\n    }, [dispatch, handleMenuClose]);\n\n    const handleShowAbout = useCallback(() => {\n        dispatch(appActions.showAboutDialog(true));\n        handleMenuClose();\n    }, [dispatch, handleMenuClose]);\n\n    const handleGithubLink = useCallback(\n        (event: React.MouseEvent<HTMLElement>) => {\n            event.stopPropagation();\n            if (event.target !== githubLinkRef.current) {\n                // Prevent opening the link twice\n                githubLinkRef.current?.click();\n            }\n            handleMenuClose();\n        },\n        [handleMenuClose]\n    );\n\n    const handleHelpLink = useCallback(\n        (event: React.MouseEvent<HTMLElement>) => {\n            event.stopPropagation();\n            if (event.target !== helpLinkRef.current) {\n                // Prevent opening the link twice\n                helpLinkRef.current?.click();\n            }\n            handleMenuClose();\n        },\n        [handleMenuClose]\n    );\n\n    const menuItems = [];\n    if (mainView === 'MAIN') {\n        menuItems.push(\n            <MenuItem key=\"update\" onClick={handleRefresh}>\n                <ListItemIcon className={classes.listItemIcon}>\n                    <RefreshIcon fontSize=\"small\" />\n                </ListItemIcon>\n                <ListItemText>Reload TOC</ListItemText>\n            </MenuItem>\n        );\n        menuItems.push(\n            <MenuItem key=\"title\" onClick={handleRenameDisc}>\n                <ListItemIcon className={classes.listItemIcon}>\n                    <EditIcon fontSize=\"small\" />\n                </ListItemIcon>\n                <ListItemText>Rename Disc</ListItemText>\n            </MenuItem>\n        );\n        menuItems.push(\n            <MenuItem key=\"wipe\" onClick={handleWipeDisc}>\n                <ListItemIcon className={classes.listItemIcon}>\n                    <DeleteForeverIcon fontSize=\"small\" />\n                </ListItemIcon>\n                <ListItemText>Wipe Disc</ListItemText>\n            </MenuItem>\n        );\n        menuItems.push(\n            <MenuItem key=\"exit\" onClick={handleExit}>\n                <ListItemIcon className={classes.listItemIcon}>\n                    <ExitToAppIcon fontSize=\"small\" />\n                </ListItemIcon>\n                <ListItemText>Exit</ListItemText>\n            </MenuItem>\n        );\n    }\n    if (mainView === 'MAIN') {\n        menuItems.push(<Divider key=\"action-divider\" />);\n        menuItems.push(\n            <MenuItem key=\"allowFullWidth\" onClick={handleAllowFullWidth}>\n                <ListItemIcon className={classes.listItemIcon}>\n                    {fullWidthSupport ? <ToggleOnIcon fontSize=\"small\" /> : <ToggleOffIcon fontSize=\"small\" />}\n                </ListItemIcon>\n                <ListItemText>\n                    {fullWidthSupport ? `Disable ` : `Enable `}\n                    <Tooltip\n                        title=\"This advanced feature enables the use of Hiragana and Kanji alphabets. More about this in Support and FAQ.\"\n                        arrow\n                    >\n                        <span className={classes.toolTippedText}>Full-Width Title Editing</span>\n                    </Tooltip>\n                </ListItemText>\n            </MenuItem>\n        );\n    }\n    menuItems.push(\n        <MenuItem key=\"darkMode\" onClick={handleDarkMode}>\n            <ListItemIcon className={classes.listItemIcon}>\n                {/* <Switch name=\"darkModeSwitch\" inputProps={{ 'aria-label': 'Dark Mode switch' }} size=\"small\" /> */}\n                {darkMode ? <ToggleOnIcon fontSize=\"small\" /> : <ToggleOffIcon fontSize=\"small\" />}\n            </ListItemIcon>\n            <ListItemText>Dark Mode</ListItemText>\n        </MenuItem>\n    );\n    if (mainView === 'MAIN') {\n        menuItems.push(\n            <MenuItem key=\"vintageMode\" onClick={handleVintageMode}>\n                <ListItemIcon className={classes.listItemIcon}>\n                    <img alt=\"Windows 95\" src={Win95Icon} width=\"24px\" height=\"24px\" />\n                </ListItemIcon>\n                <ListItemText>Retro Mode (beta)</ListItemText>\n            </MenuItem>\n        );\n    }\n    if (mainView === 'MAIN') {\n        menuItems.push(<Divider key=\"feature-divider\" />);\n    }\n    menuItems.push(\n        <MenuItem key=\"about\" onClick={handleShowAbout}>\n            <ListItemIcon className={classes.listItemIcon}>\n                <InfoIcon fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText>About</ListItemText>\n        </MenuItem>\n    );\n    menuItems.push(\n        <MenuItem key=\"support\" onClick={handleHelpLink}>\n            <ListItemIcon className={classes.listItemIcon}>\n                <HelpIcon fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText>\n                <Link\n                    rel=\"noopener noreferrer\"\n                    href=\"https://github.com/cybercase/webminidisc/wiki/Support-and-FAQ\"\n                    target=\"_blank\"\n                    ref={helpLinkRef}\n                    onClick={handleHelpLink}\n                >\n                    Support and FAQ\n                </Link>\n            </ListItemText>\n        </MenuItem>\n    );\n    menuItems.push(\n        <MenuItem key=\"github\" onClick={handleGithubLink}>\n            <ListItemIcon className={classes.listItemIcon}>\n                <GitHubIcon fontSize=\"small\" />\n            </ListItemIcon>\n            <ListItemText>\n                <Link\n                    rel=\"noopener noreferrer\"\n                    href=\"https://github.com/cybercase/webminidisc\"\n                    target=\"_blank\"\n                    ref={githubLinkRef}\n                    onClick={handleGithubLink}\n                >\n                    Fork me on GitHub\n                </Link>\n            </ListItemText>\n        </MenuItem>\n    );\n\n    if (vintageMode) {\n        const p = {\n            mainView,\n            onClick: props.onClick,\n            handleWipeDisc,\n            handleRefresh,\n            handleRenameDisc,\n            handleExit,\n            handleShowAbout,\n            handleVintageMode,\n        };\n        return <W95TopMenu {...p} />;\n    }\n    return (\n        <React.Fragment>\n            <IconButton aria-label=\"actions\" aria-controls=\"actions-menu\" aria-haspopup=\"true\" onClick={handleMenuOpen}>\n                <MoreVertIcon />\n            </IconButton>\n            <Menu id=\"actions-menu\" anchorEl={menuAnchorEl} keepMounted open={menuOpen} onClose={handleMenuClose}>\n                {menuItems}\n            </Menu>\n        </React.Fragment>\n    );\n};\n","import React from 'react';\nimport { Button, WindowContent } from 'react95';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { pair } from '../../redux/actions';\nimport { Dispatch } from '@reduxjs/toolkit';\nimport { AboutDialog } from '../about-dialog';\n\nconst useStyles = makeStyles(theme => ({\n    pairingMessage: {\n        color: 'red',\n        marginTop: theme.spacing(1),\n    },\n    windowContent: {\n        flex: '1 1 auto',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n}));\n\nexport interface W95WelcomeProps {\n    dispatch: Dispatch<any>;\n    pairingFailed: boolean;\n    pairingMessage: string;\n}\n\nexport const W95Welcome = (props: W95WelcomeProps) => {\n    let { dispatch, pairingFailed, pairingMessage } = props;\n    const classes = useStyles();\n    return (\n        <>\n            <WindowContent className={classes.windowContent}>\n                <p style={{ paddingBottom: 8 }}>Press the button to connect to a NetMD device</p>\n                <Button style={{ minWidth: 90 }} onClick={() => dispatch(pair())}>\n                    Connect\n                </Button>\n                <p style={{ visibility: pairingFailed ? 'visible' : 'hidden' }} className={classes.pairingMessage}>\n                    {pairingMessage}\n                </p>\n            </WindowContent>\n            <AboutDialog />\n        </>\n    );\n};\n","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { pair } from '../redux/actions';\n\nimport { useShallowEqualSelector } from '../utils';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Box from '@material-ui/core/Box';\nimport Link from '@material-ui/core/Link';\n\nimport { AboutDialog } from './about-dialog';\nimport { TopMenu } from './topmenu';\nimport ChromeIconPath from '../images/chrome-icon.svg';\nimport { W95Welcome } from './win95/welcome';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\n\nconst useStyles = makeStyles(theme => ({\n    main: {\n        position: 'relative',\n        flex: '1 1 auto',\n        display: 'flex',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    button: {\n        marginTop: theme.spacing(3),\n        minWidth: 150,\n    },\n    spacing: {\n        marginTop: theme.spacing(1),\n    },\n    chromeLogo: {\n        marginTop: theme.spacing(1),\n        width: 96,\n        height: 96,\n    },\n    why: {\n        alignSelf: 'flex-start',\n        marginTop: theme.spacing(3),\n    },\n    headBox: {\n        display: 'flex',\n        justifyContent: 'space-between',\n    },\n    connectContainer: {\n        flex: '1 1 auto',\n        display: 'flex',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    supportContainer: {\n        flex: '1 1 auto',\n        display: 'flex',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n}));\n\nexport const Welcome = (props: {}) => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const { browserSupported, pairingFailed, pairingMessage, vintageMode } = useShallowEqualSelector(state => state.appState);\n    if (pairingMessage.toLowerCase().match(/denied/)) {\n        // show linux instructions\n    }\n    // Access denied.\n\n    const [showWhyUnsupported, setWhyUnsupported] = useState(false);\n    const handleLearnWhy = (event: React.SyntheticEvent) => {\n        event.preventDefault();\n        setWhyUnsupported(true);\n    };\n\n    if (vintageMode) {\n        const p = {\n            dispatch,\n            pairingFailed,\n            pairingMessage,\n        };\n        return <W95Welcome {...p}></W95Welcome>;\n    }\n\n    return (\n        <React.Fragment>\n            <Box className={classes.headBox}>\n                <Typography component=\"h1\" variant=\"h4\">\n                    Web MiniDisc\n                </Typography>\n                <TopMenu />\n            </Box>\n            <Typography component=\"h2\" variant=\"body2\">\n                Brings NetMD Devices to the Web\n            </Typography>\n            <Box className={classes.main}>\n                {browserSupported ? (\n                    <React.Fragment>\n                        <div className={classes.connectContainer}>\n                            <Typography component=\"h2\" variant=\"subtitle1\" align=\"center\" className={classes.spacing}>\n                                Press the button to connect to a NetMD device\n                            </Typography>\n\n                            <Button variant=\"contained\" color=\"primary\" onClick={() => dispatch(pair())} className={classes.button}>\n                                Connect\n                            </Button>\n\n                            <FormControl\n                                error={true}\n                                className={classes.spacing}\n                                style={{ visibility: pairingFailed ? 'visible' : 'hidden' }}\n                            >\n                                <FormHelperText>{pairingMessage}</FormHelperText>\n                            </FormControl>\n                        </div>\n                        <div>\n                            <Typography component=\"h2\" variant=\"subtitle1\" align=\"center\" className={classes.spacing}>\n                                <Link\n                                    rel=\"noopener noreferrer\"\n                                    target=\"_blank\"\n                                    href=\"https://github.com/cybercase/webminidisc/wiki/Support-and-FAQ\"\n                                >\n                                    <span style={{ verticalAlign: 'middle' }}>Support and FAQ</span>{' '}\n                                    <OpenInNewIcon style={{ verticalAlign: 'middle' }} fontSize=\"inherit\" />\n                                </Link>\n                            </Typography>\n                        </div>\n                    </React.Fragment>\n                ) : (\n                    <React.Fragment>\n                        <Typography component=\"h2\" variant=\"subtitle1\" align=\"center\" className={classes.spacing}>\n                            This Web browser is not supported.&nbsp;\n                            <Link rel=\"noopener noreferrer\" href=\"#\" onClick={handleLearnWhy}>\n                                Learn Why\n                            </Link>\n                        </Typography>\n\n                        <Link rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://www.google.com/chrome/\">\n                            <img alt=\"Chrome Logo\" src={ChromeIconPath} className={classes.chromeLogo} />\n                        </Link>\n\n                        <Typography component=\"h2\" variant=\"subtitle1\" align=\"center\" className={classes.spacing}>\n                            Try using{' '}\n                            <Link rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://www.google.com/chrome/\">\n                                Chrome\n                            </Link>{' '}\n                            instead\n                        </Typography>\n\n                        {showWhyUnsupported ? (\n                            <>\n                                <Typography component=\"p\" variant=\"body2\" className={classes.why}>\n                                    Web MiniDisc requires a browser that supports both{' '}\n                                    <Link rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://wicg.github.io/webusb/\">\n                                        WebUSB\n                                    </Link>{' '}\n                                    and{' '}\n                                    <Link rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://webassembly.org/\">\n                                        WebAssembly\n                                    </Link>\n                                    .\n                                </Typography>\n                                <ul>\n                                    <li>WebUSB is needed to control the NetMD device via the USB connection to your computer.</li>\n                                    <li>WebAssembly is used to convert the music to a MiniDisc compatible format</li>\n                                </ul>\n                            </>\n                        ) : null}\n                    </React.Fragment>\n                )}\n            </Box>\n            <AboutDialog />\n        </React.Fragment>\n    );\n};\n","import React, { useCallback } from 'react';\nimport clsx from 'clsx';\n\nimport { EncodingName } from '../utils';\n\nimport { formatTimeFromFrames, Track, Group } from 'netmd-js';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport * as BadgeImpl from '@material-ui/core/Badge/Badge';\n\nimport DragIndicator from '@material-ui/icons/DragIndicator';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport IconButton from '@material-ui/core/IconButton';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport { DraggableProvided } from 'react-beautiful-dnd';\n\nconst useStyles = makeStyles(theme => ({\n    currentTrackRow: {\n        color: theme.palette.primary.main,\n        '& > td': {\n            color: 'inherit',\n        },\n    },\n    inGroupTrackRow: {\n        '& > $indexCell': {\n            transform: `translateX(${theme.spacing(3)}px)`,\n        },\n        '& > $titleCell': {\n            transform: `translateX(${theme.spacing(3)}px)`,\n        },\n    },\n    playButtonInTrackList: {\n        display: 'none',\n    },\n    trackRow: {\n        '&:hover': {\n            '& $playButtonInTrackList': {\n                display: 'inline-flex',\n            },\n            '& $trackIndex': {\n                display: 'none',\n            },\n        },\n    },\n    controlButtonInTrackCommon: {\n        width: theme.spacing(2),\n        height: theme.spacing(2),\n        verticalAlign: 'middle',\n        marginLeft: theme.spacing(-0.5),\n    },\n    formatBadge: {\n        ...(BadgeImpl as any).styles(theme).badge,\n        ...(BadgeImpl as any).styles(theme).colorPrimary,\n        position: 'static',\n        display: 'inline-flex',\n        border: `2px solid ${theme.palette.background.paper}`,\n        padding: '0 4px',\n        verticalAlign: 'middle',\n        width: theme.spacing(4.5),\n        marginRight: theme.spacing(0.5),\n    },\n    durationCell: {\n        whiteSpace: 'nowrap',\n    },\n    durationCellSecondary: {\n        whiteSpace: 'nowrap',\n        color: theme.palette.text.secondary,\n    },\n    durationCellTime: {\n        verticalAlign: 'middle',\n    },\n    titleCell: {\n        overflow: 'hidden',\n        maxWidth: '40ch',\n        textOverflow: 'ellipsis',\n        // whiteSpace: 'nowrap',\n    },\n    deleteGroupButton: {\n        display: 'none',\n    },\n    indexCell: {\n        whiteSpace: 'nowrap',\n        paddingRight: 0,\n        width: theme.spacing(4),\n    },\n    trackIndex: {\n        display: 'inline-block',\n        height: '16px',\n        width: '16px',\n    },\n    dragHandle: {\n        width: 20,\n        padding: `${theme.spacing(0.5)}px 0 0 0`,\n    },\n    dragHandleEmpty: {\n        width: 20,\n        padding: `${theme.spacing(0.5)}px 0 0 0`,\n    },\n    groupFolderIcon: {},\n    groupHeadRow: {\n        '&:hover': {\n            '& $deleteGroupButton': {\n                display: 'inline-flex',\n            },\n            '& $groupFolderIcon': {\n                display: 'none',\n            },\n        },\n    },\n}));\n\ninterface TrackRowProps {\n    track: Track;\n    inGroup: boolean;\n    isSelected: boolean;\n    trackStatus: 'playing' | 'paused' | 'none';\n    draggableProvided: DraggableProvided;\n    onSelect: (event: React.MouseEvent, trackIdx: number) => void;\n    onRename: (event: React.MouseEvent, trackIdx: number) => void;\n    onTogglePlayPause: (event: React.MouseEvent, trackIdx: number) => void;\n}\n\nexport function TrackRow({\n    track,\n    inGroup,\n    isSelected,\n    draggableProvided,\n    trackStatus,\n    onSelect,\n    onRename,\n    onTogglePlayPause,\n}: TrackRowProps) {\n    const classes = useStyles();\n\n    const handleRename = useCallback(event => onRename(event, track.index), [track.index, onRename]);\n    const handleSelect = useCallback(event => onSelect(event, track.index), [track.index, onSelect]);\n    const handlePlayPause: React.MouseEventHandler = useCallback(\n        event => {\n            event.stopPropagation();\n            onTogglePlayPause(event, track.index);\n        },\n        [track.index, onTogglePlayPause]\n    );\n    const handleDoubleClickOnPlayButton: React.MouseEventHandler = useCallback(event => event.stopPropagation(), []);\n    const isPlayingOrPaused = trackStatus === 'playing' || trackStatus === 'paused';\n\n    return (\n        <TableRow\n            {...draggableProvided.draggableProps}\n            ref={draggableProvided.innerRef}\n            hover\n            selected={isSelected}\n            onDoubleClick={handleRename}\n            onClick={handleSelect}\n            color=\"inherit\"\n            className={clsx(classes.trackRow, { [classes.inGroupTrackRow]: inGroup, [classes.currentTrackRow]: isPlayingOrPaused })}\n        >\n            <TableCell className={classes.dragHandle} {...draggableProvided.dragHandleProps} onClick={event => event.stopPropagation()}>\n                <DragIndicator fontSize=\"small\" color=\"disabled\" />\n            </TableCell>\n            <TableCell className={classes.indexCell}>\n                <span className={classes.trackIndex}>{track.index + 1}</span>\n                <IconButton\n                    aria-label=\"delete\"\n                    className={clsx(classes.controlButtonInTrackCommon, classes.playButtonInTrackList)}\n                    size=\"small\"\n                    onClick={handlePlayPause}\n                    onDoubleClick={handleDoubleClickOnPlayButton}\n                >\n                    {trackStatus === 'paused' || trackStatus === 'none' ? (\n                        <PlayArrowIcon fontSize=\"inherit\" />\n                    ) : (\n                        <PauseIcon fontSize=\"inherit\" />\n                    )}\n                </IconButton>\n            </TableCell>\n            <TableCell className={classes.titleCell} title={track.title ?? ''}>\n                {track.fullWidthTitle ? `${track.fullWidthTitle} / ` : ``}\n                {track.title || `No Title`}\n            </TableCell>\n            <TableCell align=\"right\" className={classes.durationCell}>\n                <span className={classes.formatBadge}>{EncodingName[track.encoding]}</span>\n                <span className={classes.durationCellTime}>{formatTimeFromFrames(track.duration, false)}</span>\n            </TableCell>\n        </TableRow>\n    );\n}\n\ninterface GroupRowProps {\n    group: Group;\n    onRename: (event: React.MouseEvent, groupIdx: number) => void;\n    onDelete: (event: React.MouseEvent, groupIdx: number) => void;\n}\n\nexport function GroupRow({ group, onRename, onDelete }: GroupRowProps) {\n    const classes = useStyles();\n\n    const handleDelete = useCallback((event: React.MouseEvent) => onDelete(event, group.index), [onDelete, group]);\n    const handleRename = useCallback((event: React.MouseEvent) => onRename(event, group.index), [onRename, group]);\n    return (\n        <TableRow hover className={classes.groupHeadRow} onDoubleClick={handleRename}>\n            <TableCell className={classes.dragHandleEmpty}></TableCell>\n            <TableCell className={classes.indexCell}>\n                <FolderIcon className={clsx(classes.controlButtonInTrackCommon, classes.groupFolderIcon)} />\n                <IconButton\n                    aria-label=\"delete\"\n                    className={clsx(classes.controlButtonInTrackCommon, classes.deleteGroupButton)}\n                    size=\"small\"\n                    onClick={handleDelete}\n                >\n                    <DeleteIcon fontSize=\"inherit\" />\n                </IconButton>\n            </TableCell>\n            <TableCell className={classes.titleCell} title={group.title!}>\n                {group.fullWidthTitle ? `${group.fullWidthTitle} / ` : ``}\n                {group.title || `No Name`}\n            </TableCell>\n            <TableCell align=\"right\" className={classes.durationCellSecondary}>\n                <span className={classes.durationCellTime}>\n                    {formatTimeFromFrames(\n                        group.tracks.map(n => n.duration).reduce((a, b) => a + b),\n                        false\n                    )}\n                </span>\n            </TableCell>\n        </TableRow>\n    );\n}\n","import React from 'react';\nimport { WindowHeader, WindowContent, TextField } from 'react95';\nimport { DialogOverlay, DialogFooter, DialogWindow, FooterButton } from './common';\n\nexport const W95RenameDialog = (props: {\n    renameDialogVisible: boolean;\n    renameDialogTitle: string;\n    renameDialogIndex: number;\n    what: string;\n    handleCancelRename: () => void;\n    handleDoRename: () => void;\n    handleChange: (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => void;\n}) => {\n    if (!props.renameDialogVisible) {\n        return null;\n    }\n\n    return (\n        <DialogOverlay>\n            <DialogWindow>\n                <WindowHeader>\n                    <span>Rename {props.what}</span>\n                </WindowHeader>\n                <WindowContent>\n                    <p style={{ marginBottom: 4 }}>{props.what} Name:</p>\n                    <TextField\n                        style={{ marginBottom: 16 }}\n                        value={props.renameDialogTitle}\n                        placeholder=\"Type here...\"\n                        onChange={props.handleChange}\n                        onKeyDown={(event: any) => {\n                            event.key === `Enter` && props.handleDoRename();\n                        }}\n                        fullWidth\n                    />\n                    <DialogFooter>\n                        <FooterButton onClick={props.handleDoRename}>OK</FooterButton>\n                        <FooterButton onClick={props.handleCancelRename}>Cancel</FooterButton>\n                    </DialogFooter>\n                </WindowContent>\n            </DialogWindow>\n        </DialogOverlay>\n    );\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useShallowEqualSelector } from '../utils';\nimport { actions as renameDialogActions } from '../redux/rename-dialog-feature';\nimport { renameTrack, renameDisc, renameGroup } from '../redux/actions';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from '@material-ui/core/TextField';\nimport Slide from '@material-ui/core/Slide';\nimport Button from '@material-ui/core/Button';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport { W95RenameDialog } from './win95/rename-dialog';\n\nconst Transition = React.forwardRef(function Transition(\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\n    ref: React.Ref<unknown>\n) {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst useStyles = makeStyles(theme => ({\n    marginUpDown: {\n        marginTop: theme.spacing(3),\n        marginBottom: theme.spacing(3),\n    },\n}));\n\nexport const RenameDialog = (props: {}) => {\n    let dispatch = useDispatch();\n    let classes = useStyles();\n\n    let renameDialogVisible = useShallowEqualSelector(state => state.renameDialog.visible);\n    let renameDialogTitle = useShallowEqualSelector(state => state.renameDialog.title);\n    let renameDialogFullWidthTitle = useShallowEqualSelector(state => state.renameDialog.fullWidthTitle);\n    let renameDialogIndex = useShallowEqualSelector(state => state.renameDialog.index);\n    let renameDialogGroupIndex = useShallowEqualSelector(state => state.renameDialog.groupIndex);\n    let allowFullWidth = useShallowEqualSelector(state => state.appState.fullWidthSupport);\n\n    const what = renameDialogGroupIndex !== null ? `Group` : renameDialogIndex < 0 ? `Disc` : `Track`;\n\n    const handleCancelRename = useCallback(() => {\n        dispatch(renameDialogActions.setVisible(false));\n    }, [dispatch]);\n\n    const handleDoRename = useCallback(() => {\n        if (renameDialogGroupIndex !== null) {\n            // Just rename the group with this range\n            dispatch(\n                renameGroup({\n                    newName: renameDialogTitle,\n                    newFullWidthName: renameDialogFullWidthTitle,\n                    groupIndex: renameDialogGroupIndex,\n                })\n            );\n        } else if (renameDialogIndex < 0) {\n            dispatch(\n                renameDisc({\n                    newName: renameDialogTitle,\n                    newFullWidthName: renameDialogFullWidthTitle,\n                })\n            );\n        } else {\n            dispatch(\n                renameTrack({\n                    index: renameDialogIndex,\n                    newName: renameDialogTitle,\n                    newFullWidthName: renameDialogFullWidthTitle,\n                })\n            );\n        }\n        handleCancelRename(); // Close the dialog\n    }, [dispatch, handleCancelRename, renameDialogFullWidthTitle, renameDialogGroupIndex, renameDialogIndex, renameDialogTitle]);\n\n    const handleChange = useCallback(\n        (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n            dispatch(renameDialogActions.setCurrentName(event.target.value.substring(0, 120))); // MAX title length\n        },\n        [dispatch]\n    );\n\n    const handleFullWidthChange = useCallback(\n        (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n            dispatch(renameDialogActions.setCurrentFullWidthName(event.target.value.substring(0, 105)));\n        },\n        [dispatch]\n    );\n\n    const handleEnterKeyEvent = useCallback(\n        (event: React.KeyboardEvent) => {\n            if (event.key === `Enter`) {\n                event.stopPropagation();\n                event.preventDefault();\n                handleDoRename();\n            }\n        },\n        [handleDoRename]\n    );\n\n    const { vintageMode } = useShallowEqualSelector(state => state.appState);\n    if (vintageMode) {\n        const p = {\n            renameDialogVisible,\n            renameDialogTitle,\n            renameDialogIndex,\n            what,\n            handleCancelRename,\n            handleDoRename,\n            handleChange,\n        };\n        return <W95RenameDialog {...p} />;\n    }\n\n    return (\n        <Dialog\n            open={renameDialogVisible}\n            onClose={handleCancelRename}\n            maxWidth={'sm'}\n            fullWidth={true}\n            TransitionComponent={Transition as any}\n            aria-labelledby=\"rename-dialog-title\"\n        >\n            <DialogTitle id=\"rename-dialog-title\">Rename {what}</DialogTitle>\n            <DialogContent>\n                <TextField\n                    autoFocus\n                    id=\"name\"\n                    label={`${what} Name`}\n                    type=\"text\"\n                    fullWidth\n                    value={renameDialogTitle}\n                    onKeyDown={handleEnterKeyEvent}\n                    onChange={handleChange}\n                />\n                {allowFullWidth && (\n                    <TextField\n                        id=\"fullWidthTitle\"\n                        label={`Full-Width ${what} Name`}\n                        type=\"text\"\n                        fullWidth\n                        className={classes.marginUpDown}\n                        value={renameDialogFullWidthTitle}\n                        onKeyDown={handleEnterKeyEvent}\n                        onChange={handleFullWidthChange}\n                    />\n                )}\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleCancelRename}>Cancel</Button>\n                <Button color={'primary'} onClick={handleDoRename}>\n                    Rename\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n","import React from 'react';\nimport { WindowHeader, Button, Progress, Checkbox } from 'react95';\nimport { DialogOverlay, DialogWindow, DialogFooter, DialogWindowContent } from './common';\n\nexport const W95UploadDialog = (props: {\n    visible: boolean;\n    cancelled: boolean;\n    writtenProgress: number;\n    encryptedProgress: number;\n    totalProgress: number;\n    trackTotal: number;\n    trackCurrent: number;\n    trackConverting: number;\n    titleCurrent: string;\n    titleConverting: string;\n    handleCancelUpload: () => void;\n    progressValue: number;\n    bufferValue: number;\n    convertedValue: number;\n    notifyWhenFinished: boolean;\n    hasNotificationSupport: boolean;\n    handleNotifyWhenFinishedChanged: () => void;\n}) => {\n    if (!props.visible) {\n        return null;\n    }\n\n    return (\n        <DialogOverlay>\n            <DialogWindow>\n                <WindowHeader>\n                    <span>Recording...</span>\n                </WindowHeader>\n                <DialogWindowContent>\n                    <div style={{ width: '100%' }}>\n                        {props.convertedValue === 100 && props.trackConverting === props.trackTotal\n                            ? `Conversion completed`\n                            : `Converting ${props.trackConverting + 1} of ${props.trackTotal}: ${props.titleConverting}`}\n                    </div>\n                    <Progress value={Math.floor(props.convertedValue)} />\n\n                    <div style={{ width: '100%', marginTop: 16 }}>\n                        Uploading {props.trackCurrent} of {props.trackTotal}: {props.titleCurrent}\n                    </div>\n                    <Progress value={props.progressValue} />\n\n                    <DialogFooter>\n                        {props.hasNotificationSupport ? (\n                            <Checkbox\n                                name=\"notifyOnEnd\"\n                                label=\"Notify when completed\"\n                                checked={props.notifyWhenFinished}\n                                onChange={props.handleNotifyWhenFinishedChanged}\n                            />\n                        ) : null}\n                        <div style={{ flex: '1 1 auto' }}></div>\n                        <Button disabled={props.cancelled} onClick={props.handleCancelUpload}>\n                            {props.cancelled ? `Stopping after current track...` : `Cancel Recording`}\n                        </Button>\n                    </DialogFooter>\n                </DialogWindowContent>\n            </DialogWindow>\n        </DialogOverlay>\n    );\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useShallowEqualSelector } from '../utils';\n\nimport { actions as uploadDialogActions } from '../redux/upload-dialog-feature';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport { Button } from '@material-ui/core';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { W95UploadDialog } from './win95/upload-dialog';\nimport { setNotifyWhenFinished } from '../redux/actions';\n\nconst useStyles = makeStyles(theme => ({\n    progressPerc: {\n        marginTop: theme.spacing(1),\n    },\n    progressBar: {\n        marginTop: theme.spacing(3),\n    },\n    uploadLabel: {\n        marginTop: theme.spacing(3),\n    },\n    spacer: {\n        flex: '1 1 auto',\n    },\n    checkBox: {\n        marginLeft: 0,\n    },\n}));\n\nconst Transition = React.forwardRef(function Transition(\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\n    ref: React.Ref<unknown>\n) {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport const UploadDialog = (props: {}) => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    let {\n        visible,\n        cancelled,\n        writtenProgress,\n        encryptedProgress,\n        totalProgress,\n\n        trackTotal,\n        trackCurrent,\n        trackConverting,\n        titleCurrent,\n        titleConverting,\n    } = useShallowEqualSelector(state => state.uploadDialog);\n    const { vintageMode, notifyWhenFinished, hasNotificationSupport } = useShallowEqualSelector(state => state.appState);\n\n    const handleCancelUpload = useCallback(() => {\n        dispatch(uploadDialogActions.setCancelUpload(true));\n    }, [dispatch]);\n\n    const handleNotifyWhenFinishedChanged = useCallback(() => {\n        dispatch(setNotifyWhenFinished(!notifyWhenFinished));\n    }, [dispatch, notifyWhenFinished]);\n\n    let progressValue = Math.floor((writtenProgress / totalProgress) * 100);\n    let bufferValue = Math.floor((encryptedProgress / totalProgress) * 100);\n    let convertedValue = Math.floor((trackConverting / trackTotal) * 100);\n\n    if (vintageMode) {\n        const p = {\n            visible,\n            cancelled,\n            writtenProgress,\n            encryptedProgress,\n            totalProgress,\n\n            trackTotal,\n            trackCurrent,\n            trackConverting,\n            titleCurrent,\n            titleConverting,\n\n            handleCancelUpload,\n            progressValue,\n            bufferValue,\n            convertedValue,\n            notifyWhenFinished,\n            hasNotificationSupport,\n            handleNotifyWhenFinishedChanged,\n        };\n        return <W95UploadDialog {...p} />;\n    }\n    return (\n        <Dialog\n            open={visible}\n            maxWidth={'sm'}\n            fullWidth={true}\n            TransitionComponent={Transition as any}\n            aria-labelledby=\"alert-dialog-slide-title\"\n            aria-describedby=\"alert-dialog-slide-description\"\n        >\n            <DialogTitle id=\"alert-dialog-slide-title\">Recording...</DialogTitle>\n            <DialogContent>\n                <DialogContentText id=\"alert-dialog-slide-description\">\n                    {convertedValue === 100 && trackConverting === trackTotal\n                        ? `Conversion completed`\n                        : `Converting ${trackConverting + 1} of ${trackTotal}: ${titleConverting}`}\n                </DialogContentText>\n                <LinearProgress\n                    className={classes.progressBar}\n                    variant={convertedValue === 0 ? 'indeterminate' : 'determinate'}\n                    color=\"primary\"\n                    value={convertedValue}\n                />\n                <Box className={classes.progressPerc}>{convertedValue}%</Box>\n\n                <DialogContentText id=\"alert-dialog-slide-description\" className={classes.uploadLabel}>\n                    Uploading {trackCurrent} of {trackTotal}: {titleCurrent}\n                </DialogContentText>\n                <LinearProgress\n                    className={classes.progressBar}\n                    variant=\"buffer\"\n                    color=\"secondary\"\n                    value={progressValue}\n                    valueBuffer={bufferValue}\n                />\n                <Box className={classes.progressPerc}>{progressValue}%</Box>\n            </DialogContent>\n            <DialogActions>\n                {hasNotificationSupport ? (\n                    <FormControlLabel\n                        className={classes.checkBox}\n                        disabled={!hasNotificationSupport}\n                        control={<Checkbox checked={notifyWhenFinished} onChange={handleNotifyWhenFinishedChanged} name=\"notifyOnEnd\" />}\n                        label=\"Notify when completed\"\n                    />\n                ) : null}\n                <div className={classes.spacer}></div>\n                <Button disabled={cancelled} onClick={handleCancelUpload}>\n                    {cancelled ? `Stopping after current track...` : `Cancel Recording`}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n","import React from 'react';\nimport { WindowHeader, Progress } from 'react95';\nimport { DialogOverlay, DialogWindow, DialogWindowContent } from './common';\n\nexport const W95RecordDialog = (props: {\n    visible: boolean;\n    trackTotal: number;\n    trackDone: number;\n    trackCurrent: number;\n    titleCurrent: string;\n    progressValue: number;\n}) => {\n    if (!props.visible) {\n        return null;\n    }\n    return (\n        <DialogOverlay>\n            <DialogWindow>\n                <WindowHeader>\n                    <span>Recording...</span>\n                </WindowHeader>\n                <DialogWindowContent>\n                    <p style={{ marginBottom: 16, width: '100%' }}>{`Recording track ${props.trackDone + 1} of ${props.trackTotal}: ${\n                        props.titleCurrent\n                    }`}</p>\n                    <Progress value={props.progressValue} hideValue={props.progressValue < 0} />\n                </DialogWindowContent>\n            </DialogWindow>\n        </DialogOverlay>\n    );\n};\n","import React from 'react';\nimport { useShallowEqualSelector } from '../utils';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport { W95RecordDialog } from './win95/record-dialog';\n\nconst useStyles = makeStyles(theme => ({\n    progressPerc: {\n        marginTop: theme.spacing(1),\n    },\n    progressBar: {\n        marginTop: theme.spacing(3),\n    },\n}));\n\nconst Transition = React.forwardRef(function Transition(\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\n    ref: React.Ref<unknown>\n) {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport const RecordDialog = (props: {}) => {\n    const classes = useStyles();\n\n    let { visible, trackTotal, trackDone, trackCurrent, titleCurrent } = useShallowEqualSelector(state => state.recordDialog);\n\n    let progressValue = Math.round(trackCurrent);\n\n    const vintageMode = useShallowEqualSelector(state => state.appState.vintageMode);\n    if (vintageMode) {\n        const p = {\n            visible,\n            trackTotal,\n            trackDone,\n            trackCurrent,\n            titleCurrent,\n            progressValue,\n        };\n        return <W95RecordDialog {...p} />;\n    }\n\n    return (\n        <Dialog\n            open={visible}\n            maxWidth={'sm'}\n            fullWidth={true}\n            TransitionComponent={Transition as any}\n            aria-labelledby=\"record-dialog-slide-title\"\n            aria-describedby=\"record-dialog-slide-description\"\n        >\n            <DialogTitle id=\"record-dialog-slide-title\">Recording...</DialogTitle>\n            <DialogContent>\n                <DialogContentText id=\"record-dialog-slide-description\">\n                    {`Recording track ${trackDone + 1} of ${trackTotal}: ${titleCurrent}`}\n                </DialogContentText>\n                <LinearProgress\n                    className={classes.progressBar}\n                    variant={trackCurrent >= 0 ? 'determinate' : 'indeterminate'}\n                    color=\"primary\"\n                    value={progressValue}\n                />\n                <Box className={classes.progressPerc}>{progressValue >= 0 ? `${progressValue}%` : ``}</Box>\n            </DialogContent>\n            <DialogActions></DialogActions>\n        </Dialog>\n    );\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useShallowEqualSelector } from '../utils';\n\nimport { actions as errorDialogActions } from '../redux/error-dialog-feature';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Button from '@material-ui/core/Button';\nimport { TransitionProps } from '@material-ui/core/transitions';\n\nconst Transition = React.forwardRef(function Transition(\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\n    ref: React.Ref<unknown>\n) {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport const ErrorDialog = (props: {}) => {\n    const dispatch = useDispatch();\n\n    let { visible, error } = useShallowEqualSelector(state => state.errorDialog);\n\n    const handleClose = useCallback(() => {\n        dispatch(errorDialogActions.setVisible(false));\n    }, [dispatch]);\n\n    return (\n        <Dialog\n            open={visible}\n            maxWidth={'sm'}\n            fullWidth={true}\n            TransitionComponent={Transition as any}\n            aria-labelledby=\"error-dialog-slide-title\"\n            aria-describedby=\"error-dialog-slide-description\"\n        >\n            <DialogTitle id=\"alert-dialog-slide-title\">Error</DialogTitle>\n            <DialogContent>\n                <DialogContentText id=\"alert-dialog-slide-description\">{error}</DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose}>Close</Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useShallowEqualSelector } from '../utils';\nimport { actions as panicDialogActions } from '../redux/panic-dialog-feature';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Button from '@material-ui/core/Button';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport { Typography } from '@material-ui/core';\n\nconst Transition = React.forwardRef(function Transition(\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\n    ref: React.Ref<unknown>\n) {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport const PanicDialog = (props: {}) => {\n    const dispatch = useDispatch();\n\n    let { visible, dismissed } = useShallowEqualSelector(state => state.panicDialog);\n\n    const handleReloadApp = useCallback(() => {\n        window.location.reload();\n    }, []);\n\n    const handleIgnore = useCallback(() => {\n        dispatch(panicDialogActions.dismiss());\n    }, [dispatch]);\n\n    return (\n        <Dialog\n            open={visible && !dismissed}\n            maxWidth={'sm'}\n            fullWidth={true}\n            scroll={'paper'}\n            TransitionComponent={Transition as any}\n            aria-labelledby=\"error-dialog-slide-title\"\n            aria-describedby=\"error-dialog-slide-description\"\n        >\n            <DialogTitle id=\"alert-dialog-slide-title\">Oops… Something unexpected happened.</DialogTitle>\n            <DialogContent>\n                <Typography color=\"textSecondary\" variant=\"body1\" component=\"div\">\n                    Try to restart the app. If the error persists, try the followings:\n                    <ol>\n                        <li>Use your browser in incognito mode.</li>\n                        <li>Use a blank MiniDisc.</li>\n                        <li>Try to use Web MiniDisc on another computer.</li>\n                    </ol>\n                    If this does not solve the error, your unit might not be supported yet or you have encountered a bug. The full error is\n                    reported in the JS console.\n                </Typography>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleIgnore} size=\"small\">\n                    Ignore and Continue\n                </Button>\n                <Button onClick={handleReloadApp} color=\"primary\">\n                    Restart the App\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n","import React, { useCallback, useContext } from 'react';\nimport { Button, WindowHeader, Fieldset, Select, Table, TableBody, TableDataCell, Divider, Toolbar } from 'react95';\nimport { DialogOverlay, DialogWindow, DialogFooter, DialogWindowContent, WindowCloseIcon, FooterButton, CustomTableRow } from './common';\nimport { TitleFormatType, UploadFormat } from '../../redux/convert-dialog-feature';\nimport { DropzoneInputProps, DropzoneRootProps } from 'react-dropzone';\nimport { ThemeContext } from 'styled-components';\nimport ArrowUpIconUrl from '../../images/win95/arrowup.png';\nimport ArrowDownIconUrl from '../../images/win95/arrowdown.png';\nimport DeleteIconUrl from '../../images/win95/delete.png';\n\nconst trackTitleOptions = [\n    { value: 'filename', label: 'Filename' },\n    { value: 'title', label: 'Title' },\n    { value: 'album-title', label: 'Album - Title' },\n    { value: 'artist-title', label: 'Artist - Title' },\n    { value: 'title-artist', label: 'Title - Artist' },\n    { value: 'artist-album-title', label: 'Artist - Album - Title' },\n];\n\nconst recordModeOptions = [\n    { value: 'SP', label: 'SP' },\n    { value: 'LP2', label: 'LP2' },\n    { value: 'LP4', label: 'LP4' },\n];\n\nexport const W95ConvertDialog = (props: {\n    visible: boolean;\n    format: UploadFormat;\n    titleFormat: TitleFormatType;\n    files: File[];\n    setFiles: React.Dispatch<React.SetStateAction<File[]>>;\n    selectedTrackIndex: number;\n    setSelectedTrack: React.Dispatch<React.SetStateAction<number>>;\n    moveFileUp: () => void;\n    moveFileDown: () => void;\n    handleClose: () => void;\n    handleChangeFormat: (ev: any, newFormat: any) => void;\n    handleChangeTitleFormat: (\n        event: React.ChangeEvent<{\n            value: any;\n        }>\n    ) => void;\n    handleConvert: () => void;\n    tracksOrderVisible: boolean;\n    setTracksOrderVisible: React.Dispatch<React.SetStateAction<boolean>>;\n    handleToggleTracksOrder: () => void;\n    selectedTrackRef: React.MutableRefObject<HTMLDivElement | null>;\n    getRootProps: (props?: DropzoneRootProps | undefined) => DropzoneRootProps;\n    getInputProps: (props?: DropzoneInputProps | undefined) => DropzoneInputProps;\n    isDragActive: boolean;\n    open: () => void;\n    disableRemove: boolean;\n    handleRemoveSelectedTrack: () => void;\n    dialogVisible: boolean;\n}) => {\n    const themeContext = useContext(ThemeContext);\n\n    const renderTracks = useCallback(() => {\n        return props.files.map((file, i) => {\n            const isSelected = props.selectedTrackIndex === i;\n            const ref = isSelected ? props.selectedTrackRef : null;\n            return (\n                <CustomTableRow\n                    key={`${i}`}\n                    onClick={() => props.setSelectedTrack(i)}\n                    ref={ref}\n                    style={isSelected ? themeContext.selectedTableRow : {}}\n                >\n                    <TableDataCell>{file.name}</TableDataCell>\n                </CustomTableRow>\n            );\n        });\n    }, [props, themeContext]);\n\n    if (!props.dialogVisible) {\n        return null;\n    }\n\n    return (\n        <DialogOverlay>\n            <DialogWindow>\n                <WindowHeader style={{ display: 'flex', alignItems: 'center' }}>\n                    <span style={{ flex: '1 1 auto' }}>Upload Settings</span>\n                    <Button onClick={props.handleClose}>\n                        <WindowCloseIcon />\n                    </Button>\n                </WindowHeader>\n                <DialogWindowContent>\n                    <div style={{ display: 'flex', width: '100%' }}>\n                        <Fieldset label=\"Recording Mode\" style={{ display: 'flex', flex: '1 1 auto' }}>\n                            <Select\n                                defaultValue={props.format}\n                                options={recordModeOptions}\n                                width={90}\n                                onChange={(ev: any, format: any) => props.handleChangeFormat(ev, format.value)}\n                            />\n                        </Fieldset>\n                        <Fieldset label=\"Track title\" style={{ flex: '1 1 auto', marginLeft: 16 }}>\n                            <Select\n                                defaultValue={props.titleFormat}\n                                options={trackTitleOptions}\n                                width={180}\n                                onChange={props.handleChangeTitleFormat}\n                            />\n                        </Fieldset>\n                    </div>\n                    {props.tracksOrderVisible ? (\n                        <div {...props.getRootProps()} style={{ width: '100%', marginTop: 16 }}>\n                            <Divider style={{ marginTop: 16 }} />\n                            <Toolbar style={{ display: 'flex' }}>\n                                <Button variant=\"menu\" onClick={props.open}>\n                                    Add...\n                                </Button>\n                                <Button variant=\"menu\" disabled={props.disableRemove} onClick={props.handleRemoveSelectedTrack}>\n                                    <img alt=\"delete\" src={DeleteIconUrl} style={{ marginRight: 4 }} />\n                                    Remove\n                                </Button>\n                                <div style={{ flex: '1 1 auto' }}></div>\n                                <Button variant=\"menu\" disabled={props.disableRemove} onClick={props.moveFileDown}>\n                                    <img alt=\"Move Down\" src={ArrowDownIconUrl} />\n                                </Button>\n                                <Button variant=\"menu\" disabled={props.disableRemove} onClick={props.moveFileUp}>\n                                    <img alt=\"Move Up\" src={ArrowUpIconUrl} />\n                                </Button>\n                            </Toolbar>\n                            <div style={{ maxHeight: '30vh', overflow: 'scroll' }}>\n                                <Table>\n                                    <TableBody>{renderTracks()}</TableBody>\n                                </Table>\n                            </div>\n                            <input {...props.getInputProps()} />\n                        </div>\n                    ) : null}\n\n                    <DialogFooter>\n                        <Button onClick={props.handleToggleTracksOrder}>{`${props.tracksOrderVisible ? 'Hide' : 'Edit'} Tracks`}</Button>\n                        <div style={{ flex: '1 1 auto' }}></div>\n                        <FooterButton onClick={props.handleConvert}>OK</FooterButton>\n                        <FooterButton onClick={props.handleClose}>Cancel</FooterButton>\n                    </DialogFooter>\n                </DialogWindowContent>\n            </DialogWindow>\n        </DialogOverlay>\n    );\n};\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { belowDesktop, useShallowEqualSelector } from '../utils';\n\nimport { actions as convertDialogActions } from '../redux/convert-dialog-feature';\nimport { convertAndUpload } from '../redux/actions';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormControl from '@material-ui/core/FormControl';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport { Typography } from '@material-ui/core';\nimport Select from '@material-ui/core/Select';\nimport Input from '@material-ui/core/Input';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { lighten } from '@material-ui/core/styles';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Radio from '@material-ui/core/Radio';\nimport { useDropzone } from 'react-dropzone';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport { W95ConvertDialog } from './win95/convert-dialog';\n\nconst Transition = React.forwardRef(function Transition(\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\n    ref: React.Ref<unknown>\n) {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        display: 'flex',\n        flexDirection: 'row',\n    },\n    formControl: {\n        minWidth: 60,\n    },\n    toggleButton: {\n        minWidth: 40,\n    },\n    dialogContent: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'stretch',\n    },\n    formatAndTitle: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-between',\n    },\n    rightBlock: {\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    titleFormControl: {\n        minWidth: 170,\n        marginTop: 4,\n        [belowDesktop(theme)]: {\n            width: 114,\n            minWidth: 0,\n        },\n    },\n    spacer: {\n        display: 'flex',\n        flex: '1 1 auto',\n    },\n    showTracksOrderBtn: {\n        marginLeft: theme.spacing(1),\n    },\n    tracksOrderAccordion: {\n        '&:before': {\n            opacity: 0,\n        },\n    },\n    tracksOrderAccordionDetail: {\n        maxHeight: '40vh',\n        overflow: 'auto',\n    },\n    toolbarHighlight:\n        theme.palette.type === 'light'\n            ? {\n                  color: theme.palette.secondary.main,\n                  backgroundColor: lighten(theme.palette.secondary.light, 0.85),\n              }\n            : {\n                  color: theme.palette.text.primary,\n                  backgroundColor: theme.palette.secondary.dark,\n              },\n    trackList: {\n        flex: '1 1 auto',\n    },\n    backdrop: {\n        zIndex: theme.zIndex.drawer + 1,\n        color: '#fff',\n    },\n}));\n\nexport const ConvertDialog = (props: { files: File[] }) => {\n    const dispatch = useDispatch();\n    const classes = useStyles();\n\n    let { visible, format, titleFormat } = useShallowEqualSelector(state => state.convertDialog);\n\n    // Track reodering\n    const [files, setFiles] = useState(props.files);\n    const [selectedTrackIndex, setSelectedTrack] = useState(-1);\n\n    const moveFile = useCallback(\n        (offset: number) => {\n            const targetIndex = selectedTrackIndex + offset;\n            if (targetIndex >= files.length || targetIndex < 0) {\n                return; // This should not be allowed by the UI\n            }\n\n            const newFileArray = files.slice();\n\n            // Swap trakcs\n            let tmp = newFileArray[selectedTrackIndex];\n            newFileArray[selectedTrackIndex] = newFileArray[targetIndex];\n            newFileArray[targetIndex] = tmp;\n\n            setFiles(newFileArray);\n            setSelectedTrack(targetIndex);\n        },\n        [files, selectedTrackIndex]\n    );\n\n    const moveFileUp = useCallback(() => {\n        moveFile(-1);\n    }, [moveFile]);\n\n    const moveFileDown = useCallback(() => {\n        moveFile(1);\n    }, [moveFile]);\n\n    const handleClose = useCallback(() => {\n        dispatch(convertDialogActions.setVisible(false));\n    }, [dispatch]);\n\n    const handleChangeFormat = useCallback(\n        (ev, newFormat) => {\n            if (newFormat === null) {\n                return;\n            }\n            dispatch(convertDialogActions.setFormat(newFormat));\n        },\n        [dispatch]\n    );\n\n    const handleChangeTitleFormat = useCallback(\n        (event: React.ChangeEvent<{ value: any }>) => {\n            dispatch(convertDialogActions.setTitleFormat(event.target.value));\n        },\n        [dispatch]\n    );\n\n    const handleConvert = useCallback(() => {\n        handleClose();\n        dispatch(convertAndUpload(files, format, titleFormat));\n    }, [dispatch, files, format, titleFormat, handleClose]);\n\n    const [tracksOrderVisible, setTracksOrderVisible] = useState(false);\n    const handleToggleTracksOrder = useCallback(() => {\n        setTracksOrderVisible(!tracksOrderVisible);\n    }, [tracksOrderVisible, setTracksOrderVisible]);\n\n    // Dialog init on new files\n    useEffect(() => {\n        const newFiles = Array.from(props.files);\n        setFiles(newFiles);\n        setSelectedTrack(-1);\n        setTracksOrderVisible(false);\n    }, [props.files, setSelectedTrack, setTracksOrderVisible]);\n\n    // scroll selected track into view\n    const selectedTrackRef = useRef<HTMLDivElement | null>(null);\n    useEffect(() => {\n        selectedTrackRef.current?.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n    }, [selectedTrackRef, selectedTrackIndex]);\n\n    const renderTracks = useCallback(() => {\n        return files.map((file, i) => {\n            const isSelected = selectedTrackIndex === i;\n            const ref = isSelected ? selectedTrackRef : null;\n            return (\n                <ListItem key={`${i}`} disableGutters={true} onClick={() => setSelectedTrack(i)} ref={ref} button>\n                    <ListItemIcon>\n                        <Radio checked={isSelected} value={`track-${i}`} size=\"small\" />\n                    </ListItemIcon>\n                    <ListItemText primary={file.name} />\n                </ListItem>\n            );\n        });\n    }, [files, selectedTrackIndex, setSelectedTrack, selectedTrackRef]);\n\n    // Add/Remove tracks\n    const onDrop = useCallback(\n        (acceptedFiles: File[], rejectedFiles: File[]) => {\n            const newFileArray = files.slice().concat(acceptedFiles);\n            setFiles(newFileArray);\n        },\n        [files, setFiles]\n    );\n    const { getRootProps, getInputProps, isDragActive, open } = useDropzone({\n        onDrop,\n        accept: [`audio/*`, `video/mp4`],\n        noClick: true,\n    });\n    const disableRemove = selectedTrackIndex < 0 || selectedTrackIndex >= files.length;\n    const handleRemoveSelectedTrack = useCallback(() => {\n        const newFileArray = files.filter((f, i) => i !== selectedTrackIndex);\n        setFiles(newFileArray);\n        if (selectedTrackIndex >= newFileArray.length) {\n            setSelectedTrack(newFileArray.length - 1);\n        }\n    }, [selectedTrackIndex, files, setFiles]);\n\n    const dialogVisible = useShallowEqualSelector(state => state.convertDialog.visible);\n    useEffect(() => {\n        if (dialogVisible && files.length === 0) {\n            handleClose();\n        }\n    }, [files, dialogVisible, handleClose]);\n\n    const vintageMode = useShallowEqualSelector(state => state.appState.vintageMode);\n    if (vintageMode) {\n        const p = {\n            visible,\n            format,\n            titleFormat,\n\n            files,\n            setFiles,\n            selectedTrackIndex,\n            setSelectedTrack,\n\n            moveFileUp,\n            moveFileDown,\n\n            handleClose,\n            handleChangeFormat,\n            handleChangeTitleFormat,\n            handleConvert,\n\n            tracksOrderVisible,\n            setTracksOrderVisible,\n            handleToggleTracksOrder,\n            selectedTrackRef,\n\n            getRootProps,\n            getInputProps,\n            isDragActive,\n            open,\n\n            disableRemove,\n            handleRemoveSelectedTrack,\n            dialogVisible,\n        };\n        return <W95ConvertDialog {...p} />;\n    }\n\n    return (\n        <Dialog\n            open={visible}\n            maxWidth={'xs'}\n            fullWidth={true}\n            TransitionComponent={Transition as any}\n            aria-labelledby=\"convert-dialog-slide-title\"\n            aria-describedby=\"convert-dialog-slide-description\"\n        >\n            <DialogTitle id=\"convert-dialog-slide-title\">Upload Settings</DialogTitle>\n            <DialogContent className={classes.dialogContent}>\n                <div className={classes.formatAndTitle}>\n                    <FormControl>\n                        <Typography component=\"label\" variant=\"caption\" color=\"textSecondary\">\n                            Recording Mode\n                        </Typography>\n                        <ToggleButtonGroup value={format} exclusive onChange={handleChangeFormat} size=\"small\">\n                            <ToggleButton className={classes.toggleButton} value=\"SP\">\n                                SP\n                            </ToggleButton>\n                            <ToggleButton className={classes.toggleButton} value=\"LP2\">\n                                LP2\n                            </ToggleButton>\n                            <ToggleButton className={classes.toggleButton} value=\"LP4\">\n                                LP4\n                            </ToggleButton>\n                        </ToggleButtonGroup>\n                    </FormControl>\n                    <div className={classes.rightBlock}>\n                        <FormControl className={classes.formControl}>\n                            <Typography component=\"label\" variant=\"caption\" color=\"textSecondary\">\n                                Track title\n                            </Typography>\n                            <FormControl className={classes.titleFormControl}>\n                                <Select value={titleFormat} color=\"secondary\" input={<Input />} onChange={handleChangeTitleFormat}>\n                                    <MenuItem value={`filename`}>Filename</MenuItem>\n                                    <MenuItem value={`title`}>Title</MenuItem>\n                                    <MenuItem value={`album-title`}>Album - Title</MenuItem>\n                                    <MenuItem value={`artist-title`}>Artist - Title</MenuItem>\n                                    <MenuItem value={`title-artist`}>Title - Artist</MenuItem>\n                                    <MenuItem value={`artist-album-title`}>Artist - Album - Title</MenuItem>\n                                </Select>\n                            </FormControl>\n                        </FormControl>\n                    </div>\n                </div>\n                <Accordion expanded={tracksOrderVisible} className={classes.tracksOrderAccordion} square={true}>\n                    <div></div>\n                    <div {...getRootProps()} style={{ outline: 'none' }}>\n                        <Toolbar variant=\"dense\" className={classes.toolbarHighlight}>\n                            <IconButton edge=\"start\" aria-label=\"add track\" onClick={open}>\n                                <AddIcon />\n                            </IconButton>\n                            <IconButton edge=\"start\" aria-label=\"remove track\" onClick={handleRemoveSelectedTrack} disabled={disableRemove}>\n                                <RemoveIcon />\n                            </IconButton>\n                            <div className={classes.spacer}></div>\n                            <IconButton edge=\"end\" aria-label=\"move up\" onClick={moveFileDown}>\n                                <ExpandMoreIcon />\n                            </IconButton>\n                            <IconButton edge=\"end\" aria-label=\"move down\" onClick={moveFileUp}>\n                                <ExpandLessIcon />\n                            </IconButton>\n                        </Toolbar>\n                        <AccordionDetails className={classes.tracksOrderAccordionDetail}>\n                            <List dense={true} disablePadding={false} className={classes.trackList}>\n                                {renderTracks()}\n                            </List>\n                        </AccordionDetails>\n                        <Backdrop className={classes.backdrop} open={isDragActive}>\n                            Drop your Music to add it to the queue\n                        </Backdrop>\n                        <input {...getInputProps()} />\n                    </div>\n                </Accordion>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleToggleTracksOrder} className={classes.showTracksOrderBtn}>\n                    {`${tracksOrderVisible ? 'Hide' : 'Edit'} Tracks`}\n                </Button>\n                <div className={classes.spacer}></div>\n                <Button onClick={handleClose}>Cancel</Button>\n                <Button onClick={handleConvert}>Ok</Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"g\", {\n  fillRule: \"nonzero\"\n}, React.createElement(\"path\", {\n  d: \"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z\"\n})), React.createElement(\"path\", {\n  d: \"M53.259 20.337c6.582-5.574 6.582-5.574 14.753-12.436C62.599 6.72 56.322 6 49.946 6c-6.485 0-12.82.747-18.303 1.966 6.675 5.894 7.084 6.191 14.006 12.252 3.48-.293 3.97-.293 7.61.12zM36.927 24.504c.992-1.544 2.25-2.448 5.124-3.474-5.486-4.744-7.34-6.324-14.003-12.173-11.485 3.264-19.33 9.02-20.049 15.647h28.928zM61.159 24.504c14.02 0 20.615 0 30.732-.004-.789-6.629-8.72-12.468-20.269-15.706-2.061 1.766-11.14 9.316-14.827 12.484 1.793.813 3.226 1.35 4.364 3.226zM40.996 30.602c-2.045-.884-3.476-1.935-4.042-3.102-1.056 0-26.431 0-28.782.039C9.53 33.6 16.924 38.847 27.455 41.964c4.236-3.528 8.255-6.948 13.541-11.362zM49.946 45c6.284 0 12.247-.64 17.6-1.79-4.721-4.135-7.729-6.721-13.454-11.689-3.681.692-6.213.59-9.6.068-4.888 4.125-10.974 9.218-13.473 11.324C36.707 44.248 43.137 45 49.946 45zM57.47 30.45c4.38 3.707 9.262 8.068 13.687 11.884 11.265-3.066 19.178-8.5 20.57-14.83H61.18c-.667.999-1.516 1.917-3.71 2.946z\"\n}));\n\nconst SvgMd0 = ({\n  svgRef,\n  title,\n  ...props\n}) => React.createElement(\"svg\", _extends({\n  width: 98,\n  height: 52,\n  viewBox: \"0 0 98 52\",\n  ref: svgRef\n}, props), title ? React.createElement(\"title\", null, title) : null, _ref);\n\nconst ForwardRef = React.forwardRef((props, ref) => React.createElement(SvgMd0, _extends({\n  svgRef: ref\n}, props)));\nexport default __webpack_public_path__ + \"static/media/md0.a7574f83.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"g\", {\n  fillRule: \"nonzero\"\n}, React.createElement(\"path\", {\n  d: \"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z\"\n})), React.createElement(\"path\", {\n  d: \"M36.927 24.504c.992-1.544 2.25-2.448 5.124-3.474-5.486-4.744-7.34-6.324-14.003-12.173-11.485 3.264-19.33 9.02-20.049 15.647h28.928zM57.47 30.45c4.38 3.707 9.262 8.068 13.687 11.884 11.265-3.066 19.178-8.5 20.57-14.83H61.18c-.667.999-1.516 1.917-3.71 2.946z\"\n}));\n\nconst SvgMd1 = ({\n  svgRef,\n  title,\n  ...props\n}) => React.createElement(\"svg\", _extends({\n  width: 98,\n  height: 52,\n  viewBox: \"0 0 98 52\",\n  ref: svgRef\n}, props), title ? React.createElement(\"title\", null, title) : null, _ref);\n\nconst ForwardRef = React.forwardRef((props, ref) => React.createElement(SvgMd1, _extends({\n  svgRef: ref\n}, props)));\nexport default __webpack_public_path__ + \"static/media/md1.1ffb5f6c.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"g\", {\n  fillRule: \"nonzero\"\n}, React.createElement(\"path\", {\n  d: \"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z\"\n})), React.createElement(\"path\", {\n  d: \"M53.259 20.337c6.582-5.574 6.582-5.574 14.753-12.436C62.599 6.72 56.322 6 49.946 6c-6.485 0-12.82.747-18.303 1.966 6.675 5.894 7.084 6.191 14.006 12.252 3.48-.293 3.97-.293 7.61.12zM49.946 45c6.284 0 12.247-.64 17.6-1.79-4.721-4.135-7.729-6.721-13.454-11.689-3.681.692-6.213.59-9.6.068-4.888 4.125-10.974 9.218-13.473 11.324C36.707 44.248 43.137 45 49.946 45z\"\n}));\n\nconst SvgMd2 = ({\n  svgRef,\n  title,\n  ...props\n}) => React.createElement(\"svg\", _extends({\n  width: 98,\n  height: 52,\n  viewBox: \"0 0 98 52\",\n  ref: svgRef\n}, props), title ? React.createElement(\"title\", null, title) : null, _ref);\n\nconst ForwardRef = React.forwardRef((props, ref) => React.createElement(SvgMd2, _extends({\n  svgRef: ref\n}, props)));\nexport default __webpack_public_path__ + \"static/media/md2.33dd03b3.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#000\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"g\", {\n  fillRule: \"nonzero\"\n}, React.createElement(\"path\", {\n  d: \"M5.756 14.036l2.101 2.14c-2.173 2.135-3.623 4.401-4.303 6.721l-.101.367-2.906-.748c.776-3.013 2.552-5.872 5.209-8.48zM23.576 4.241l.902 2.861c-5.329 1.682-9.916 3.879-13.464 6.436l-.438.322-1.796-2.403c3.894-2.91 8.94-5.368 14.796-7.216zM47.825.5l.054 3c-6.79.122-13.336.962-19.288 2.445l-.846.216-.76-2.902C33.395 1.581 40.477.632 47.825.5zM92.67 14.036l-2.101 2.14c2.173 2.135 3.624 4.401 4.303 6.721l.101.367 2.906-.748c-.776-3.013-2.552-5.872-5.209-8.48zM74.85 4.241l-.902 2.861c5.329 1.682 9.916 3.879 13.464 6.436l.438.322 1.796-2.403c-3.893-2.91-8.94-5.368-14.796-7.216zM50.601.5l-.054 3c6.79.122 13.336.962 19.288 2.445l.846.216.76-2.902C65.031 1.581 57.95.632 50.601.5zM5.756 37.964l2.101-2.14c-2.173-2.135-3.623-4.401-4.303-6.721l-.101-.367-2.906.748c.776 3.013 2.552 5.872 5.209 8.48zM23.576 47.759l.902-2.861c-5.329-1.682-9.916-3.879-13.464-6.436l-.438-.322-1.796 2.403c3.894 2.91 8.94 5.368 14.796 7.216zM47.825 51.5l.054-3c-6.79-.122-13.336-.962-19.288-2.445l-.846-.216-.76 2.902c6.41 1.678 13.492 2.627 20.84 2.759zM92.67 37.964l-2.101-2.14c2.173-2.135 3.624-4.401 4.303-6.721l.101-.367 2.906.748c-.776 3.013-2.552 5.872-5.209 8.48zM74.85 47.759l-.902-2.861c5.329-1.682 9.916-3.879 13.464-6.436l.438-.322 1.796 2.403c-3.893 2.91-8.94 5.368-14.796 7.216zM50.601 51.5l-.054-3c6.79-.122 13.336-.962 19.288-2.445l.846-.216.76 2.902c-6.41 1.678-13.492 2.627-20.84 2.759z\"\n})), React.createElement(\"path\", {\n  d: \"M61.159 24.504c14.02 0 20.615 0 30.732-.004-.789-6.629-8.72-12.468-20.269-15.706-2.061 1.766-11.14 9.316-14.827 12.484 1.793.813 3.226 1.35 4.364 3.226zM40.996 30.602c-2.045-.884-3.476-1.935-4.042-3.102-1.056 0-26.431 0-28.782.039C9.53 33.6 16.924 38.847 27.455 41.964c4.236-3.528 8.255-6.948 13.541-11.362z\"\n}));\n\nconst SvgMd3 = ({\n  svgRef,\n  title,\n  ...props\n}) => React.createElement(\"svg\", _extends({\n  width: 98,\n  height: 52,\n  viewBox: \"0 0 98 52\",\n  ref: svgRef\n}, props), title ? React.createElement(\"title\", null, title) : null, _ref);\n\nconst ForwardRef = React.forwardRef((props, ref) => React.createElement(SvgMd3, _extends({\n  svgRef: ref\n}, props)));\nexport default __webpack_public_path__ + \"static/media/md3.80f42826.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport { Button, Panel } from 'react95';\nimport { belowDesktop } from '../../utils';\n\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport StopIcon from '@material-ui/icons/Stop';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        display: 'flex',\n        flex: '1 1 auto',\n        alignItems: 'center',\n        [belowDesktop(theme)]: {\n            flexWrap: 'wrap',\n        },\n    },\n    lcd: {\n        backgroundColor: 'black !important',\n        flex: '1 1 auto',\n        margin: '0 80px 0 0px',\n        minWidth: 150,\n        height: 48,\n        color: 'white !important',\n        fontFamily: 'LCDDot',\n    },\n}));\n\nexport const W95Controls = (props: {\n    handlePrev: () => void;\n    handlePlay: () => void;\n    handleStop: () => void;\n    handlePause: () => void;\n    handleNext: () => void;\n    message: string;\n    discPresent: boolean;\n    classes: any;\n    lcdScroll: number;\n    lcdRef: React.RefObject<HTMLParagraphElement>;\n    lcdScrollDuration: number;\n}) => {\n    const classes = useStyles();\n    return (\n        <div className={classes.container}>\n            <Button onClick={props.handlePrev}>\n                <SkipPreviousIcon />\n            </Button>\n            <Button onClick={props.handlePlay}>\n                <PlayArrowIcon />\n            </Button>\n            <Button onClick={props.handlePause}>\n                <PauseIcon />\n            </Button>\n            <Button onClick={props.handleStop}>\n                <StopIcon />\n            </Button>\n            <Button onClick={props.handleNext} style={{ marginRight: 16 }}>\n                <SkipNextIcon />\n            </Button>\n\n            <Panel variant=\"well\" className={classes.lcd}>\n                <div className={props.classes.lcdText} style={{ left: 16, width: 'calc(100% - 16px)' }}>\n                    <span\n                        className={props.lcdScroll ? props.classes.scrollingStatusMessage : props.classes.statusMessage}\n                        ref={props.lcdRef}\n                        style={\n                            props.message && props.lcdScroll > 0\n                                ? {\n                                      animationDuration: `${props.lcdScrollDuration}s`,\n                                      transform: `translate(-${props.lcdScroll}%)`,\n                                      top: 12,\n                                  }\n                                : { top: 12 }\n                        }\n                    >\n                        {props.message}\n                    </span>\n                </div>\n            </Panel>\n        </div>\n    );\n};\n","import React, { useCallback, useRef, useEffect, useState, useMemo } from 'react';\nimport clsx from 'clsx';\n\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport StopIcon from '@material-ui/icons/Stop';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport PauseIcon from '@material-ui/icons/Pause';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport Box from '@material-ui/core/Box';\n\nimport { makeStyles } from '@material-ui/core';\nimport { belowDesktop, getSortedTracks, useShallowEqualSelector } from '../utils';\nimport { control } from '../redux/actions';\nimport { useDispatch } from 'react-redux';\n\nimport { ReactComponent as MDIcon0 } from '../images/md0.svg';\nimport { ReactComponent as MDIcon1 } from '../images/md1.svg';\nimport { ReactComponent as MDIcon2 } from '../images/md2.svg';\nimport { ReactComponent as MDIcon3 } from '../images/md3.svg';\nimport { W95Controls } from './win95/controls';\n\nconst frames = [MDIcon0, MDIcon1, MDIcon2, MDIcon3];\n\nconst useStyles = makeStyles(theme => ({\n    '@keyframes scrollLeft': {\n        from: {\n            transform: `translateX(0%)`,\n        },\n        to: {},\n    },\n    '@keyframes blink': {\n        '50%': {\n            visibility: 'hidden',\n        },\n    },\n    container: {\n        display: 'flex',\n        flex: '1 1 auto',\n        [belowDesktop(theme)]: {\n            flexWrap: 'wrap',\n        },\n    },\n    lcd: {\n        flex: '1 1 auto',\n        position: 'relative',\n        marginLeft: theme.spacing(1.5),\n        marginRight: theme.spacing(1.5),\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n        borderRadius: theme.spacing(3),\n        backgroundColor: theme.palette.background.default,\n        minWidth: 150,\n        height: 48,\n        [belowDesktop(theme)]: {\n            marginLeft: 0,\n            marginRight: theme.spacing(2),\n        },\n    },\n    lcdText: {\n        overflow: 'hidden',\n        position: 'relative',\n        width: 'calc(100% - 40px)',\n        left: 40,\n        height: '100%',\n        fontFamily: 'LCDDot',\n    },\n    lcdDisc: {\n        position: 'absolute',\n        top: 0,\n        left: 20,\n    },\n    lcdDiscIcon: {\n        width: 28,\n        height: 48,\n        '& g': {\n            fill: theme.palette.action.active,\n        },\n    },\n    scrollingStatusMessage: {\n        position: 'absolute',\n        width: '100%',\n        whiteSpace: 'nowrap',\n        animationName: '$scrollLeft',\n        animationTimingFunction: 'linear',\n        animationIterationCount: '1',\n        top: 15,\n        left: 1,\n    },\n    statusMessage: {\n        position: 'absolute',\n        width: '100%',\n        whiteSpace: 'nowrap',\n        top: 15,\n        left: 1,\n    },\n    lcdBlink: {\n        animationName: '$blink',\n        animationTimingFunction: 'step-end',\n        animationDuration: '1s',\n        animationIterationCount: 'infinite',\n    },\n    button: {\n        // padding: 8,\n    },\n}));\n\nexport const Controls = () => {\n    const dispatch = useDispatch();\n    // TODO: The shallow equality won't work for these 2 states\n    const deviceStatus = useShallowEqualSelector(state => state.main.deviceStatus);\n    const disc = useShallowEqualSelector(state => state.main.disc);\n\n    const classes = useStyles();\n    const handlePrev = useCallback(() => {\n        dispatch(control('prev'));\n    }, [dispatch]);\n    const handlePlay = useCallback(() => {\n        dispatch(control('play'));\n    }, [dispatch]);\n    const handleStop = useCallback(() => {\n        dispatch(control('stop'));\n    }, [dispatch]);\n    const handleNext = useCallback(() => {\n        dispatch(control('next'));\n    }, [dispatch]);\n    const handlePause = useCallback(() => {\n        dispatch(control('pause'));\n    }, [dispatch]);\n\n    let message = ``;\n    let trackIndex = deviceStatus?.track ?? null;\n    let deviceState = deviceStatus?.state ?? null;\n    let discPresent = deviceStatus?.discPresent ?? false;\n    let paused = deviceStatus?.state === 'paused';\n    const tracks = useMemo(() => getSortedTracks(disc), [disc]);\n    if (!discPresent) {\n        message = ``;\n    } else if (deviceState === 'readingTOC') {\n        message = 'READING TOC';\n    } else if (tracks.length === 0) {\n        message = `BLANKDISC`;\n    } else if (deviceStatus && deviceStatus.track !== null && tracks[deviceStatus.track]) {\n        let title = tracks[deviceStatus.track].fullWidthTitle || tracks[deviceStatus.track].title;\n        message = (deviceStatus.track + 1).toString().padStart(3, '0') + (title ? ' - ' + title : '');\n    }\n\n    const [lcdScroll, setLcdScroll] = useState(0);\n    const [lcdScrollDuration, setLcdScrollDuration] = useState(0);\n    const [lcdIconFrame, setLcdIconFrame] = useState(0);\n\n    // LCD Text scrolling\n    const animationDelayInMS = 2000;\n    const scrollTimerRef = useRef<any>(null);\n    const lcdRef = useRef<HTMLParagraphElement>(null);\n    useEffect(() => {\n        const updateLCDScroll = () => {\n            const domEl = lcdRef.current;\n            const textWidth = domEl?.scrollWidth ?? 0;\n            const lcdWidth = domEl?.parentElement?.offsetWidth ?? 0;\n            const scrollPerc = textWidth > lcdWidth ? (textWidth * 100) / lcdWidth : 0;\n            const scrollDurationInSec = textWidth > lcdWidth ? textWidth / 20 : 0; // Compute duration to achieve constant speed\n            setLcdScroll(scrollPerc);\n            setLcdScrollDuration(scrollDurationInSec);\n            if (scrollDurationInSec > 0) {\n                scrollTimerRef.current = setTimeout(() => {\n                    setLcdScroll(0);\n                }, scrollDurationInSec * 1000 + 500); // stop animation timer\n            }\n        };\n\n        clearTimeout(scrollTimerRef.current);\n        setLcdScroll(0);\n        scrollTimerRef.current = setTimeout(() => {\n            updateLCDScroll();\n        }, animationDelayInMS); // start animation timer\n\n        return () => {\n            clearTimeout(scrollTimerRef.current); // clear all the timers on unmount\n        };\n    }, [trackIndex, deviceState, message]);\n\n    // Disc animation\n    const lcdIconAnimationTimer = useRef<any>(null);\n    useEffect(() => {\n        clearInterval(lcdIconAnimationTimer.current);\n        if (deviceState === 'playing' || deviceState === 'readingTOC') {\n            lcdIconAnimationTimer.current = setInterval(() => {\n                setLcdIconFrame(1 + (lcdIconFrame % (frames.length - 1)));\n            }, 600);\n        } else {\n            setLcdIconFrame(0);\n        }\n        return () => {\n            clearInterval(lcdIconAnimationTimer.current);\n        };\n    }, [deviceState, lcdIconFrame]);\n\n    const DiscFrame = frames[lcdIconFrame];\n\n    const vintageMode = useShallowEqualSelector(state => state.appState.vintageMode);\n    if (vintageMode) {\n        const p = {\n            handlePrev,\n            handlePlay,\n            handleStop,\n            handlePause,\n            handleNext,\n\n            message,\n            discPresent,\n            lcdScroll,\n            lcdRef,\n            lcdScrollDuration,\n\n            classes,\n        };\n        return <W95Controls {...p} />;\n    }\n\n    return (\n        <Box className={classes.container}>\n            <IconButton aria-label=\"prev\" onClick={handlePrev} className={classes.button}>\n                <SkipPreviousIcon />\n            </IconButton>\n            <IconButton aria-label=\"play\" onClick={handlePlay} className={classes.button}>\n                <PlayArrowIcon />\n            </IconButton>\n            <IconButton aria-label=\"pause\" onClick={handlePause} className={classes.button}>\n                <PauseIcon />\n            </IconButton>\n            <IconButton aria-label=\"stop\" onClick={handleStop} className={classes.button}>\n                <StopIcon />\n            </IconButton>\n            <IconButton aria-label=\"next\" onClick={handleNext} className={classes.button}>\n                <SkipNextIcon />\n            </IconButton>\n            <div className={classes.lcd}>\n                <div className={classes.lcdText}>\n                    <span\n                        className={lcdScroll ? classes.scrollingStatusMessage : classes.statusMessage}\n                        ref={lcdRef}\n                        style={\n                            message && lcdScroll > 0\n                                ? { animationDuration: `${lcdScrollDuration}s`, transform: `translate(-${lcdScroll}%)` }\n                                : {}\n                        }\n                    >\n                        {message}\n                    </span>\n                </div>\n                <div className={classes.lcdDisc}>\n                    {discPresent && <DiscFrame className={clsx(classes.lcdDiscIcon, { [classes.lcdBlink]: paused })} />}\n                </div>\n            </div>\n        </Box>\n    );\n};\n","import React from 'react';\nimport { Button, WindowHeader, Fieldset, Select } from 'react95';\nimport { Controls } from '../controls';\nimport { DialogOverlay, DialogWindow, DialogFooter, DialogWindowContent, WindowCloseIcon, FooterButton } from './common';\n\nexport const W95DumpDialog = (props: {\n    handleClose: () => void;\n    handleChange: (\n        ev: React.ChangeEvent<{\n            value: unknown;\n        }>\n    ) => void;\n    handleStartTransfer: () => void;\n    visible: boolean;\n    devices: {\n        deviceId: string;\n        label: string;\n    }[];\n    inputDeviceId: string;\n}) => {\n    if (!props.visible) {\n        return null;\n    }\n\n    return (\n        <DialogOverlay>\n            <DialogWindow>\n                <WindowHeader style={{ display: 'flex', alignItems: 'center' }}>\n                    <span style={{ flex: '1 1 auto' }}>Record Selected Tracks</span>\n                    <Button onClick={props.handleClose}>\n                        <WindowCloseIcon />\n                    </Button>\n                </WindowHeader>\n                <DialogWindowContent>\n                    <div style={{ width: '100%', display: 'flex', alignItems: 'flex-Start', flexDirection: 'column' }}>\n                        <p>1. Connect your MD Player line-out to your PC audio line-in.</p>\n                        <p>2. Use the controls at the bottom right to play some tracks.</p>\n                        <p>3. Select the input source. You should hear the tracks playing on your PC.</p>\n                        <p>4. Adjust the input gain and the line-out volume of your device.</p>\n                        <Fieldset label=\"Input Source\" style={{ display: 'flex', flex: '1 1 auto', margin: '32px 0' }}>\n                            <Select\n                                defaultValue={props.inputDeviceId || ''}\n                                options={props.devices\n                                    .concat([{ deviceId: '', label: 'None' }])\n                                    .map(({ deviceId, label }) => ({ value: deviceId, label }))}\n                                onChange={props.handleChange}\n                                width={200}\n                            />\n                        </Fieldset>\n                        <Controls />\n                    </div>\n                    <DialogFooter>\n                        <div style={{ flex: '1 1 auto' }}></div>\n                        <FooterButton onClick={props.handleClose}>Cancel</FooterButton>\n                        <FooterButton onClick={props.handleStartTransfer} disabled={props.inputDeviceId === ''}>\n                            Start Record\n                        </FooterButton>\n                    </DialogFooter>\n                </DialogWindowContent>\n            </DialogWindow>\n        </DialogOverlay>\n    );\n};\n","import React, { useEffect, useState, useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useShallowEqualSelector } from '../utils';\n\nimport { recordTracks } from '../redux/actions';\nimport { actions as dumpDialogActions } from '../redux/dump-dialog-feature';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Typography from '@material-ui/core/Typography';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport { Controls } from './controls';\nimport Box from '@material-ui/core/Box';\nimport serviceRegistry from '../services/registry';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport { W95DumpDialog } from './win95/dump-dialog';\n\nconst Transition = React.forwardRef(function Transition(\n    props: TransitionProps & { children?: React.ReactElement<any, any> },\n    ref: React.Ref<unknown>\n) {\n    return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'flex-end',\n        justifyContent: 'space-between',\n        marginRight: -theme.spacing(2),\n        flexFlow: 'wrap',\n    },\n    formControl: {\n        minWidth: 120,\n    },\n    selectEmpty: {\n        marginTop: theme.spacing(2),\n    },\n    head: {\n        textShadow: '0px 0px 12px rgba(150, 150, 150, 1)',\n        fontSize: theme.typography.h2.fontSize,\n        textAlign: 'center',\n        marginBottom: theme.spacing(2),\n    },\n}));\n\nexport const DumpDialog = ({ trackIndexes }: { trackIndexes: number[] }) => {\n    const dispatch = useDispatch();\n    const classes = useStyles();\n\n    const [devices, setDevices] = useState<{ deviceId: string; label: string }[]>([]);\n    const [inputDeviceId, setInputDeviceId] = useState<string>('');\n\n    let { visible } = useShallowEqualSelector(state => state.dumpDialog);\n\n    const handleClose = useCallback(() => {\n        setInputDeviceId('');\n        serviceRegistry.mediaRecorderService?.stopTestInput();\n        dispatch(dumpDialogActions.setVisible(false));\n    }, [dispatch]);\n\n    const handleChange = useCallback(\n        (ev: React.ChangeEvent<{ value: unknown }>) => {\n            const deviceId = ev.target.value as string;\n            setInputDeviceId(deviceId);\n            serviceRegistry.mediaRecorderService?.stopTestInput();\n            serviceRegistry.mediaRecorderService?.playTestInput(deviceId);\n        },\n        [setInputDeviceId]\n    );\n\n    const handleStartTransfer = useCallback(() => {\n        dispatch(recordTracks(trackIndexes, inputDeviceId));\n        handleClose();\n    }, [trackIndexes, inputDeviceId, dispatch, handleClose]);\n\n    useEffect(() => {\n        async function updateDeviceList() {\n            await navigator.mediaDevices.getUserMedia({ audio: true });\n            let devices = await navigator.mediaDevices.enumerateDevices();\n            let inputDevices = devices\n                .filter(device => device.kind === 'audioinput')\n                .map(device => ({ deviceId: device.deviceId, label: device.label }));\n            setDevices(inputDevices);\n        }\n        if (visible) {\n            updateDeviceList();\n        }\n    }, [visible, setDevices]);\n\n    const vintageMode = useShallowEqualSelector(state => state.appState.vintageMode);\n\n    if (vintageMode) {\n        const p = {\n            handleClose,\n            handleChange,\n            handleStartTransfer,\n            visible,\n            devices,\n            inputDeviceId,\n        };\n        return <W95DumpDialog {...p} />;\n    }\n\n    return (\n        <Dialog\n            open={visible}\n            maxWidth={'sm'}\n            fullWidth={true}\n            TransitionComponent={Transition as any}\n            aria-labelledby=\"dump-dialog-slide-title\"\n            aria-describedby=\"dump-dialog-slide-description\"\n        >\n            <DialogTitle id=\"dump-dialog-slide-title\">Record Selected Tracks</DialogTitle>\n            <DialogContent>\n                <Typography component=\"p\" variant=\"h2\" className={classes.head}>\n                    {`💻 ⬅ 💽`}\n                </Typography>\n                <Typography component=\"p\" variant=\"body2\">\n                    1. Connect your MD Player line-out to your PC audio line-in.\n                </Typography>\n                <Typography component=\"p\" variant=\"body2\">\n                    2. Use the controls at the bottom right to play some tracks.\n                </Typography>\n                <Typography component=\"p\" variant=\"body2\">\n                    3. Select the input source. You should hear the tracks playing on your PC.\n                </Typography>\n                <Typography component=\"p\" variant=\"body2\">\n                    4. Adjust the input gain and the line-out volume of your device.\n                </Typography>\n                <Box className={classes.container}>\n                    <FormControl className={classes.formControl}>\n                        <Select value={inputDeviceId} onChange={handleChange} displayEmpty className={classes.selectEmpty}>\n                            <MenuItem value=\"\" disabled>\n                                Input Source\n                            </MenuItem>\n                            {devices.map(device => (\n                                <MenuItem key={device.deviceId} value={device.deviceId}>\n                                    {device.label}\n                                </MenuItem>\n                            ))}\n                        </Select>\n                        <FormHelperText>Input Source</FormHelperText>\n                    </FormControl>\n                    <Controls />\n                </Box>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose}>Cancel</Button>\n                <Button onClick={handleStartTransfer} disabled={inputDeviceId === ''}>\n                    Start Record\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n","import React, { useContext } from 'react';\nimport {\n    Table,\n    TableHead,\n    TableRow,\n    TableHeadCell,\n    TableBody,\n    TableDataCell,\n    Divider,\n    Toolbar,\n    Bar,\n    Button,\n    WindowContent,\n    Tooltip,\n    List,\n    ListItem,\n} from 'react95';\nimport { Disc, formatTimeFromFrames } from 'netmd-js';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { DropzoneRootProps, DropzoneInputProps } from 'react-dropzone';\nimport { ThemeContext } from 'styled-components';\nimport { Controls } from '../controls';\nimport { useShallowEqualSelector } from '../../utils';\n\nimport DeleteIconUrl from '../../images/win95/delete.png';\nimport MicIconUrl from '../../images/win95/mic.png';\nimport MoveIconUrl from '../../images/win95/move.png';\nimport RenameIconUrl from '../../images/win95/rename.png';\nimport DeviceIconUrl from '../../images/win95/device.png';\nimport { RenameDialog } from '../rename-dialog';\nimport { AboutDialog } from '../about-dialog';\n\nimport MDIconUrl from '../../images/win95/minidisc32.png';\nimport { FloatingButton, CustomTableRow } from './common';\nimport { ConvertDialog } from '../convert-dialog';\nimport { UploadDialog } from '../upload-dialog';\nimport { ErrorDialog } from '../error-dialog';\nimport { RecordDialog } from '../record-dialog';\nimport { DumpDialog } from '../dump-dialog';\nimport { PanicDialog } from '../panic-dialog';\n\nconst useStyles = makeStyles((theme: any) => ({\n    container: {\n        width: '100%',\n        flex: '1 1 auto',\n        display: 'flex',\n        minHeight: 0,\n        '& > div': {\n            display: 'flex',\n            flexDirection: 'column',\n            width: '100%',\n        },\n    },\n    table: {\n        height: '100%',\n        width: '100%',\n        display: 'flex !important',\n        flexDirection: 'column',\n    },\n    windowContent: {\n        flex: '1 1 auto',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        minHeight: 0,\n    },\n    controlsContainer: {\n        width: '100%',\n        marginTop: 16,\n    },\n    toolbarIcon: {\n        marginRight: 4,\n    },\n    toolbarItem: {\n        padding: '6px 10px',\n    },\n}));\n\nexport const W95Main = (props: {\n    disc: Disc | null;\n    deviceName: string;\n    selected: number[];\n    setSelected: React.Dispatch<React.SetStateAction<number[]>>;\n    selectedCount: number;\n    tracks: {\n        index: number;\n        title: string;\n        fullWidthTitle: string;\n        group: string | null;\n        duration: string;\n        encoding: string;\n    }[];\n    uploadedFiles: File[];\n    setUploadedFiles: React.Dispatch<React.SetStateAction<File[]>>;\n    onDrop: (acceptedFiles: File[], rejectedFiles: File[]) => void;\n    getRootProps: (props?: DropzoneRootProps | undefined) => DropzoneRootProps;\n    getInputProps: (props?: DropzoneInputProps | undefined) => DropzoneInputProps;\n    isDragActive: boolean;\n    open: () => void;\n    moveMenuAnchorEl: HTMLElement | null;\n    setMoveMenuAnchorEl: React.Dispatch<React.SetStateAction<HTMLElement | null>>;\n    handleShowMoveMenu: (event: React.MouseEvent<HTMLButtonElement>) => void;\n    handleCloseMoveMenu: () => void;\n    handleMoveSelectedTrack: (destIndex: number) => void;\n    handleShowDumpDialog: () => void;\n    handleDeleteSelected: (event: React.MouseEvent) => void;\n    handleRenameActionClick: (event: React.MouseEvent) => void;\n    handleRenameTrack: (event: React.MouseEvent, item: number) => void;\n    handleSelectAllClick: (event: React.ChangeEvent<HTMLInputElement>) => void;\n    handleSelectTrackClick: (event: React.MouseEvent, item: number) => void;\n}) => {\n    const classes = useStyles();\n    const themeContext = useContext(ThemeContext);\n    const { mainView } = useShallowEqualSelector(state => state.appState);\n\n    return (\n        <>\n            <Divider />\n            <Toolbar style={{ flexWrap: 'wrap', position: 'relative' }}>\n                {props.selectedCount === 0 ? (\n                    <>\n                        <img alt=\"device\" src={DeviceIconUrl} style={{ marginTop: -10, marginLeft: 10 }} />\n                        <div className={classes.toolbarItem}>\n                            {`${props.deviceName}: (` || `Loading...`}\n                            {props.disc?.fullWidthTitle && `${props.disc?.fullWidthTitle} / `}\n                            {props.disc?.title || `Untitled Disc`}\n                            {`)`}\n                        </div>\n                        <Bar size={35} />\n                        <img alt=\"minidisc\" src={MDIconUrl} style={{ width: 32, marginLeft: 10 }} />\n                        {props.disc !== null ? (\n                            <Tooltip\n                                text={`${formatTimeFromFrames(props.disc.left * 2, false)} in LP2 or ${formatTimeFromFrames(\n                                    props.disc.left * 4,\n                                    false\n                                )} in LP4`}\n                                enterDelay={100}\n                                leaveDelay={500}\n                            >\n                                <div className={classes.toolbarItem}>{`${formatTimeFromFrames(\n                                    props.disc.left,\n                                    false\n                                )} left of ${formatTimeFromFrames(props.disc.total, false)} `}</div>\n                            </Tooltip>\n                        ) : null}\n                    </>\n                ) : null}\n\n                {props.selectedCount > 0 ? (\n                    <>\n                        <Button variant=\"menu\" disabled={props.selectedCount !== 1} onClick={props.handleShowMoveMenu}>\n                            <img alt=\"move\" src={MoveIconUrl} className={classes.toolbarIcon} />\n                            Move\n                        </Button>\n                        <Button variant=\"menu\" onClick={props.handleShowDumpDialog}>\n                            <img alt=\"record\" src={MicIconUrl} className={classes.toolbarIcon} />\n                            Record\n                        </Button>\n                        <Button variant=\"menu\" onClick={props.handleDeleteSelected}>\n                            <img alt=\"delete\" src={DeleteIconUrl} className={classes.toolbarIcon} />\n                            Delete\n                        </Button>\n                        <Button variant=\"menu\" onClick={props.handleRenameActionClick} disabled={props.selectedCount > 1}>\n                            <img alt=\"rename\" src={RenameIconUrl} className={classes.toolbarIcon} />\n                            Rename\n                        </Button>\n                        {!!props.moveMenuAnchorEl ? (\n                            <List style={{ position: 'absolute', left: 16, top: 32, zIndex: 2 }}>\n                                {Array(props.tracks.length)\n                                    .fill(null)\n                                    .map((_, i) => {\n                                        return (\n                                            <ListItem key={`pos-${i}`} onClick={() => props.handleMoveSelectedTrack(i)}>\n                                                {i + 1}\n                                            </ListItem>\n                                        );\n                                    })}\n                            </List>\n                        ) : null}\n                    </>\n                ) : null}\n                <Bar size={35} />\n            </Toolbar>\n            <Divider />\n            <WindowContent className={classes.windowContent}>\n                <div className={classes.container} {...props.getRootProps()} style={{ outline: 'none' }}>\n                    <input {...props.getInputProps()} />\n                    <Table className={classes.table}>\n                        <TableHead>\n                            <TableRow head style={{ display: 'flex' }}>\n                                <TableHeadCell style={{ width: '2ch' }}>#</TableHeadCell>\n                                <TableHeadCell style={{ textAlign: 'left', flex: '1 1 auto' }}>Title</TableHeadCell>\n                                <TableHeadCell style={{ textAlign: 'right', width: '20%' }}>Duration</TableHeadCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {props.tracks.map(track => (\n                                <CustomTableRow\n                                    style={props.selected.includes(track.index) ? themeContext.selectedTableRow : {}}\n                                    key={track.index}\n                                    onDoubleClick={(event: React.MouseEvent) => props.handleRenameTrack(event, track.index)}\n                                    onClick={(event: React.MouseEvent) => props.handleSelectTrackClick(event, track.index)}\n                                >\n                                    <TableDataCell style={{ textAlign: 'center', width: '2ch' }}>{track.index + 1}</TableDataCell>\n                                    <TableDataCell style={{ width: '80%' }}>\n                                        <div>\n                                            {track.fullWidthTitle && `${track.fullWidthTitle} / `}\n                                            {track.title || `No Title`}\n                                        </div>\n                                    </TableDataCell>\n                                    <TableDataCell style={{ textAlign: 'right', width: '20%' }}>\n                                        <span>{track.encoding}</span>\n                                        &nbsp;\n                                        <span>{track.duration}</span>\n                                    </TableDataCell>\n                                </CustomTableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </div>\n                <div className={classes.controlsContainer}>{mainView === 'MAIN' ? <Controls /> : null}</div>\n            </WindowContent>\n            <FloatingButton onClick={props.open} />\n\n            <UploadDialog />\n            <RenameDialog />\n            <ErrorDialog />\n            <ConvertDialog files={props.uploadedFiles} />\n            <RecordDialog />\n            <DumpDialog trackIndexes={props.selected} />\n            <AboutDialog />\n            <PanicDialog />\n        </>\n    );\n};\n","import React, { useEffect, useCallback, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport clsx from 'clsx';\nimport { useDropzone } from 'react-dropzone';\nimport {\n    DragDropContext,\n    Draggable,\n    DraggableProvided,\n    DropResult,\n    ResponderProvided,\n    Droppable,\n    DroppableProvided,\n    DroppableStateSnapshot,\n} from 'react-beautiful-dnd';\nimport { listContent, deleteTracks, moveTrack, groupTracks, deleteGroup, dragDropTrack } from '../redux/actions';\nimport { actions as renameDialogActions } from '../redux/rename-dialog-feature';\nimport { actions as convertDialogActions } from '../redux/convert-dialog-feature';\nimport { actions as dumpDialogActions } from '../redux/dump-dialog-feature';\n\nimport { DeviceStatus, formatTimeFromFrames, Track } from 'netmd-js';\nimport { control } from '../redux/actions';\n\nimport { belowDesktop, forAnyDesktop, getGroupedTracks, getSortedTracks, isSequential, useShallowEqualSelector } from '../utils';\n\nimport { lighten, makeStyles } from '@material-ui/core/styles';\nimport { alpha } from '@material-ui/core/styles/colorManipulator';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { batchActions } from 'redux-batched-actions';\n\nimport { GroupRow, TrackRow } from './main-rows';\nimport { RenameDialog } from './rename-dialog';\nimport { UploadDialog } from './upload-dialog';\nimport { RecordDialog } from './record-dialog';\nimport { ErrorDialog } from './error-dialog';\nimport { PanicDialog } from './panic-dialog';\nimport { ConvertDialog } from './convert-dialog';\nimport { AboutDialog } from './about-dialog';\nimport { DumpDialog } from './dump-dialog';\nimport { TopMenu } from './topmenu';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Button from '@material-ui/core/Button';\nimport { W95Main } from './win95/main';\nimport { useMemo } from 'react';\n\nconst useStyles = makeStyles(theme => ({\n    add: {\n        position: 'absolute',\n        bottom: theme.spacing(3),\n        right: theme.spacing(3),\n        [belowDesktop(theme)]: {\n            bottom: theme.spacing(2),\n        },\n    },\n    main: {\n        overflowY: 'auto',\n        flex: '1 1 auto',\n        marginBottom: theme.spacing(3),\n        outline: 'none',\n        marginLeft: theme.spacing(-1),\n        marginRight: theme.spacing(-1),\n        [forAnyDesktop(theme)]: {\n            marginLeft: theme.spacing(-2),\n            marginRight: theme.spacing(-2),\n        },\n    },\n    toolbar: {\n        marginTop: theme.spacing(3),\n        marginLeft: theme.spacing(-2),\n        marginRight: theme.spacing(-2),\n        [theme.breakpoints.up(600 + theme.spacing(2) * 2)]: {\n            marginLeft: theme.spacing(-3),\n            marginRight: theme.spacing(-3),\n        },\n    },\n    toolbarLabel: {\n        flex: '1 1 100%',\n    },\n    toolbarHighlight:\n        theme.palette.type === 'light'\n            ? {\n                  color: theme.palette.secondary.main,\n                  backgroundColor: lighten(theme.palette.secondary.light, 0.85),\n              }\n            : {\n                  color: theme.palette.text.primary,\n                  backgroundColor: theme.palette.secondary.dark,\n              },\n    headBox: {\n        display: 'flex',\n        justifyContent: 'space-between',\n    },\n    spacing: {\n        marginTop: theme.spacing(1),\n    },\n    indexCell: {\n        whiteSpace: 'nowrap',\n        paddingRight: 0,\n        width: theme.spacing(4),\n    },\n    backdrop: {\n        zIndex: theme.zIndex.drawer + 1,\n        color: '#fff',\n    },\n    remainingTimeTooltip: {\n        textDecoration: 'underline',\n        textDecorationStyle: 'dotted',\n    },\n    hoveringOverGroup: {\n        backgroundColor: `${alpha(theme.palette.secondary.dark, 0.4)}`,\n    },\n    dragHandleEmpty: {\n        width: 20,\n        padding: `${theme.spacing(0.5)}px 0 0 0`,\n    },\n}));\n\nfunction getTrackStatus(track: Track, deviceStatus: DeviceStatus | null): 'playing' | 'paused' | 'none' {\n    if (!deviceStatus || track.index !== deviceStatus.track) {\n        return 'none';\n    }\n\n    if (deviceStatus.state === 'playing') {\n        return 'playing';\n    } else if (deviceStatus.state === 'paused') {\n        return 'paused';\n    } else {\n        return 'none';\n    }\n}\n\nexport const Main = (props: {}) => {\n    let dispatch = useDispatch();\n    const disc = useShallowEqualSelector(state => state.main.disc);\n    const deviceName = useShallowEqualSelector(state => state.main.deviceName);\n    const deviceStatus = useShallowEqualSelector(state => state.main.deviceStatus);\n    const { vintageMode } = useShallowEqualSelector(state => state.appState);\n\n    const [selected, setSelected] = React.useState<number[]>([]);\n    const [uploadedFiles, setUploadedFiles] = React.useState<File[]>([]);\n    const [lastClicked, setLastClicked] = useState(-1);\n    const [moveMenuAnchorEl, setMoveMenuAnchorEl] = React.useState<null | HTMLElement>(null);\n\n    const handleShowMoveMenu = useCallback(\n        (event: React.MouseEvent<HTMLButtonElement>) => {\n            setMoveMenuAnchorEl(event.currentTarget);\n        },\n        [setMoveMenuAnchorEl]\n    );\n    const handleCloseMoveMenu = useCallback(() => {\n        setMoveMenuAnchorEl(null);\n    }, [setMoveMenuAnchorEl]);\n\n    const handleMoveSelectedTrack = useCallback(\n        (destIndex: number) => {\n            dispatch(moveTrack(selected[0], destIndex));\n            handleCloseMoveMenu();\n        },\n        [dispatch, selected, handleCloseMoveMenu]\n    );\n\n    const handleDrop = useCallback(\n        (result: DropResult, provided: ResponderProvided) => {\n            if (!result.destination) return;\n            let sourceList = parseInt(result.source.droppableId),\n                sourceIndex = result.source.index,\n                targetList = parseInt(result.destination.droppableId),\n                targetIndex = result.destination.index;\n            dispatch(dragDropTrack(sourceList, sourceIndex, targetList, targetIndex));\n        },\n        [dispatch]\n    );\n\n    const handleShowDumpDialog = useCallback(() => {\n        dispatch(dumpDialogActions.setVisible(true));\n    }, [dispatch]);\n\n    useEffect(() => {\n        dispatch(listContent());\n    }, [dispatch]);\n\n    useEffect(() => {\n        setSelected([]); // Reset selection if disc changes\n    }, [disc]);\n\n    const onDrop = useCallback(\n        (acceptedFiles: File[], rejectedFiles: File[]) => {\n            setUploadedFiles(acceptedFiles);\n            dispatch(convertDialogActions.setVisible(true));\n        },\n        [dispatch]\n    );\n\n    const { getRootProps, getInputProps, isDragActive, open } = useDropzone({\n        onDrop,\n        accept: [`audio/*`, `video/mp4`],\n        noClick: true,\n    });\n\n    const classes = useStyles();\n    const tracks = useMemo(() => getSortedTracks(disc), [disc]);\n    const groupedTracks = useMemo(() => getGroupedTracks(disc), [disc]);\n\n    // Action Handlers\n    const handleSelectTrackClick = useCallback(\n        (event: React.MouseEvent, item: number) => {\n            if (event.shiftKey && selected.length && lastClicked !== -1) {\n                let rangeBegin = Math.min(lastClicked + 1, item),\n                    rangeEnd = Math.max(lastClicked - 1, item);\n                let copy = [...selected];\n                for (let i = rangeBegin; i <= rangeEnd; i++) {\n                    let index = copy.indexOf(i);\n                    if (index === -1) copy.push(i);\n                    else copy.splice(index, 1);\n                }\n                if (!copy.includes(item)) copy.push(item);\n                setSelected(copy);\n            } else if (selected.includes(item)) {\n                setSelected(selected.filter(i => i !== item));\n            } else {\n                setSelected([...selected, item]);\n            }\n            setLastClicked(item);\n        },\n        [selected, setSelected, lastClicked, setLastClicked]\n    );\n\n    const handleSelectAllClick = useCallback(\n        (event: React.ChangeEvent<HTMLInputElement>) => {\n            if (selected.length < tracks.length) {\n                setSelected(tracks.map(t => t.index));\n            } else {\n                setSelected([]);\n            }\n        },\n        [selected, tracks]\n    );\n\n    const handleRenameTrack = useCallback(\n        (event: React.MouseEvent, index: number) => {\n            let track = tracks.find(t => t.index === index);\n            if (!track) {\n                return;\n            }\n\n            dispatch(\n                batchActions([\n                    renameDialogActions.setVisible(true),\n                    renameDialogActions.setGroupIndex(null),\n                    renameDialogActions.setCurrentName(track.title),\n                    renameDialogActions.setCurrentFullWidthName(track.fullWidthTitle),\n                    renameDialogActions.setIndex(track.index),\n                ])\n            );\n        },\n        [dispatch, tracks]\n    );\n\n    const handleRenameGroup = useCallback(\n        (event: React.MouseEvent, index: number) => {\n            let group = groupedTracks.find(g => g.index === index);\n            if (!group) {\n                return;\n            }\n\n            dispatch(\n                batchActions([\n                    renameDialogActions.setVisible(true),\n                    renameDialogActions.setGroupIndex(index),\n                    renameDialogActions.setCurrentName(group.title ?? ''),\n                    renameDialogActions.setCurrentFullWidthName(group.fullWidthTitle ?? ''),\n                    renameDialogActions.setIndex(-1),\n                ])\n            );\n        },\n        [dispatch, groupedTracks]\n    );\n\n    const handleRenameActionClick = useCallback(\n        (event: React.MouseEvent) => {\n            if (event.detail !== 1) return; //Event retriggering when hitting enter in the dialog\n            handleRenameTrack(event, selected[0]);\n        },\n        [handleRenameTrack, selected]\n    );\n\n    const handleDeleteSelected = useCallback(\n        (event: React.MouseEvent) => {\n            dispatch(deleteTracks(selected));\n        },\n        [dispatch, selected]\n    );\n\n    const handleGroupTracks = useCallback(\n        (event: React.MouseEvent) => {\n            dispatch(groupTracks(selected));\n        },\n        [dispatch, selected]\n    );\n\n    const handleDeleteGroup = useCallback(\n        (event: React.MouseEvent, index: number) => {\n            dispatch(deleteGroup(index));\n        },\n        [dispatch]\n    );\n\n    const handleTogglePlayPauseTrack = useCallback(\n        (event: React.MouseEvent, track: number) => {\n            if (!deviceStatus) {\n                return;\n            }\n            if (deviceStatus.track !== track) {\n                dispatch(control('goto', track));\n                dispatch(control('play'));\n            } else if (deviceStatus.state === 'playing') {\n                dispatch(control('pause'));\n            } else {\n                dispatch(control('play'));\n            }\n        },\n        [dispatch, deviceStatus]\n    );\n\n    const canGroup = useMemo(() => {\n        return (\n            tracks.filter(n => n.group === null && selected.includes(n.index)).length === selected.length &&\n            isSequential(selected.sort((a, b) => a - b))\n        );\n    }, [tracks, selected]);\n    const selectedCount = selected.length;\n\n    if (vintageMode) {\n        const p = {\n            disc,\n            deviceName,\n\n            selected,\n            setSelected,\n            selectedCount,\n\n            tracks,\n            uploadedFiles,\n            setUploadedFiles,\n\n            onDrop,\n            getRootProps,\n            getInputProps,\n            isDragActive,\n            open,\n\n            moveMenuAnchorEl,\n            setMoveMenuAnchorEl,\n\n            handleShowMoveMenu,\n            handleCloseMoveMenu,\n            handleMoveSelectedTrack,\n            handleShowDumpDialog,\n            handleDeleteSelected,\n            handleRenameActionClick,\n            handleRenameTrack,\n            handleSelectAllClick,\n            handleSelectTrackClick,\n        };\n        return <W95Main {...p} />;\n    }\n\n    return (\n        <React.Fragment>\n            <Box className={classes.headBox}>\n                <Typography component=\"h1\" variant=\"h4\">\n                    {deviceName || `Loading...`}\n                </Typography>\n                <TopMenu />\n            </Box>\n            <Typography component=\"h2\" variant=\"body2\">\n                {disc !== null ? (\n                    <React.Fragment>\n                        <span>{`${formatTimeFromFrames(disc.left, false)} left of ${formatTimeFromFrames(disc.total, false)} `}</span>\n                        <Tooltip\n                            title={\n                                <React.Fragment>\n                                    <span>{`${formatTimeFromFrames(disc.left * 2, false)} left in LP2 Mode`}</span>\n                                    <br />\n                                    <span>{`${formatTimeFromFrames(disc.left * 4, false)} left in LP4 Mode`}</span>\n                                </React.Fragment>\n                            }\n                            arrow\n                        >\n                            <span className={classes.remainingTimeTooltip}>SP Mode</span>\n                        </Tooltip>\n                    </React.Fragment>\n                ) : (\n                    `Loading...`\n                )}\n            </Typography>\n            <Toolbar\n                className={clsx(classes.toolbar, {\n                    [classes.toolbarHighlight]: selectedCount > 0,\n                })}\n            >\n                {selectedCount > 0 ? (\n                    <Checkbox\n                        indeterminate={selectedCount > 0 && selectedCount < tracks.length}\n                        checked={selectedCount > 0}\n                        onChange={handleSelectAllClick}\n                        inputProps={{ 'aria-label': 'select all tracks' }}\n                    />\n                ) : null}\n                {selectedCount > 0 ? (\n                    <Typography className={classes.toolbarLabel} color=\"inherit\" variant=\"subtitle1\">\n                        {selectedCount} selected\n                    </Typography>\n                ) : (\n                    <Typography component=\"h3\" variant=\"h6\" className={classes.toolbarLabel}>\n                        {disc?.fullWidthTitle && `${disc.fullWidthTitle} / `}\n                        {disc?.title || `Untitled Disc`}\n                    </Typography>\n                )}\n                {selectedCount > 0 ? (\n                    <React.Fragment>\n                        <Tooltip title=\"Record from MD\">\n                            <Button aria-label=\"Record\" onClick={handleShowDumpDialog}>\n                                Record\n                            </Button>\n                        </Tooltip>\n                    </React.Fragment>\n                ) : null}\n\n                {selectedCount > 0 ? (\n                    <Tooltip title=\"Delete\">\n                        <IconButton aria-label=\"delete\" onClick={handleDeleteSelected}>\n                            <DeleteIcon />\n                        </IconButton>\n                    </Tooltip>\n                ) : null}\n\n                {selectedCount > 0 ? (\n                    <Tooltip title={canGroup ? 'Group' : ''}>\n                        <IconButton aria-label=\"group\" disabled={!canGroup} onClick={handleGroupTracks}>\n                            <CreateNewFolderIcon />\n                        </IconButton>\n                    </Tooltip>\n                ) : null}\n\n                {selectedCount > 0 ? (\n                    <Tooltip title=\"Rename\">\n                        <IconButton aria-label=\"rename\" disabled={selectedCount !== 1} onClick={handleRenameActionClick}>\n                            <EditIcon />\n                        </IconButton>\n                    </Tooltip>\n                ) : null}\n            </Toolbar>\n            <Box className={classes.main} {...getRootProps()} id=\"main\">\n                <input {...getInputProps()} />\n                <Table size=\"small\">\n                    <TableHead>\n                        <TableRow>\n                            <TableCell className={classes.dragHandleEmpty}></TableCell>\n                            <TableCell className={classes.indexCell}>#</TableCell>\n                            <TableCell>Title</TableCell>\n                            <TableCell align=\"right\">Duration</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <DragDropContext onDragEnd={handleDrop}>\n                        <TableBody>\n                            {groupedTracks.map((group, index) => (\n                                <TableRow key={`${index}`}>\n                                    <TableCell colSpan={4} style={{ padding: '0' }}>\n                                        <Table size=\"small\">\n                                            <Droppable droppableId={`${index}`} key={`${index}`}>\n                                                {(provided: DroppableProvided, snapshot: DroppableStateSnapshot) => (\n                                                    <TableBody\n                                                        {...provided.droppableProps}\n                                                        ref={provided.innerRef}\n                                                        className={clsx({ [classes.hoveringOverGroup]: snapshot.isDraggingOver })}\n                                                    >\n                                                        {group.title !== null && (\n                                                            <GroupRow\n                                                                group={group}\n                                                                onRename={handleRenameGroup}\n                                                                onDelete={handleDeleteGroup}\n                                                            />\n                                                        )}\n                                                        {group.title === null && group.tracks.length === 0 && (\n                                                            <TableRow style={{ height: '1px' }} />\n                                                        )}\n                                                        {group.tracks.map((t, tidx) => (\n                                                            <Draggable\n                                                                draggableId={`${group.index}-${t.index}`}\n                                                                key={`t-${t.index}`}\n                                                                index={tidx}\n                                                            >\n                                                                {(provided: DraggableProvided) => (\n                                                                    <TrackRow\n                                                                        track={t}\n                                                                        draggableProvided={provided}\n                                                                        inGroup={group.title !== null}\n                                                                        isSelected={selected.includes(t.index)}\n                                                                        trackStatus={getTrackStatus(t, deviceStatus)}\n                                                                        onSelect={handleSelectTrackClick}\n                                                                        onRename={handleRenameTrack}\n                                                                        onTogglePlayPause={handleTogglePlayPauseTrack}\n                                                                    />\n                                                                )}\n                                                            </Draggable>\n                                                        ))}\n                                                        {provided.placeholder}\n                                                    </TableBody>\n                                                )}\n                                            </Droppable>\n                                        </Table>\n                                    </TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </DragDropContext>\n                </Table>\n                {isDragActive ? (\n                    <Backdrop className={classes.backdrop} open={isDragActive}>\n                        Drop your Music to Upload\n                    </Backdrop>\n                ) : null}\n            </Box>\n            <Fab color=\"primary\" aria-label=\"add\" className={classes.add} onClick={open}>\n                <AddIcon />\n            </Fab>\n\n            <UploadDialog />\n            <RenameDialog />\n            <ErrorDialog />\n            <ConvertDialog files={uploadedFiles} />\n            <RecordDialog />\n            <DumpDialog trackIndexes={selected} />\n            <AboutDialog />\n            <PanicDialog />\n        </React.Fragment>\n    );\n};\n","import React, { useCallback, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { forAnyDesktop, forWideDesktop, useShallowEqualSelector } from '../../utils';\n\nimport { Welcome } from '../welcome';\nimport { Main } from '../main';\nimport { actions as appActions } from '../../redux/app-feature';\n\nimport { Window, WindowHeader, Button, Toolbar, Panel, Hourglass, styleReset, Anchor } from 'react95';\nimport { createGlobalStyle, ThemeProvider as StyledThemeProvider } from 'styled-components';\nimport original from 'react95/dist/themes/original';\nimport { TopMenu } from '../topmenu';\nimport { useDispatch } from 'react-redux';\n\nimport CDPlayerIconUrl from '../../images/win95/cdplayer.png';\nimport { WindowCloseIcon } from './common';\n\nconst GlobalStyles = createGlobalStyle`\n${styleReset}\nbody {\n    font-family: 'ms_sans_serif';\n}\nimg {\n    image-rendering: pixelated;\n}\n`;\n\nconst useStyles = makeStyles(theme => ({\n    desktop: {\n        width: '100%',\n        height: '100%',\n        backgroundColor: 'teal',\n        display: 'flex',\n        justifyContent: 'center',\n    },\n    window: {\n        display: 'flex !important', // This is needed to override the styledComponent prop :(\n        flexDirection: 'column',\n        width: 'auto',\n        height: '100%',\n        [forAnyDesktop(theme)]: {\n            width: 600,\n            marginLeft: 'auto',\n            marginRight: 'auto',\n            height: 600,\n            marginTop: theme.spacing(2),\n        },\n        [forWideDesktop(theme)]: {\n            width: 700,\n            height: 700,\n            marginTop: theme.spacing(2),\n        },\n    },\n    loading: {\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n}));\n\nexport const W95App = () => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const { mainView, loading } = useShallowEqualSelector(state => state.appState);\n    const [isMenuOpen, setMenuOpen] = useState(false);\n\n    const handleExit = useCallback(() => {\n        dispatch(appActions.setMainView('WELCOME'));\n    }, [dispatch]);\n\n    const closeMenu = useCallback(() => {\n        setMenuOpen(false);\n    }, [setMenuOpen]);\n\n    const toggleMenu = useCallback(() => {\n        setMenuOpen(!isMenuOpen);\n    }, [isMenuOpen, setMenuOpen]);\n\n    const handleHelpClick = useCallback(() => {\n        window.open('https://github.com/cybercase/webminidisc/wiki/Support-and-FAQ', '_blank');\n    }, []);\n\n    const currentTheme = original;\n    const theme = {\n        ...currentTheme,\n        selectedTableRow: {\n            background: currentTheme.hoverBackground,\n            color: currentTheme.canvasTextInvert,\n        },\n    };\n\n    return (\n        <div className={classes.desktop}>\n            <GlobalStyles />\n            <StyledThemeProvider theme={theme}>\n                <Window className={classes.window}>\n                    <WindowHeader style={{ display: 'flex', alignItems: 'center' }}>\n                        <img alt=\"CD Player\" src={CDPlayerIconUrl} />\n                        <span style={{ flex: '1 1 auto', marginLeft: '4px' }}>Web MiniDisc</span>\n                        {mainView === 'MAIN' ? (\n                            <Button onClick={handleExit}>\n                                <WindowCloseIcon />\n                            </Button>\n                        ) : null}\n                    </WindowHeader>\n                    <Toolbar>\n                        <Button variant=\"menu\" size=\"sm\" active={isMenuOpen} onClick={toggleMenu}>\n                            File\n                        </Button>\n                        <Button variant=\"menu\" size=\"sm\" onClick={handleHelpClick}>\n                            Help\n                        </Button>\n                        {isMenuOpen ? <TopMenu onClick={closeMenu} /> : null}\n                    </Toolbar>\n                    <>\n                        {mainView === 'WELCOME' ? <Welcome /> : null}\n                        {mainView === 'MAIN' ? <Main /> : null}\n                    </>\n                    <Panel variant=\"well\">\n                        &nbsp;\n                        {' (c) '}\n                        <Anchor rel=\"noopener noreferrer\" color=\"inherit\" target=\"_blank\" href=\"https://stefano.brilli.me/\">\n                            Stefano Brilli\n                        </Anchor>{' '}\n                        {new Date().getFullYear()}\n                        {'.'}\n                    </Panel>\n                    {loading ? (\n                        <div className={classes.loading}>\n                            <Hourglass size={32} />\n                        </div>\n                    ) : null}\n                </Window>\n            </StyledThemeProvider>\n        </div>\n    );\n};\n","import React from 'react';\nimport { belowDesktop, forAnyDesktop, forWideDesktop, useShallowEqualSelector } from '../utils';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles, createTheme, ThemeProvider } from '@material-ui/core/styles';\n\nimport { Welcome } from './welcome';\nimport { Main } from './main';\nimport { Controls } from './controls';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport Box from '@material-ui/core/Box';\nimport { W95App } from './win95/app';\n\nconst useStyles = makeStyles(theme => ({\n    layout: {\n        width: 'auto',\n        height: '100%',\n        [forAnyDesktop(theme)]: {\n            width: 600,\n            marginLeft: 'auto',\n            marginRight: 'auto',\n        },\n        [forWideDesktop(theme)]: {\n            width: 700,\n        },\n    },\n\n    paper: {\n        position: 'relative',\n        display: 'flex',\n        flexDirection: 'column',\n        padding: theme.spacing(2),\n        height: 'calc(100% - 20px)',\n        [forAnyDesktop(theme)]: {\n            marginTop: theme.spacing(2),\n            marginBottom: theme.spacing(1),\n            padding: theme.spacing(3),\n            height: 600,\n        },\n        [forWideDesktop(theme)]: {\n            height: 700,\n        },\n    },\n    bottomBar: {\n        display: 'flex',\n        alignItems: 'center',\n        [belowDesktop(theme)]: {\n            flexWrap: 'wrap',\n        },\n        marginLeft: -theme.spacing(2),\n    },\n    copyrightTypography: {\n        textAlign: 'center',\n    },\n    backdrop: {\n        zIndex: theme.zIndex.drawer + 1,\n        color: '#fff',\n    },\n    minidiscLogo: {\n        width: 48,\n    },\n    controlsContainer: {\n        flex: '0 0 auto',\n        width: '100%',\n        paddingRight: theme.spacing(8),\n        [belowDesktop(theme)]: {\n            paddingLeft: 0,\n        },\n    },\n}));\n\nconst darkTheme = createTheme({\n    palette: {\n        type: 'dark',\n        primary: {\n            light: '#6ec6ff',\n            main: '#2196f3',\n            dark: '#0069c0',\n            contrastText: '#fff',\n        },\n    },\n});\n\nconst lightTheme = createTheme({\n    palette: {\n        type: 'light',\n    },\n});\n\nconst App = () => {\n    const classes = useStyles();\n    const { mainView, loading, darkMode, vintageMode } = useShallowEqualSelector(state => state.appState);\n\n    if (vintageMode) {\n        return <W95App></W95App>;\n    }\n\n    return (\n        <React.Fragment>\n            <ThemeProvider theme={darkMode ? darkTheme : lightTheme}>\n                <CssBaseline />\n\n                <main className={classes.layout}>\n                    <Paper className={classes.paper}>\n                        {mainView === 'WELCOME' ? <Welcome /> : null}\n                        {mainView === 'MAIN' ? <Main /> : null}\n\n                        <Box className={classes.controlsContainer}>{mainView === 'MAIN' ? <Controls /> : null}</Box>\n                    </Paper>\n                    <Typography variant=\"body2\" color=\"textSecondary\" className={classes.copyrightTypography}>\n                        {'© '}\n                        <Link rel=\"noopener noreferrer\" color=\"inherit\" target=\"_blank\" href=\"https://stefano.brilli.me/\">\n                            Stefano Brilli\n                        </Link>{' '}\n                        {new Date().getFullYear()}\n                        {'.'}\n                    </Typography>\n                </main>\n\n                {loading ? (\n                    <Backdrop className={classes.backdrop} open={loading}>\n                        <CircularProgress color=\"inherit\" />\n                    </Backdrop>\n                ) : null}\n            </ThemeProvider>\n        </React.Fragment>\n    );\n};\n\nexport default App;\n","/* eslint no-restricted-globals: 0 */\nimport { getPublicPathFor } from '../utils';\nexport class AtracdencProcess {\n    private messageCallback?: (ev: MessageEvent) => void;\n\n    constructor(public worker: Worker) {\n        worker.onmessage = this.handleMessage.bind(this);\n    }\n\n    async init() {\n        await new Promise<MessageEvent>(resolve => {\n            this.messageCallback = resolve;\n            this.worker.postMessage({ action: 'init' });\n        });\n    }\n\n    async encode(data: ArrayBuffer, bitrate: string) {\n        let eventData = await new Promise<MessageEvent>(resolve => {\n            this.messageCallback = resolve;\n            this.worker.postMessage({ action: 'encode', bitrate, data }, [data]);\n        });\n        return eventData.data.result as Uint8Array;\n    }\n\n    terminate() {\n        this.worker.terminate();\n    }\n\n    handleMessage(ev: MessageEvent) {\n        this.messageCallback!(ev);\n        this.messageCallback = undefined;\n    }\n}\n\nif (typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope) {\n    // Worker\n    let Module: any;\n    onmessage = async (ev: MessageEvent) => {\n        const { action, ...others } = ev.data;\n        if (action === 'init') {\n            self.importScripts(getPublicPathFor(`atracdenc.js`));\n            (self as any).Module().then((m: any) => {\n                Module = m;\n                self.postMessage({ action: 'init' });\n                Module.setLogger && Module.setLogger((msg: string, stream: string) => console.log(`${stream}: ${msg}`));\n            });\n        } else if (action === 'encode') {\n            const { bitrate, data } = others;\n            const inWavFile = `inWavFile.wav`;\n            const outAt3File = `outAt3File.aea`;\n            const dataArray = new Uint8Array(data);\n            Module.FS.writeFile(`${inWavFile}`, dataArray);\n            Module.callMain([`-e`, `atrac3`, `-i`, inWavFile, `-o`, outAt3File, `--bitrate`, bitrate]);\n\n            // Read file and trim header (96 bytes)\n            let fileStat = Module.FS.stat(outAt3File);\n            let size = fileStat.size;\n            let tmp = new Uint8Array(size - 96);\n            let outAt3FileStream = Module.FS.open(outAt3File, 'r');\n            Module.FS.read(outAt3FileStream, tmp, 0, tmp.length, 96);\n            Module.FS.close(outAt3FileStream);\n\n            let result = tmp.buffer;\n\n            self.postMessage(\n                {\n                    action: 'encode',\n                    result,\n                },\n                [result]\n            );\n        }\n    };\n} else {\n    // Main\n}\n","import { createWorker, setLogging } from '@ffmpeg/ffmpeg';\nimport { AtracdencProcess } from './atracdenc-worker';\nimport { getAtrac3Info, getPublicPathFor } from '../utils';\nimport { Wireformat } from 'netmd-js';\nimport { WireformatDict } from '../redux/actions';\nconst AtracdencWorker = require('worker-loader!./atracdenc-worker'); // eslint-disable-line import/no-webpack-loader-syntax\n\ninterface LogPayload {\n    message: string;\n    action: string;\n}\n\nexport interface AudioExportService {\n    init(): Promise<void>;\n    export(params: { requestedFormat: 'SP' | 'LP2' | 'LP4' }): Promise<{ data: ArrayBuffer; format: Wireformat }>;\n    info(): Promise<{ format: string | null; input: string | null }>;\n    prepare(file: File): Promise<void>;\n}\n\nexport class FFMpegAudioExportService implements AudioExportService {\n    public ffmpegProcess: any;\n    public atracdencProcess?: AtracdencProcess;\n    public loglines: { action: string; message: string }[] = [];\n    public inFileName: string = ``;\n    public outFileNameNoExt: string = ``;\n    public inFile?: File;\n\n    async init() {\n        setLogging(true);\n    }\n\n    async prepare(file: File) {\n        this.inFile = file;\n        this.loglines = [];\n        this.ffmpegProcess = createWorker({\n            logger: (payload: LogPayload) => {\n                this.loglines.push(payload);\n                console.log(payload.action, payload.message);\n            },\n            corePath: getPublicPathFor('ffmpeg-core.js'),\n            workerPath: getPublicPathFor('worker.min.js'),\n        });\n        await this.ffmpegProcess.load();\n\n        this.atracdencProcess = new AtracdencProcess(new AtracdencWorker());\n        await this.atracdencProcess.init();\n\n        let ext = file.name.split('.').slice(-1);\n        if (ext.length === 0) {\n            throw new Error(`Unrecognized file format: ${file.name}`);\n        }\n\n        this.inFileName = `inAudioFile.${ext[0]}`;\n        this.outFileNameNoExt = `outAudioFile`;\n\n        await this.ffmpegProcess.write(this.inFileName, file);\n    }\n\n    async info() {\n        await this.ffmpegProcess.transcode(this.inFileName, `${this.outFileNameNoExt}.metadata`, `-f ffmetadata`);\n\n        let audioFormatRegex = /Audio:\\s(.*?),/; // Actual content\n        let inputFormatRegex = /Input #0,\\s(.*?),/; // Container\n        let format: string | null = null;\n        let input: string | null = null;\n\n        for (let line of this.loglines) {\n            let match = line.message.match(audioFormatRegex);\n            if (match !== null) {\n                format = match[1];\n                continue;\n            }\n            match = line.message.match(inputFormatRegex);\n            if (match !== null) {\n                input = match[1];\n                continue;\n            }\n            if (format !== null && input !== null) {\n                break;\n            }\n        }\n\n        return { format, input };\n    }\n\n    async export({ requestedFormat }: { requestedFormat: 'SP' | 'LP2' | 'LP4' | 'LP105' }) {\n        let result: ArrayBuffer;\n        let format: Wireformat;\n        const atrac3Info = await getAtrac3Info(this.inFile!);\n        if (atrac3Info) {\n            format = WireformatDict[atrac3Info.mode];\n            result = (await this.inFile!.arrayBuffer()).slice(atrac3Info.dataOffset);\n        } else if (requestedFormat === `SP`) {\n            const outFileName = `${this.outFileNameNoExt}.raw`;\n            await this.ffmpegProcess.transcode(this.inFileName, outFileName, '-ac 2 -ar 44100 -f s16be');\n            let { data } = await this.ffmpegProcess.read(outFileName);\n            result = data.buffer;\n            format = Wireformat.pcm;\n        } else {\n            const outFileName = `${this.outFileNameNoExt}.wav`;\n            await this.ffmpegProcess.transcode(this.inFileName, outFileName, '-f wav -ar 44100 -ac 2');\n            let { data } = await this.ffmpegProcess.read(outFileName);\n            let bitrate: string = `0`;\n            switch (requestedFormat) {\n                case `LP2`:\n                    bitrate = `128`;\n                    format = Wireformat.lp2;\n                    break;\n                case `LP105`:\n                    bitrate = `102`;\n                    format = Wireformat.l105kbps;\n                    break;\n                case `LP4`:\n                    bitrate = `64`;\n                    format = Wireformat.lp4;\n                    break;\n            }\n            result = await this.atracdencProcess!.encode(data.buffer, bitrate);\n        }\n        this.ffmpegProcess.worker.terminate();\n        this.atracdencProcess!.terminate();\n        return {\n            data: result,\n            format,\n        };\n    }\n}\n","export function createEmptyWave(time: number, sampleRate = 22050) {\n    const numOfChan = 1;\n    const depthInBytes = 2;\n    const length = time * sampleRate * numOfChan * depthInBytes + 44;\n    const buffer = new ArrayBuffer(length);\n    const view = new DataView(buffer);\n\n    let pos = 0;\n    function setUint16(data: number) {\n        view.setUint16(pos, data, true);\n        pos += 2;\n    }\n\n    function setUint32(data: number) {\n        view.setUint32(pos, data, true);\n        pos += 4;\n    }\n\n    // write WAVE header\n    setUint32(0x46464952);\n    setUint32(length - 8);\n    setUint32(0x45564157);\n\n    setUint32(0x20746d66);\n    setUint32(16);\n    setUint16(1);\n    setUint16(numOfChan);\n    setUint32(sampleRate);\n    setUint32(sampleRate * numOfChan * depthInBytes);\n    setUint16(numOfChan * depthInBytes);\n    setUint16(depthInBytes * 8);\n\n    setUint32(0x61746164);\n    setUint32(length - pos - 4);\n\n    return new Blob([buffer], { type: 'audio/wav' });\n}\n","/* eslint no-restricted-globals: 0 */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\nimport { NetMDUSBService } from './services/netmd';\nimport { NetMDMockService } from './services/netmd-mock';\nimport serviceRegistry from './services/registry';\n\nimport { store } from './redux/store';\nimport { actions as appActions } from './redux/app-feature';\nimport { actions as mainActions } from './redux/main-feature';\n\nimport App from './components/app';\n\nimport './index.css';\nimport './fonts/fonts.css';\n\nimport { FFMpegAudioExportService } from './services/audio-export';\nimport { MediaRecorderService } from './services/mediarecorder';\nimport { BrowserMediaSessionService } from './services/media-session';\n\nserviceRegistry.netmdService = (window as any).native?.interface || new NetMDUSBService({ debug: true });\n// serviceRegistry.netmdService = new NetMDMockService(); // Uncomment to work without a device attached\nserviceRegistry.audioExportService = new FFMpegAudioExportService();\nserviceRegistry.mediaRecorderService = new MediaRecorderService();\nserviceRegistry.mediaSessionService = new BrowserMediaSessionService(store);\n\n(function setupEventHandlers() {\n    window.addEventListener('beforeunload', ev => {\n        let isUploading = store.getState().uploadDialog.visible;\n        if (!isUploading) {\n            return;\n        }\n        ev.preventDefault();\n        ev.returnValue = `Warning! Recording will be interrupted`;\n    });\n\n    if (navigator && navigator.usb) {\n        navigator.usb.ondisconnect = function() {\n            store.dispatch(appActions.setMainView('WELCOME'));\n        };\n    } else {\n        store.dispatch(appActions.setBrowserSupported(false));\n    }\n\n    if (!('Notification' in window) || Notification.permission === 'denied') {\n        store.dispatch(appActions.setNotificationSupport(false));\n        store.dispatch(appActions.setNotifyWhenFinished(false));\n    }\n\n    // eslint-disable-next-line\n    let deferredPrompt: any;\n    window.addEventListener('beforeinstallprompt', (e: any) => {\n        e.preventDefault();\n        deferredPrompt = e;\n    });\n})();\n\n(function statusMonitorManager() {\n    // Polls the device for its state while playing tracks\n    let statusMonitorInterval: ReturnType<typeof setInterval> | null = null;\n    let exceptionOccurred: boolean = false;\n\n    function shouldMonitorBeRunning(state: ReturnType<typeof store.getState>): boolean {\n        return (\n            !exceptionOccurred &&\n            // App ready\n            state.appState.mainView === 'MAIN' &&\n            state.appState.loading === false &&\n            // Disc playing\n            state.main.deviceStatus?.state === 'playing' &&\n            // No operational dialogs running\n            state.convertDialog.visible === false &&\n            state.uploadDialog.visible === false &&\n            state.recordDialog.visible === false &&\n            state.panicDialog.visible === false &&\n            state.errorDialog.visible === false &&\n            state.dumpDialog.visible === false\n        );\n    }\n\n    store.subscribe(function() {\n        const state = store.getState();\n        if (shouldMonitorBeRunning(state) === true && statusMonitorInterval === null) {\n            // start monitor\n            statusMonitorInterval = setInterval(async () => {\n                try {\n                    const deviceStatus = await serviceRegistry.netmdService!.getDeviceStatus();\n                    store.dispatch(mainActions.setDeviceStatus(deviceStatus));\n                } catch (e) {\n                    console.error(e);\n                    exceptionOccurred = true; // Stop monitor on exception\n                }\n            }, 5000);\n        } else if (shouldMonitorBeRunning(state) === false && statusMonitorInterval !== null) {\n            // stop monitor\n            clearInterval(statusMonitorInterval);\n            statusMonitorInterval = null;\n        }\n    });\n})();\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root')\n);\n\nif (process.env.REACT_APP_NO_GA_RELEASE !== 'true') {\n    serviceWorker.register();\n    // serviceWorker.unregister();\n\n    try {\n        (function() {\n            let head = document.getElementsByTagName('head')[0];\n            let uascript = document.createElement('script');\n            uascript.type = 'text/javascript';\n            uascript.src = 'https://www.googletagmanager.com/gtag/js?id=UA-60498490-1';\n            head.appendChild(uascript);\n\n            let pvscript = document.createElement('script');\n            pvscript.type = 'text/javascript';\n            pvscript.text = `\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', 'UA-60498490-1');\n            `;\n            head.appendChild(pvscript);\n        })();\n    } catch (err) {}\n}\n","import { sanitizeTitle, getPublicPathFor } from '../utils';\nimport Recorder from 'recorderjs';\n\nexport class MediaRecorderService {\n    public recorder: any;\n    public stream?: MediaStream;\n    public audioContext?: AudioContext;\n    public analyserNode?: AnalyserNode;\n    public gainNode?: GainNode;\n\n    playTestInput(deviceId: string) {\n        this.audioContext = new AudioContext();\n        this.gainNode = this.audioContext.createGain();\n        this.analyserNode = this.audioContext.createAnalyser();\n\n        this.initStream(deviceId).then(() => {\n            const source = this.audioContext!.createMediaStreamSource(this.stream!);\n            source.connect(this.gainNode!);\n            this.gainNode!.connect(this.analyserNode!);\n            this.analyserNode!.connect(this.audioContext!.destination);\n        });\n    }\n\n    stopTestInput() {\n        if (!this.audioContext) {\n            return;\n        }\n        this.audioContext?.close();\n        delete this.audioContext;\n        this.closeStream();\n    }\n\n    async initStream(deviceId: string) {\n        const recordConstraints = {\n            // Try to set the best recording params for ripping the audio tracks\n            autoGainControl: false,\n            channelCount: 2,\n            deviceId: deviceId,\n            echoCancellation: false,\n            noiseSuppression: false,\n            sampleRate: { min: 44100, max: 44100, ideal: 44100 }, // CAVEAT: it looks like this is the only way to get 44100Hz as sampling rate for some devices in chrome\n            highpassFilter: false,\n        };\n\n        try {\n            this.stream = await navigator.mediaDevices.getUserMedia({ audio: recordConstraints });\n        } catch (err) {\n            if (err instanceof OverconstrainedError && err.constraint === 'sampleRate') {\n                console.log('Cannot obtain a sampleRate of 44100Hz. Falling back to default value...');\n                this.stream = await navigator.mediaDevices.getUserMedia({ audio: { ...recordConstraints, sampleRate: undefined } }); // fallback to default sampleRate\n            } else {\n                throw err;\n            }\n        }\n\n        // Dump recording settings\n        const audioTracks = this.stream.getAudioTracks();\n        if (audioTracks.length > 0) {\n            console.log('Record Setings:', audioTracks[0].getSettings());\n        }\n    }\n\n    async startRecording() {\n        this.audioContext = new AudioContext();\n        const input = this.audioContext.createMediaStreamSource(this.stream!);\n        this.recorder = new Recorder(input, { workerPath: getPublicPathFor(`recorderWorker.js`) });\n        this.recorder.record();\n    }\n\n    async stopRecording() {\n        this.recorder.stop();\n    }\n\n    async closeStream() {\n        this.stream?.getTracks().forEach(track => track.stop());\n    }\n\n    downloadRecorded(title: string) {\n        this.recorder.exportWAV((buffer: Blob) => {\n            let url = URL.createObjectURL(buffer);\n            let a = document.createElement('a');\n            document.body.appendChild(a);\n            a.style.display = 'none';\n            a.href = url;\n            a.download = `${sanitizeTitle(title)}.wav`;\n            a.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(a);\n        });\n    }\n}\n","import { debounce, DisplayTrack, getSortedTracks, sleep } from '../utils';\nimport { createEmptyWave } from '../create-empty-wave';\nimport { control } from '../redux/actions';\nimport { AppStore, AppSubscribe, AppGetState } from '../redux/store';\nimport { Dispatch } from '@reduxjs/toolkit';\nimport { Disc } from 'netmd-js';\n\nexport interface MediaSessionService {\n    init(): Promise<void>;\n}\n\nexport class BrowserMediaSessionService {\n    private initialized = false;\n    private audioEl?: HTMLAudioElement;\n\n    private dispatch: Dispatch<any>; // CAVEAT: AppDispatch type doesn't have an overload for redux thunk actions\n    private subscribe: AppSubscribe;\n    private getState: AppGetState;\n\n    constructor(appStore: AppStore) {\n        this.dispatch = appStore.dispatch.bind(appStore) as Dispatch<any>;\n        this.subscribe = appStore.subscribe.bind(appStore);\n        this.getState = appStore.getState.bind(appStore);\n    }\n\n    async init() {\n        if (this.initialized || !navigator.mediaSession) {\n            return;\n        }\n        this.initialized = true;\n\n        // Audio el\n        const audioEl = document.createElement('audio');\n        audioEl.id = 'browser-media-session-helper';\n        document.body.appendChild(audioEl);\n\n        audioEl.setAttribute('loop', 'true');\n        audioEl.src = URL.createObjectURL(createEmptyWave(6));\n        audioEl.volume = 0;\n\n        this.audioEl = audioEl;\n\n        // Blocks media session events during initialization\n        navigator.mediaSession.setActionHandler('play', null);\n        navigator.mediaSession.setActionHandler('previoustrack', null);\n        navigator.mediaSession.setActionHandler('nexttrack', null);\n        navigator.mediaSession.setActionHandler('pause', null);\n        navigator.mediaSession.setActionHandler('seekto', null);\n        navigator.mediaSession.metadata = null;\n\n        audioEl.play();\n        await sleep(5000); // CAVEAT: 5secs is the minimum playing time for media info to show up\n        audioEl.pause();\n\n        if (this.getState().main.deviceStatus?.state === 'playing') {\n            // restore current state\n            audioEl.play();\n        }\n\n        console.log('MediaSession ready');\n\n        // Set mediaSession event handlers\n        navigator.mediaSession.setActionHandler('previoustrack', () => {\n            this.dispatch(control('prev'));\n        });\n        navigator.mediaSession.setActionHandler('nexttrack', () => {\n            this.dispatch(control('next'));\n        });\n        navigator.mediaSession.setActionHandler('pause', () => {\n            audioEl.pause();\n            this.dispatch(control('pause'));\n        });\n        navigator.mediaSession.setActionHandler('play', () => {\n            audioEl.play();\n            this.dispatch(control('play'));\n        });\n\n        const debouncedSeek = debounce((time: number, trackNumber: number) => {\n            this.dispatch(control('seek', { time, trackNumber }));\n            audioEl.currentTime = time;\n        }, 100);\n\n        navigator.mediaSession.setActionHandler('seekto', details => {\n            const trackNumber = this.getState().main.deviceStatus?.track ?? -1;\n            if (trackNumber === -1 || details.seekTime === null) {\n                return; // can't seek without knowing the track number or the seek time\n            }\n            debouncedSeek(details.seekTime, trackNumber);\n        });\n\n        this.subscribe(() => {\n            this.syncState();\n        });\n    }\n\n    // This will save cpu cycles when just playing music. Might replace in the future with some memoization library\n    private sortedTracks: DisplayTrack[] = [];\n    private sortedTracksDisc: Disc | null = null;\n    getSortedTracksWithCache(disc: Disc | null) {\n        if (disc !== this.sortedTracksDisc) {\n            this.sortedTracks = getSortedTracks(disc);\n            this.sortedTracksDisc = disc;\n        }\n        return this.sortedTracks;\n    }\n\n    syncState() {\n        if (!this.initialized) {\n            return;\n        }\n\n        const audioEl = this.audioEl!;\n        const {\n            main: { deviceStatus, disc },\n        } = this.getState();\n\n        const isPlaying = deviceStatus?.state === 'playing';\n        const currentDiscTitle = disc?.title;\n        const currentTrackIndex = deviceStatus?.track ?? -1;\n        const allTracks = this.getSortedTracksWithCache(disc);\n        const currentTrack: DisplayTrack | undefined = allTracks[currentTrackIndex];\n        const currentTrackTitle = currentTrack ? currentTrack.fullWidthTitle || currentTrack?.title : '';\n        const currentTrackDurationInSecs = Math.round(currentTrack?.durationInSecs ?? -1);\n\n        const oldTrackTitle = navigator.mediaSession.metadata?.title;\n        const oldDiscTitle = navigator.mediaSession.metadata?.album;\n\n        // Sync MmediaSession\n        if (isPlaying && navigator.mediaSession.playbackState !== 'playing') {\n            navigator.mediaSession.playbackState = 'playing';\n        } else if (!isPlaying && navigator.mediaSession.playbackState !== 'paused') {\n            navigator.mediaSession.playbackState = 'paused';\n        }\n\n        // Sync MediaMetadata\n        if (oldTrackTitle !== currentTrackTitle || oldDiscTitle !== currentDiscTitle) {\n            navigator.mediaSession.metadata = new MediaMetadata({\n                title: currentTrackTitle,\n                album: currentDiscTitle,\n                artwork: [\n                    { src: window.location.pathname + 'MiniDisc192.png', sizes: '192x192', type: 'image/png' },\n                    { src: window.location.pathname + 'MiniDisc512.png', sizes: '512x512', type: 'image/png' },\n                ],\n            });\n        }\n\n        // Sync audio duration.\n        // CAVEAT: replacing the src may change the audioEl paused state.\n        if (audioEl && audioEl.duration !== currentTrackDurationInSecs && isPlaying) {\n            URL.revokeObjectURL(audioEl.src ?? '');\n            audioEl.src = URL.createObjectURL(createEmptyWave(Math.max(currentTrackDurationInSecs, 1)));\n        }\n\n        // Sync <audio> state\n        if (isPlaying && audioEl.paused) {\n            audioEl.play();\n        } else if (!isPlaying && !audioEl.paused) {\n            audioEl.pause();\n        }\n    }\n}\n"],"sourceRoot":""}